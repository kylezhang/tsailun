/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.9.0 (TBD)
 */
!function(){"use strict";var r=function(e){if(null===e)return"null";if(e===undefined)return"undefined";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},t=function(e){return{eq:e}},s=t(function(e,t){return e===t}),i=function(o){return t(function(e,t){if(e.length!==t.length)return!1;for(var n=e.length,r=0;r<n;r++)if(!o.eq(e[r],t[r]))return!1;return!0})},c=function(e,n){return r=i(e),o=function(e){return t=n,Array.prototype.slice.call(e).sort(t);var t},t(function(e,t){return r.eq(o(e),o(t))});var r,o},a=function(u){return t(function(e,t){var n=Object.keys(e),r=Object.keys(t);if(!c(s).eq(n,r))return!1;for(var o=n.length,i=0;i<o;i++){var a=n[i];if(!u.eq(e[a],t[a]))return!1}return!0})},u=t(function(e,t){if(e===t)return!0;var n=r(e);return n===r(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?i(u).eq(e,t):"object"===n&&a(u).eq(e,t))}),e=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}},n=function(t){return function(e){return typeof e===t}},o=function(t){return function(e){return t===e}},W=e("string"),C=e("object"),y=e("array"),l=o(null),f=n("boolean"),d=o(undefined),K=function(e){return null===e||e===undefined},V=function(e){return!K(e)},m=n("function"),w=n("number"),ee=function(){},v=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},X=function(e){return function(){return e}},g=function(e){return e},p=function(e,t){return e===t};function h(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}var b=function(t){return function(e){return!t(e)}},x=function(e){return e()},S=function(e){e()},N=X(!1),E=X(!0),k=function(){return _},_={fold:function(e,t){return e()},isSome:N,isNone:E,getOr:g,getOrThunk:ct=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:X(null),getOrUndefined:X(undefined),or:g,orThunk:ct,map:k,each:ee,bind:k,exists:N,forall:E,filter:function(){return _},toArray:function(){return[]},toString:X("none()")},T=function(n){var e=X(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:E,isNone:N,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return T(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:_},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},A={some:T,none:k,from:function(e){return null===e||e===undefined?_:T(e)}},R=Array.prototype.slice,D=Array.prototype.indexOf,O=Array.prototype.push,B=function(e,t){return D.call(e,t)},P=function(e,t){return-1<B(e,t)},L=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},I=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},Y=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},M=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},F=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}},U=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},z=function(e,t,n){return M(e,function(e){n=t(n,e)}),n},j=function(e,t,n){return Y(e,function(e){n=t(n,e)}),n},H=function(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return A.some(i);if(n(i,r))break}return A.none()}(e,t,N)},q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return A.some(n);return A.none()},$=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!y(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);O.apply(t,e[n])}return t}(I(e,t))},G=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},J=function(e){e=R.call(e,0);return e.reverse(),e},Q=function(e,t){return U(e,function(e){return!P(t,e)})},Z=function(e,t){return 0<=t&&t<e.length?A.some(e[t]):A.none()},te=function(e){return Z(e,0)},ne=function(e){return Z(e,e.length-1)},re=m(Array.from)?Array.from:function(e){return R.call(e)},oe=Object.keys,ie=Object.hasOwnProperty,ae=function(e,t){for(var n=oe(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},ue=function(e,n){return se(e,function(e,t){return{k:t,v:n(e,t)}})},se=function(e,n){var r={};return ae(e,function(e,t){t=n(e,t);r[t.k]=t.v}),r},ce=function(n){return function(e,t){n[t]=e}},le=function(e,n,r,o){return ae(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},fe=function(e,t){var n={},r={};return le(e,t,ce(n),ce(r)),{t:n,f:r}},de=function(e,t){var n={};return le(e,t,ce(n),ee),n},me=function(e){return n=g,r=[],ae(e,function(e,t){r.push(n(e,t))}),r;var n,r},ge=function(e,t){return pe(e,t)?A.from(e[t]):A.none()},pe=function(e,t){return ie.call(e,t)},he=function(e,t){return pe(e,t)&&e[t]!==undefined&&null!==e[t]},ve=Array.isArray,be=function(e,t,n){var r,o;if(!e)return!1;if(n=n||e,e.length!==undefined){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(pe(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},ye=function(n,r){var o=[];return be(n,function(e,t){o.push(r(e,t,n))}),o},Ce=function(n,r){var o=[];return be(n,function(e,t){r&&!r(e,t,n)||o.push(e)}),o},we=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},xe=function(e,t,n,r){for(var o=d(n)?e[0]:n,i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o},Se=function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},Ne=function(e){return e[e.length-1]},Ee=function(){return(Ee=Object.assign||function Ee(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ke(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||t)}var _e,Te,Ae,Re,De,Oe,Be,Pe=function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return Ie(e(1),e(2))},Le=function(){return Ie(0,0)},Ie=function(e,t){return{major:e,minor:t}},Me={nu:Ie,detect:function(e,t){t=String(t).toLowerCase();return 0===e.length?Le():Pe(e,t)},unknown:Le},Fe=function(e,t){var n=String(t).toLowerCase();return H(e,function(e){return e.search(n)})},Ue=function(e,n){return Fe(e,n).map(function(e){var t=Me.detect(e.versionRegexes,n);return{current:e.name,version:t}})},ze=function(e,n){return Fe(e,n).map(function(e){var t=Me.detect(e.versionRegexes,n);return{current:e.name,version:t}})},je=function(e,t){return-1!==e.indexOf(t)},He=function(e,t){return n=e,e=0,""===(t=t)||n.length>=t.length&&n.substr(e,e+t.length)===t;var n},Ve=function(t){return function(e){return e.replace(t,"")}},qe=Ve(/^\s+|\s+$/g),$e=Ve(/^\s+/g),We=Ve(/\s+$/g),Ke=function(e){return 0<e.length},Xe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,e=function(t){return function(e){return je(e,t)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return je(e,"edge/")&&je(e,"chrome")&&je(e,"safari")&&je(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xe],search:function(e){return je(e,"chrome")&&!je(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return je(e,"msie")||je(e,"trident")}},{name:"Opera",versionRegexes:[Xe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[Xe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(je(e,"safari")||je(e,"mobile/"))&&je(e,"applewebkit")}}],n=[{name:"Windows",search:e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return je(e,"iphone")||je(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ye={browsers:X(o),oses:X(n)},Ge="Firefox",Je=function(e){var t=e.current,n=e.version,e=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(Ge),isSafari:e("Safari")}},Qe={unknown:function(){return Je({current:undefined,version:Me.unknown()})},nu:Je,edge:X("Edge"),chrome:X("Chrome"),ie:X("IE"),opera:X("Opera"),firefox:X(Ge),safari:X("Safari")},Ze="Windows",et="Android",tt="Solaris",nt="FreeBSD",rt="ChromeOS",ot=function(e){var t=e.current,n=e.version,e=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:e(Ze),isiOS:e("iOS"),isAndroid:e(et),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(tt),isFreeBSD:e(nt),isChromeOS:e(rt)}},it={unknown:function(){return ot({current:undefined,version:Me.unknown()})},nu:ot,windows:X(Ze),ios:X("iOS"),android:X(et),linux:X("Linux"),osx:X("OSX"),solaris:X(tt),freebsd:X(nt),chromeos:X(rt)},at=function(e,t){var n,r,o=Ye.browsers(),i=Ye.oses(),a=Ue(o,e).fold(Qe.unknown,Qe.nu),u=ze(i,e).fold(it.unknown,it.nu);return{browser:a,os:u,deviceType:(n=a,r=e,o=t,a=(i=u).isiOS()&&!0===/ipad/i.test(r),e=i.isiOS()&&!a,t=i.isiOS()||i.isAndroid(),u=t||o("(pointer:coarse)"),o=a||!e&&t&&o("(min-device-width:768px)"),t=e||t&&!o,r=n.isSafari()&&i.isiOS()&&!1===/safari/i.test(r),{isiPad:X(a),isiPhone:X(e),isTablet:X(o),isPhone:X(t),isTouch:X(u),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:X(r),isDesktop:X(!t&&!o&&!r)})}},ut=function(e){return window.matchMedia(e).matches},st=(Ae=!(_e=function(){return at(navigator.userAgent,ut)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ae||(Ae=!0,Te=_e.apply(null,e)),Te}),ct=navigator.userAgent,k=st(),Ve=k.browser,Xe=k.os,e=k.deviceType,o=/WebKit/.test(ct)&&!Ve.isEdge(),n="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,k=-1!==ct.indexOf("Windows Phone"),lt={opera:Ve.isOpera(),webkit:o,ie:!(!Ve.isIE()&&!Ve.isEdge())&&Ve.version.major,gecko:Ve.isFirefox(),mac:Xe.isOSX()||Xe.isiOS(),iOS:e.isiPad()||e.isiPhone(),android:Xe.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:Ve.isIE()?document.documentMode||7:10,fileApi:n,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!Ve.isIE(),desktop:e.isDesktop(),windowsPhone:k,browser:{current:Ve.current,version:Ve.version,isChrome:Ve.isChrome,isEdge:Ve.isEdge,isFirefox:Ve.isFirefox,isIE:Ve.isIE,isOpera:Ve.isOpera,isSafari:Ve.isSafari},os:{current:Xe.current,version:Xe.version,isAndroid:Xe.isAndroid,isChromeOS:Xe.isChromeOS,isFreeBSD:Xe.isFreeBSD,isiOS:Xe.isiOS,isLinux:Xe.isLinux,isOSX:Xe.isOSX,isSolaris:Xe.isSolaris,isWindows:Xe.isWindows},deviceType:{isDesktop:e.isDesktop,isiPad:e.isiPad,isiPhone:e.isiPhone,isPhone:e.isPhone,isTablet:e.isTablet,isTouch:e.isTouch,isWebView:e.isWebView}},ft=/^\s*|\s*$/g,dt=function(e){return null===e||e===undefined?"":(""+e).replace(ft,"")},mt=function(e,t){return t?!("array"!==t||!ve(e))||typeof e===t:e!==undefined},gt=function(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),be(e,function(e,t){return!1!==n.call(o,e,t,r)&&void gt(e,n,r,o)}))},pt={trim:dt,isArray:ve,is:mt,toArray:function(e){if(ve(e))return e;for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},makeMap:function(e,t,n){var r;for(t=t||",",n=n||{},r=(e="string"==typeof(e=e||[])?e.split(t):e).length;r--;)n[e[r]]={};return n},each:be,map:ye,grep:Ce,inArray:we,hasOwn:pe,extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o,i,a=t[r];for(o in a)!pe(a,o)||(i=a[o])!==undefined&&(e[o]=i)}return e},create:function(e,t,n){var r,o,i,a=this,u=0,s=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],c=a.createNS(e[3].replace(/\.\w+$/,""),n);if(!c[s]){if("static"===e[2])return c[s]=t,void(this.onCreate&&this.onCreate(e[2],e[3],c[s]));t[s]||(t[s]=function(){},u=1),c[s]=t[s],a.extend(c[s].prototype,t),e[5]&&(r=a.resolve(e[5]).prototype,o=e[5].match(/\.(\w+)$/i)[1],i=c[s],c[s]=u?function(){return r[o].apply(this,arguments)}:function(){return this.parent=r[o],i.apply(this,arguments)},c[s].prototype[s]=c[s],a.each(r,function(e,t){c[s].prototype[t]=r[t]}),a.each(t,function(e,t){r[t]?c[s].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==s&&(c[s].prototype[t]=e)})),a.each(t["static"],function(e,t){c[s][t]=e})}},walk:gt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||mt(e,"array")?e:ye(e.split(t||","),dt)},_addCacheSuffix:function(e){var t=lt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},ht=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:e}},vt={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ht(t.childNodes[0])},fromTag:function(e,t){e=(t||document).createElement(e);return ht(e)},fromText:function(e,t){e=(t||document).createTextNode(e);return ht(e)},fromDom:ht,fromPoint:function(e,t,n){return A.from(e.dom.elementFromPoint(t,n)).map(ht)}},bt=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},yt=function(e,t){e=e.dom;if(1!==e.nodeType)return!1;if(e.matches!==undefined)return e.matches(t);if(e.msMatchesSelector!==undefined)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==undefined)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==undefined)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ct=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},wt=function(e,t){return e.dom===t.dom},xt=function(e,t){return n=e.dom,e=t.dom,t=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(e)&t);var n},St=function(e,t){return(st().browser.isIE()?xt:function(e,t){e=e.dom,t=t.dom;return e!==t&&e.contains(t)})(e,t)},Nt=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),Et=function(e){return e.dom.nodeType},ct=function(t){return function(e){return Et(e)===t}},kt=ct(1),_t=ct(3),Tt=ct(9),At=ct(11),Rt=function(e){return vt.fromDom(e.dom.ownerDocument)},Dt=function(e){return Tt(e)?e:Rt(e)},Ot=function(e){return vt.fromDom(Dt(e).dom.defaultView)},Bt=function(e){return A.from(e.dom.parentNode).map(vt.fromDom)},Pt=function(e){return A.from(e.dom.previousSibling).map(vt.fromDom)},Lt=function(e){return A.from(e.dom.nextSibling).map(vt.fromDom)},It=function(e){return J(bt(e,Pt))},Mt=function(e){return bt(e,Lt)},Ft=function(e){return I(e.dom.childNodes,vt.fromDom)},Ut=function(e,t){e=e.dom.childNodes;return A.from(e[t]).map(vt.fromDom)},zt=function(e){return Ut(e,0)},jt=function(e){return Ut(e,e.dom.childNodes.length-1)},Ht=function(e){return At(e)&&V(e.dom.host)},o=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),Vt=X(o),qt=o?function(e){return vt.fromDom(e.dom.getRootNode())}:Dt,$t=function(e){return Ht(e)?e:function(e){e=e.dom.head;if(null===e||e===undefined)throw new Error("Head is not available yet");return vt.fromDom(e)}(Dt(e))},Wt=function(e){return vt.fromDom(e.dom.host)},Kt=function(e){return V(e.dom.shadowRoot)},Xt=function(t,n){Bt(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},Yt=function(e,t){Lt(e).fold(function(){Bt(e).each(function(e){Jt(e,t)})},function(e){Xt(e,t)})},Gt=function(t,n){zt(t).fold(function(){Jt(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})},Jt=function(e,t){e.dom.appendChild(t.dom)},Qt=function(t,e){Y(e,function(e){Jt(t,e)})},Zt=function(e){e.dom.textContent="",Y(Ft(e),function(e){en(e)})},en=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},tn=function(e){var t,n=Ft(e);0<n.length&&(t=e,Y(n,function(e){Xt(t,e)})),en(e)},nn=function(e){var t=_t(e)?e.dom.parentNode:e.dom;if(t===undefined||null===t||null===t.ownerDocument)return!1;var n,r,o=t.ownerDocument;return function(e){e=qt(e);return Ht(e)?A.some(e):A.none()}(vt.fromDom(t)).fold(function(){return o.body.contains(t)},(n=nn,r=Wt,function(e){return n(r(e))}))},rn=function(n,r){return{left:n,top:r,translate:function(e,t){return rn(n+e,r+t)}}},on=rn,an=function(e,t){return e!==undefined?e:t!==undefined?t:0},un=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?on(n.offsetLeft,n.offsetTop):nn(e)?function(e){e=e.getBoundingClientRect();return on(e.left,e.top)}(t):on(0,0)},sn=function(e){var t=e!==undefined?e.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,t=t.body.scrollTop||t.documentElement.scrollTop;return on(e,t)},cn=function(e,t,n){n=(n!==undefined?n.dom:document).defaultView;n&&n.scrollTo(e,t)},ln=function(e,t){st().browser.isSafari()&&m(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},fn=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},dn=function(e){var n=e===undefined?window:e,e=n.document,r=sn(vt.fromDom(e));return function(e){e=e===undefined?window:e;return A.from(e.visualViewport)}(n).fold(function(){var e=n.document.documentElement,t=e.clientWidth,e=e.clientHeight;return fn(r.left,r.top,t,e)},function(e){return fn(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})},n=function(t){return function(e){return!!e&&e.nodeType===t}},mn=function(e){return!!e&&!Object.getPrototypeOf(e)},gn=n(1),pn=function(e){var t=e.map(function(e){return e.toLowerCase()});return function(e){if(e&&e.nodeName){e=e.nodeName.toLowerCase();return P(t,e)}return!1}},k=function(r,e){var o=e.toLowerCase().split(" ");return function(e){var t;if(gn(e))for(t=0;t<o.length;t++){var n=e.ownerDocument.defaultView.getComputedStyle(e,null);if((n?n.getPropertyValue(r):null)===o[t])return!0}return!1}},Ve=function(t){return function(e){return gn(e)&&e.hasAttribute(t)}},hn=function(e){return gn(e)&&e.hasAttribute("data-mce-bogus")},vn=function(e){return gn(e)&&"TABLE"===e.tagName},Xe=function(t){return function(e){if(gn(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},bn=pn(["textarea","input"]),yn=n(3),Cn=n(8),wn=n(9),xn=n(11),Sn=pn(["br"]),Nn=pn(["img"]),En=Xe("true"),kn=Xe("false"),e=pn(["td","th"]),_n=pn(["video","audio","object","embed"]),Tn=function(e,t,n){return void 0===n&&(n=p),e.exists(function(e){return n(e,t)})},An=function(e,t,n){return e.isSome()&&t.isSome()?A.some(n(e.getOrDie(),t.getOrDie())):A.none()},Rn=function(e){return e.style!==undefined&&m(e.style.getPropertyValue)},Dn=function(e,t,n){if(!(W(n)||f(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},On=function(e,t,n){Dn(e.dom,t,n)},Bn=function(e,t){var n=e.dom;ae(t,function(e,t){Dn(n,t,e)})},Pn=function(e,t){t=e.dom.getAttribute(t);return null===t?undefined:t},Ln=function(e,t){return A.from(Pn(e,t))},In=function(e,t){e.dom.removeAttribute(t)},Mn=function(e,t){var n=e.dom;ae(t,function(e,t){!function(e,t,n){if(!W(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Rn(e)&&e.style.setProperty(t,n)}(n,t,e)})},Fn=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||nn(e)?r:Un(n,t)},Un=function(e,t){return Rn(e)?e.style.getPropertyValue(t):""},zn=function(e,t){e=e.dom,t=Un(e,t);return A.from(t).filter(function(e){return 0<e.length})},jn=function(e){var t={},n=e.dom;if(Rn(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},Hn=st().browser,Vn=function(e){return H(e,kt)},qn=function(e,t){return e.children&&P(e.children,t)},$n=function(e,t,n){var r,o,i=0,a=0,u=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Fn(vt.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,y:a=o.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType&&!qn(r,n);)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType&&!qn(r,n);)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=(t=vt.fromDom(t),Hn.isFirefox()&&"table"===Nt(t)?Vn(Ft(t)).filter(function(e){return"caption"===Nt(e)}).bind(function(r){return Vn(Mt(r)).map(function(e){var t=e.dom.offsetTop,n=r.dom.offsetTop,e=r.dom.offsetHeight;return t<=n?-e:0})}).getOr(0):0)}return{x:i,y:a}},ct={},o={exports:ct};Re=undefined,De=ct,Oe=o,Be=undefined,function(e){"object"==typeof De&&void 0!==Oe?Oe.exports=e():"function"==typeof Re&&Re.amd?Re([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}(function(){return function s(r,o,i){function a(t,e){if(!o[t]){if(!r[t]){var n="function"==typeof Be&&Be;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},r[t][0].call(n.exports,function(e){return a(r[t][1][e]||e)},n,n.exports,s,r,o,i)}return o[t].exports}for(var u="function"==typeof Be&&Be,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,t,n){var r,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&m())}function m(){if(!l){var e=u(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||l||u(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],2:[function(e,f,t){!function(t){function r(){}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],l(e,this)}function o(r,o){for(;3===r._state;)r=r._value;0!==r._state?(r._handled=!0,a._immediateFn(function(){var e,t=1===r._state?o.onFulfilled:o.onRejected;if(null!==t){try{e=t(r._value)}catch(n){return void u(o.promise,n)}i(o.promise,e)}else(1===r._state?i:u)(o.promise,r._value)})):r._deferreds.push(o)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void l((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,s(e)}catch(i){u(e,i)}var r,o}function u(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,u(t,e))})}catch(r){if(n)return;n=!0,u(t,r)}}var e,n;e=this,n=setTimeout,a.prototype["catch"]=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new c(e,t,n)),n},a.all=function(e){var s=Array.prototype.slice.call(e);return new a(function(o,i){if(0===s.length)return o([]);var a=s.length;function u(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){u(t,e)},i)}s[t]=e,0==--a&&o(s)}catch(r){i(r)}}for(var e=0;e<s.length;e++)u(e,s[e])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(n){return new a(function(e,t){t(n)})},a.race=function(o){return new a(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},a._immediateFn="function"==typeof t?function(e){t(e)}:function(e){n(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},void 0!==f&&f.exports?f.exports=a:e.Promise||(e.Promise=a)}.call(this,e("timers").setImmediate)},{timers:3}],3:[function(s,e,c){!function(e,t){var r=s("process/browser.js").nextTick,n=Function.prototype.apply,o=Array.prototype.slice,i={},a=0;function u(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new u(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new u(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&o.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof t?t:function(e){delete i[e]}}.call(this,s("timers").setImmediate,s("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),e="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:e.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)});var Wn=o.exports.boltExport,Kn=function(e){var n=A.none(),t=[],r=function(e){o()?a(e):t.push(e)},o=function(){return n.isSome()},i=function(e){Y(e,a)},a=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){o()||(n=A.some(e),i(t),t=[])}),{get:r,map:function(n){return Kn(function(t){r(function(e){t(n(e))})})},isReady:o}},Xn={nu:Kn,pure:function(t){return Kn(function(e){e(t)})}},Yn=function(e){setTimeout(function(){throw e},0)},Gn=function(n){var e=function(e){n().then(e,Yn)};return{map:function(e){return Gn(function(){return n().then(e)})},bind:function(t){return Gn(function(){return n().then(function(e){return t(e).toPromise()})})},anonBind:function(e){return Gn(function(){return n().then(function(){return e.toPromise()})})},toLazy:function(){return Xn.nu(e)},toCached:function(){var e=null;return Gn(function(){return e=null===e?n():e})},toPromise:n,get:e}},Jn=function(e){return Gn(function(){return new Wn(e)})},Qn=function(a,e){return e(function(r){var o=[],i=0;0===a.length?r([]):Y(a,function(e,t){var n;e.get((n=t,function(e){o[n]=e,++i>=a.length&&r(o)}))})})},Zn=function(n){return{is:function(e){return n===e},isValue:E,isError:N,getOr:X(n),getOrThunk:X(n),getOrDie:X(n),or:function(e){return Zn(n)},orThunk:function(e){return Zn(n)},fold:function(e,t){return t(n)},map:function(e){return Zn(e(n))},mapError:function(e){return Zn(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return A.some(n)}}},er=function(n){return{is:N,isValue:N,isError:E,getOr:g,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:g,orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return er(n)},mapError:function(e){return er(e(n))},each:ee,bind:function(e){return er(n)},exists:N,forall:E,toOptional:A.none}},tr={value:Zn,error:er,fromOption:function(e,t){return e.fold(function(){return er(t)},Zn)}},n=function(a){if(!y(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return Y(a,function(e,r){var t=oe(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(n[o]!==undefined)throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!y(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=oe(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!G(u,function(e){return P(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,n)},log:function(e){console.log(e,{constructors:u,constructor:o,params:n})}}}}),n},nr=(n([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){return e.fold(g,g)});function rr(e,t,n,r,o){return e(n,r)?A.some(n):m(o)&&o(n)?A.none():t(n,r,o)}var or,ir,ar,ur,sr,cr,lr=function(e,t,n){for(var r=e.dom,o=m(n)?n:N;r.parentNode;){var r=r.parentNode,i=vt.fromDom(r);if(t(i))return A.some(i);if(o(i))break}return A.none()},fr=function(e,t,n){return rr(function(e,t){return t(e)},lr,e,t,n)},dr=function(e,t){return H(e.dom.childNodes,function(e){return t(vt.fromDom(e))}).map(vt.fromDom)},mr=function(e,t,n){return lr(e,function(e){return yt(e,t)},n)},gr=function(e,t){return function(e,t){t=t===undefined?document:t.dom;return Ct(t)?A.none():A.from(t.querySelector(e)).map(vt.fromDom)}(t,e)},pr=function(e,t,n){return rr(yt,mr,e,t,n)},hr=window.Promise||(or=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(r,e)}},ir=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ur=(ar=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],sr(e,or(br,this),or(yr,this))}).immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){return setTimeout(e,1)},sr=function(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(o){if(r)return;r=!0,n(o)}},ar.prototype["catch"]=function(e){return this.then(null,e)},ar.prototype.then=function(n,r){var o=this;return new ar(function(e,t){vr.call(o,new wr(n,r,e,t))})},ar.all=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=Array.prototype.slice.call(1===e.length&&ir(e[0])?e[0]:e);return new ar(function(o,i){if(0===s.length)return o([]);for(var a=s.length,u=function(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){u(t,e)},i)}s[t]=e,0==--a&&o(s)}catch(r){i(r)}},e=0;e<s.length;e++)u(e,s[e])})},ar.resolve=function(t){return t&&"object"==typeof t&&t.constructor===ar?t:new ar(function(e){e(t)})},ar.reject=function(n){return new ar(function(e,t){t(n)})},ar.race=function(o){return new ar(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},ar);function vr(r){var o=this;null!==this._state?ur(function(){var e,t=o._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(o._value)}catch(n){return void r.reject(n)}r.resolve(e)}else(o._state?r.resolve:r.reject)(o._value)}):this._deferreds.push(r)}function br(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void sr(or(t,e),or(br,this),or(yr,this))}this._state=!0,this._value=e,Cr.call(this)}catch(n){yr.call(this,n)}}function yr(e){this._state=!1,this._value=e,Cr.call(this)}function Cr(){for(var e=0,t=this._deferreds.length;e<t;e++)vr.call(this,this._deferreds[e]);this._deferreds=null}function wr(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}var xr,Sr=function(e,t){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=window[r[o]+"RequestAnimationFrame"];(n=n||function(e){window.setTimeout(e,0)})(e,t)},Nr=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Er=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},Xe=function(n,r){var o,e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(o),o=Nr(function(){n.apply(this,e)},r)};return e.stop=function(){clearTimeout(o)},e},kr={requestAnimationFrame:function(e,t){cr?cr.then(e):cr=new hr(function(e){t=t||document.body,Sr(e,t)}).then(e)},setTimeout:Nr,setInterval:Er,setEditorTimeout:function(e,t,n){return Nr(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r=Er(function(){e.removed?clearInterval(r):t()},n);return r},debounce:Xe,throttle:Xe,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},_r=function(l,f){void 0===f&&(f={});var d=0,m={},g=vt.fromDom(l),p=Dt(g),h=f.maxLoadTime||5e3,n=function(e,t,n){var r,e=pt._addCacheSuffix(e),o=ge(m,e).getOrThunk(function(){return{id:"mce-u"+d++,passed:[],failed:[],count:0}});(m[e]=o).count++;var i,a=function(e,t){for(var n=e.length;n--;)e[n]();o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)},u=function(){return a(o.passed,2)},s=function(){return a(o.failed,3)},c=function(){var e;e=c,function(){for(var e=l.styleSheets,t=e.length;t--;){var n=e[t].ownerNode;if(n&&n.id===r.id)return u(),1}}()||(Date.now()-i<h?kr.setTimeout(e):s())};t&&o.passed.push(t),n&&o.failed.push(n),1!==o.status&&(2!==o.status?3!==o.status?(o.status=1,t=vt.fromTag("link",p.dom),Bn(t,{rel:"stylesheet",type:"text/css",id:o.id}),i=Date.now(),f.contentCssCors&&On(t,"crossOrigin","anonymous"),f.referrerPolicy&&On(t,"referrerpolicy",f.referrerPolicy),(r=t.dom).onload=c,r.onerror=s,n=t,Jt($t(g),n),On(t,"href",e)):s():u())},r=function(t){return Jn(function(e){n(t,v(e,X(tr.value(t))),v(e,X(tr.error(t))))})},t=function(e){var n=pt._addCacheSuffix(e);ge(m,n).each(function(e){var t;0==--e.count&&(delete m[n],t=e.id,e=$t(g),gr(e,"#"+t).each(en))})};return{load:n,loadAll:function(e,t,n){e=I(e,r),Qn(e,Jn).get(function(e){e=F(e,function(e){return e.isValue()});0<e.fail.length?n(e.fail.map(nr)):t(e.pass.map(nr))})},unload:t,unloadAll:function(e){Y(e,function(e){t(e)})},_setReferrerPolicy:function(e){f.referrerPolicy=e}}},Tr=(xr=new WeakMap,{forElement:function(e,t){var n=qt(e).dom;return A.from(xr.get(n)).getOrThunk(function(){var e=_r(n,t);return xr.set(n,e),e})}}),Ar=(Rr.prototype.current=function(){return this.node},Rr.prototype.next=function(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node},Rr.prototype.prev=function(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node},Rr.prototype.prev2=function(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node},Rr.prototype.findSibling=function(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(o=e[n])return o;for(i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(o=i[n])return o}}},Rr.prototype.findPreviousNode=function(e,t,n,r){var o,i;if(e&&(o=e[n],!this.rootNode||o!==this.rootNode)){if(o){if(!r)for(i=o[t];i;i=i[t])if(!i[t])return i;return o}return(e=e.parentNode)&&e!==this.rootNode?e:void 0}},Rr);function Rr(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}var Dr,Or,ct=function(t){var n;return function(e){return n=n||function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}(t,E),pe(n,Nt(e))}},Br=ct(["h1","h2","h3","h4","h5","h6"]),Pr=ct(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Lr=function(e){return kt(e)&&!Pr(e)},Ir=function(e){return kt(e)&&"br"===Nt(e)},Mr=ct(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Fr=ct(["ul","ol","dl"]),Ur=ct(["li","dd","dt"]),zr=ct(["thead","tbody","tfoot"]),jr=ct(["td","th"]),Hr=ct(["pre","script","textarea","style"]),Vr="\ufeff",qr="\xa0",$r=Vr,Wr=function(e){return e===Vr},Kr=function(e){return e.replace(/\uFEFF/g,"")},Xr=gn,Yr=yn,Gr=function(e){return Yr(e)&&(e=e.parentNode),Xr(e)&&e.hasAttribute("data-mce-caret")},Jr=function(e){return Yr(e)&&Wr(e.data)},Qr=function(e){return Gr(e)||Jr(e)},Zr=function(e){return e.firstChild!==e.lastChild||!Sn(e.firstChild)},eo=function(e){var t=e.container();return!!yn(t)&&(t.data.charAt(e.offset())===$r||e.isAtStart()&&Jr(t.previousSibling))},to=function(e){var t=e.container();return!!yn(t)&&(t.data.charAt(e.offset()-1)===$r||e.isAtEnd()&&Jr(t.nextSibling))},no=function(e,t,n){var r=t.ownerDocument.createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((e=document.createElement("br")).setAttribute("data-mce-bogus","1"),e));e=t.parentNode;return n?e.insertBefore(r,t):t.nextSibling?e.insertBefore(r,t.nextSibling):e.appendChild(r),r},ro=function(e){return Yr(e)&&e.data[0]===$r},oo=function(e){return Yr(e)&&e.data[e.data.length-1]===$r},io=function(e){return e&&e.hasAttribute("data-mce-caret")?(function(e){e=e.getElementsByTagName("br"),e=e[e.length-1];hn(e)&&e.parentNode.removeChild(e)}(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},ao=En,uo=kn,so=Sn,co=yn,lo=pn(["script","style","textarea"]),fo=pn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),mo=pn(["table"]),go=Qr,po=function(e){return!go(e)&&(co(e)?!lo(e.parentNode):fo(e)||so(e)||mo(e)||ho(e))},ho=function(e){return!1===(gn(t=e)&&"true"===t.getAttribute("unselectable"))&&uo(e);var t},vo=function(e,t){return po(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(ho(e))return!1;if(ao(e))return!0}return!0}(e,t)},bo=/^[ \t\r\n]*$/,yo=function(e){return bo.test(e)},Co=function(e,t){var n=vt.fromDom(t),t=vt.fromDom(e);return e=t,t="pre,code",n=h(wt,n),mr(e,t,n).isSome()},wo=function(e,t){return po(e)&&!1===(n=t,yn(t=e)&&yo(t.data)&&!1===Co(t,n))||gn(n=e)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id"))||xo(e);var n},xo=Ve("data-mce-bookmark"),So=Ve("data-mce-bogus"),No=(Dr="data-mce-bogus",Or="all",function(e){return gn(e)&&e.getAttribute(Dr)===Or}),Eo=function(e,t){return function(e,t){var n,r=0;if(wo(e,e))return!1;if(!(n=e.firstChild))return!0;var o=new Ar(n,e);do{if(t){if(No(n)){n=o.next(!0);continue}if(So(n)){n=o.next();continue}}if(Sn(n))r++,n=o.next();else{if(wo(n,e))return!1;n=o.next()}}while(n);return r<=1}(e.dom,t=void 0===t?!0:t)},ko=function(e,t){return V(e)&&(wo(e,t)||Lr(vt.fromDom(e)))},_o=function(e){return"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type")},To=function(e,t){return yn(e)&&0<e.data.length&&(t=new Ar(n=e,e=t).prev(!1),n=new Ar(n,e).next(!1),t=d(t)||ko(t,e),e=d(n)||ko(n,e),t&&e);var n},Ao=function(e,t,n){var r=n||t;if(gn(t)&&_o(t))return t;for(var o,i=t.childNodes,a=i.length-1;0<=a;a--)Ao(e,i[a],r);return!gn(t)||1===(o=t.childNodes).length&&_o(o[0])&&t.parentNode.insertBefore(o[0],t),xn(o=t)||wn(o)||wo(t,r)||gn(o=t)&&0<o.childNodes.length||To(t,r)||e.remove(t),t},Ro=pt.makeMap,Do=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bo=/[<>&\"\']/g,Po=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Lo={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Io={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Mo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Fo=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Io[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}},Uo=Fo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),zo=function(e,t){return e.replace(t?Do:Oo,function(e){return Io[e]||e})},jo=function(e,t){return e.replace(t?Do:Oo,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Io[e]||"&#"+e.charCodeAt(0)+";"})},Ho=function(e,t,n){return n=n||Uo,e.replace(t?Do:Oo,function(e){return Io[e]||n[e]||e})},Vo={encodeRaw:zo,encodeAllRaw:function(e){return(""+e).replace(Bo,function(e){return Io[e]||e})},encodeNumeric:jo,encodeNamed:Ho,getEncodeFunc:function(e,t){var n=Fo(t)||Uo,e=Ro(e.replace(/\+/g,","));return e.named&&e.numeric?function(e,t){return e.replace(t?Do:Oo,function(e){return Io[e]!==undefined?Io[e]:n[e]!==undefined?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:e.named?t?function(e,t){return Ho(e,t,n)}:Ho:e.numeric?jo:zo},decode:function(e){return e.replace(Po,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Lo[t]||String.fromCharCode(t):Mo[e]||Uo[e]||(t=e,(e=vt.fromTag("div").dom).innerHTML=t,e.textContent||e.innerText||t)})}},qo={},$o={},Wo=pt.makeMap,Ko=pt.each,Xo=pt.extend,Yo=pt.explode,Go=pt.inArray,Jo=function(e,t){return(e=pt.trim(e))?e.split(t||" "):[]},Qo=function(e,n){var r;return e&&(r={},Ko(e="string"==typeof e?{"*":e}:e,function(e,t){r[t]=r[t.toUpperCase()]=("map"===n?Wo:Yo)(e,/[, ]/)})),r},Zo=function(o){var u,t,n,s,r,S={},i={},N=[],a={},c={},e=function(e,t,n){var r=o[e];return r?r=Wo(r,/[, ]/,Wo(r.toUpperCase(),/[, ]/)):(r=qo[e])||(r=Wo(t," ",Wo(t.toUpperCase()," ")),r=Xo(r,n),qo[e]=r),r},l=(O=(o=o||{}).schema,s={},r=function(e,t,n){var r,o=function(e,t){for(var n={},r=0,o=e.length;r<o;r++)n[e[r]]=t||{};return n};t=t||"","string"==typeof(n=n||[])&&(n=Jo(n));for(var i=Jo(e),a=i.length;a--;)r={attributes:o(r=Jo([u,t].join(" "))),attributesOrder:r,children:o(n,$o)},s[i[a]]=r},R=function(e,t){for(var n,r,o,i=Jo(e),a=i.length,u=Jo(t);a--;)for(n=s[i[a]],r=0,o=u.length;r<o;r++)n.attributes[u[r]]={},n.attributesOrder.push(u[r])},qo[O]||(u="id accesskey class dir lang style tabindex title role",A="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",t="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==O&&(u+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",A+=" article aside details dialog figure main header footer hgroup section nav",t+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==O&&(u+=" xml:lang",t=[t,T="acronym applet basefont big font strike tt"].join(" "),Ko(Jo(T),function(e){r(e,"",t)}),A=[A,T="center dir isindex noframes"].join(" "),n=[A,t].join(" "),Ko(Jo(T),function(e){r(e,"",n)})),n=n||[A,t].join(" "),r("html","manifest","head body"),r("head","","base command link meta noscript script style title"),r("title hr noscript br"),r("base","href target"),r("link","href rel media hreflang type sizes hreflang"),r("meta","name http-equiv content charset"),r("style","media type scoped"),r("script","src async defer type charset"),r("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",n),r("address dt dd div caption","",n),r("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),r("blockquote","cite",n),r("ol","reversed start type","li"),r("ul","","li"),r("li","value",n),r("dl","","dt dd"),r("a","href target rel media hreflang type",t),r("q","cite",t),r("ins del","cite datetime",n),r("img","src sizes srcset alt usemap ismap width height"),r("iframe","src name width height",n),r("embed","src type width height"),r("object","data type typemustmatch name usemap form width height",[n,"param"].join(" ")),r("param","name value"),r("map","name",[n,"area"].join(" ")),r("area","alt coords shape href target rel media hreflang type"),r("table","border","caption colgroup thead tfoot tbody tr"+("html4"===O?" col":"")),r("colgroup","span","col"),r("col","span"),r("tbody thead tfoot","","tr"),r("tr","","td th"),r("td","colspan rowspan headers",n),r("th","colspan rowspan headers scope abbr",n),r("form","accept-charset action autocomplete enctype method name novalidate target",n),r("fieldset","disabled form name",[n,"legend"].join(" ")),r("label","form for",t),r("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),r("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===O?n:t),r("select","disabled form multiple name required size","option optgroup"),r("optgroup","disabled label","option"),r("option","disabled label selected value"),r("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),r("menu","type label",[n,"li"].join(" ")),r("noscript","",n),"html4"!==O&&(r("wbr"),r("ruby","",[t,"rt rp"].join(" ")),r("figcaption","",n),r("mark rt rp summary bdi","",t),r("canvas","width height",n),r("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[n,"track source"].join(" ")),r("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[n,"track source"].join(" ")),r("picture","","img source"),r("source","src srcset type media sizes"),r("track","kind src srclang label default"),r("datalist","",[t,"option"].join(" ")),r("article section nav aside main header footer","",n),r("hgroup","","h1 h2 h3 h4 h5 h6"),r("figure","",[n,"figcaption"].join(" ")),r("time","datetime",t),r("dialog","open",n),r("command","type label icon disabled checked radiogroup command"),r("output","for form name",t),r("progress","value max",t),r("meter","value min max low high optimum",t),r("details","open",[n,"summary"].join(" ")),r("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==O&&(R("script","language xml:space"),R("style","xml:space"),R("object","declare classid code codebase codetype archive standby align border hspace vspace"),R("embed","align name hspace vspace"),R("param","valuetype type"),R("a","charset name rev shape coords"),R("br","clear"),R("applet","codebase archive code object alt name width height align hspace vspace"),R("img","name longdesc align border hspace vspace"),R("iframe","longdesc frameborder marginwidth marginheight scrolling align"),R("font basefont","size color face"),R("input","usemap align"),R("select"),R("textarea"),R("h1 h2 h3 h4 h5 h6 div p legend caption","align"),R("ul","type compact"),R("li","type"),R("ol dl menu dir","compact"),R("pre","width xml:space"),R("hr","align noshade size width"),R("isindex","prompt"),R("table","summary width frame rules cellspacing cellpadding align bgcolor"),R("col","width align char charoff valign"),R("colgroup","width align char charoff valign"),R("thead","align char charoff valign"),R("tr","align char charoff valign bgcolor"),R("th","axis align char charoff valign nowrap bgcolor width height"),R("form","accept"),R("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),R("tfoot","align char charoff valign"),R("tbody","align char charoff valign"),R("area","nohref"),R("body","background bgcolor text link vlink alink")),"html4"!==O&&(R("input button select textarea","autofocus"),R("input textarea","placeholder"),R("a","download"),R("link script img","crossorigin"),R("img","loading"),R("iframe","sandbox seamless allowfullscreen loading")),Ko(Jo("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,qo[O]=s));!1===o.verify_html&&(o.valid_elements="*[*]");var f=Qo(o.valid_styles),d=Qo(o.invalid_styles,"map"),m=Qo(o.valid_classes,"map"),g=e("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=e("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),b="td th iframe video audio object script code",y=e("non_empty_elements",b+" pre",h),C=e("move_caret_before_on_enter_elements",b+" table",h),w=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),E=e("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");Ko((o.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(e){c[e]=new RegExp("</"+e+"[^>]*>","gi")});var k=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},_=function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,p,h,v,b,y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,C=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,w=/[*?+]/;if(e){var x=Jo(e,",");for(S["@"]&&(h=S["@"].attributes,v=S["@"].attributesOrder),t=0,n=x.length;t<n;t++)if(i=y.exec(x[t])){if(g=i[1],c=i[2],p=i[3],s=i[5],a={attributes:d={},attributesOrder:m=[]},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),h&&(ae(h,function(e,t){d[t]=e}),m.push.apply(m,v)),s)for(r=0,o=(s=Jo(s,"|")).length;r<o;r++)(i=C.exec(s[r]))&&(u={},f=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],b=i[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(l),u.required=!0),"-"!==f?(g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:l,value:b}),u.defaultValue=b),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:l,value:b}),u.forcedValue=b),"<"===g&&(u.validValues=Wo(b,"?"))),w.test(l)?(a.attributePatterns=a.attributePatterns||[],u.pattern=k(l),a.attributePatterns.push(u)):(d[l]||m.push(l),d[l]=u)):(delete d[l],m.splice(Go(m,l),1)));h||"@"!==c||(h=d,v=m),p&&(a.outputName=c,S[p]=a),w.test(c)?(a.pattern=k(c),N.push(a)):S[c]=a}}},T=function(e){S={},N=[],_(e),Ko(l,function(e,t){i[t]=e.children})},A=function(e){var o=/^(~)?(.+)$/;e&&(qo.text_block_elements=qo.block_elements=null,Ko(Jo(e,","),function(e){var t=o.exec(e),e="~"===t[1],n=e?"span":"div",r=t[2];i[r]=i[n],a[r]=n,e||(x[r.toUpperCase()]={},x[r]={}),S[r]||(e=S[n],delete(e=Xo({},e)).removeEmptyAttrs,delete e.removeEmpty,S[r]=e),Ko(i,function(e,t){e[n]&&(i[t]=e=Xo({},i[t]),e[r]=e[n])})}))},R=function(e){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;qo[o.schema]=null,e&&Ko(Jo(e,","),function(e){var t,n,e=r.exec(e);e&&(n=e[1],t=n?i[e[2]]:i[e[2]]={"#comment":{}},t=i[e[2]],Ko(Jo(e[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},D=function(e){var t,n=S[e];if(n)return n;for(t=N.length;t--;)if((n=N[t]).pattern.test(e))return n};o.valid_elements?T(o.valid_elements):(Ko(l,function(e,t){S[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},i[t]=e.children}),"html5"!==o.schema&&Ko(Jo("strong/b em/i"),function(e){e=Jo(e,"/");S[e[1]].outputName=e[0]}),Ko(Jo("ol ul sub sup blockquote span font a table tbody strong em b i"),function(e){S[e]&&(S[e].removeEmpty=!0)}),Ko(Jo("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){S[e].paddEmpty=!0}),Ko(Jo("span"),function(e){S[e].removeEmptyAttrs=!0})),A(o.custom_elements),R(o.valid_children),_(o.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),Ko({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){S[t]&&(S[t].parentsRequired=Jo(e))}),o.invalid_elements&&Ko(Yo(o.invalid_elements),function(e){S[e]&&delete S[e]}),D("span")||_("span[!data-mce-type|*]");var O=X(f),b=X(d),e=X(m),f=X(v),d=X(x),m=X(w),v=X(E),w=X(h),E=X(p),h=X(y),p=X(C),y=X(g),C=X(c),g=X(a);return{children:i,elements:S,getValidStyles:O,getValidClasses:e,getBlockElements:d,getInvalidStyles:b,getShortEndedElements:w,getTextBlockElements:m,getTextInlineElements:v,getBoolAttrs:f,getElementRule:D,getSelfClosingElements:E,getNonEmptyElements:h,getMoveCaretBeforeOnEnterElements:p,getWhiteSpaceElements:y,getSpecialElements:C,isValidChild:function(e,t){e=i[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:function(e,t){var n,r,o=D(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:g,addValidElements:_,setValidElements:T,addCustomElements:A,addValidChildren:R}},ei=function(e,t,n,r){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(r)},ti=function(b,e){var s,c,y=this,C=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,w=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,x=/\s*([^:]+):\s*([^;]+);?/g,S=/\s+$/,N={},E=Vr;b=b||{},e&&(s=e.getValidStyles(),c=e.getInvalidStyles());for(var t=("\\\" \\' \\; \\: ; : "+E).split(" "),k=0;k<t.length;k++)N[t[k]]=E+k,N[E+k]=t[k];return{toHex:function(e){return e.replace(C,ei)},parse:function(e){var t,n,r,o,i,a,u,s={},c=b.url_converter,l=b.url_converter_scope||y,f=function(e,t,n){var r=s[e+"-top"+t];if(r){var o=s[e+"-right"+t];if(o){var i=s[e+"-bottom"+t];if(i){var a=s[e+"-left"+t];if(a){var u=[r,o,i,a];for(k=u.length-1;k--&&u[k]===u[k+1];);-1<k&&n||(s[e+t]=-1===k?u[0]:u.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t])}}}}},d=function(e){var t,n=s[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return s[e]=n[0],!0}},m=function(e){return r=!0,N[e]},g=function(e,t){return r&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return N[e]})),e=!t?e.replace(/\\([\'\";:])/g,"$1"):e},p=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},h=function(e){return e.replace(/\\[0-9a-f]+/gi,p)},v=function(e,t,n,r,o,i){if(o=o||i)return"'"+(o=g(o)).replace(/\'/g,"\\'")+"'";if(t=g(t||n||r),!b.allow_script_urls){r=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(r))return"";if(!b.allow_svg_data_urls&&/^data:image\/svg/i.test(r))return""}return"url('"+(t=c?c.call(l,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,m).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,m)});n=x.exec(e);)x.lastIndex=n.index+n[0].length,t=n[1].replace(S,"").toLowerCase(),n=n[2].replace(S,""),t&&n&&(t=h(t),n=h(n),-1===t.indexOf(E)&&-1===t.indexOf('"')&&(b.allow_script_urls||"behavior"!==t&&!/expression\s*\(|\/\*|\*\//.test(n))&&("font-weight"===t&&"700"===n?n="bold":"color"!==t&&"background-color"!==t||(n=n.toLowerCase()),n=(n=n.replace(C,ei)).replace(w,v),s[t]=r?g(n,!0):n));f("border","",!0),f("border","-width"),f("border","-color"),f("border","-style"),f("padding",""),f("margin",""),o="border",a="border-style",u="border-color",d(i="border-width")&&d(a)&&d(u)&&(s[o]=s[i]+" "+s[a]+" "+s[u],delete s[i],delete s[a],delete s[u]),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}return s},serialize:function(i,a){var u="",e=function(e){var t,n=s[e];if(n)for(var r=0,o=n.length;r<o;r++)e=n[r],(t=i[e])&&(u+=(0<u.length?" ":"")+e+": "+t+";")};return a&&s?(e("*"),e(a)):ae(i,function(e,t){var n,r,o;!e||c&&(n=t,r=a,(o=c["*"])&&o[n]||(o=c[r])&&o[n])||(u+=(0<u.length?" ":"")+t+": "+e+";")}),u}}},ni={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ri=function(e){return e instanceof Event||m(e.initEvent)},oi=function(e,t,n,r){var o=function(e,t){var n,r=null!=t?t:{};for(n in e)pe(ni,n)||(r[n]=e[n]);return V(r.composedPath)&&(r.composedPath=function(){return e.composedPath()}),r}(t,r);return o.type=e,K(o.target)&&(o.target=null!==(e=o.srcElement)&&void 0!==e?e:n),(K((n=t).preventDefault)||ri(n))&&(o.preventDefault=function(){o.defaultPrevented=!0,o.isDefaultPrevented=E,m(t.preventDefault)?t.preventDefault():ri(t)&&(t.returnValue=!1)},o.stopPropagation=function(){o.cancelBubble=!0,o.isPropagationStopped=E,m(t.stopPropagation)?t.stopPropagation():ri(t)&&(t.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=E,o.stopPropagation()},(n=o).isDefaultPrevented!==E&&n.isDefaultPrevented!==N&&(o.isDefaultPrevented=!0===o.defaultPrevented?E:N,o.isPropagationStopped=!0===o.cancelBubble?E:N,o.isImmediatePropagationStopped=N)),o},ii=/^(?:mouse|contextmenu)|click/,ai=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},ui=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},si=function(e,t){var n,r,o=oi(e.type,e,document,t);return V(r=e)&&ii.test(r.type)&&d(e.pageX)&&!d(e.clientX)&&(t=(n=o.target.ownerDocument||document).documentElement,r=n.body,(n=o).pageX=e.clientX+(t&&t.scrollLeft||r&&r.scrollLeft||0)-(t&&t.clientLeft||r&&r.clientLeft||0),n.pageY=e.clientY+(t&&t.scrollTop||r&&r.scrollTop||0)-(t&&t.clientTop||r&&r.clientTop||0)),d(o.metaKey)&&(o.metaKey=!1),o},ci=function(e,t,n){var r,o=e.document,i={type:"ready"};n.domLoaded?t(i):(r=function(){ui(e,"DOMContentLoaded",r),ui(e,"load",r),n.domLoaded||(n.domLoaded=!0,t(i)),e=null},"complete"===o.readyState||"interactive"===o.readyState&&o.body?r():ai(e,"DOMContentLoaded",r),n.domLoaded||ai(e,"load",r))},li=(fi.prototype.bind=function(e,t,n,r){var o,i,a,u,s,c,l=this,f=window,d=function(e){l.executeHandlers(si(e||f.event),o)};if(e&&3!==e.nodeType&&8!==e.nodeType){e[l.expando]?o=e[l.expando]:(o=l.count++,e[l.expando]=o,l.events[o]={}),r=r||e;for(var m=t.split(" "),g=m.length;g--;)s=d,u=c=!1,"DOMContentLoaded"===(a=m[g])&&(a="ready"),l.domLoaded&&"ready"===a&&"complete"===e.readyState?n.call(r,si({type:a})):(l.hasMouseEnterLeave||(u=l.mouseEnterLeave[a])&&(s=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=si(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,l.executeHandlers(e,o))}),l.hasFocusIn||"focusin"!==a&&"focusout"!==a||(c=!0,u="focusin"===a?"focus":"blur",s=function(e){(e=si(e||f.event)).type="focus"===e.type?"focusin":"focusout",l.executeHandlers(e,o)}),(i=l.events[o][a])?"ready"===a&&l.domLoaded?n(si({type:a})):i.push({func:n,scope:r}):(l.events[o][a]=i=[{func:n,scope:r}],i.fakeName=u,i.capture=c,i.nativeHandler=s,"ready"===a?ci(e,s,l):ai(e,u||a,s,c)));return e=i=null,n}},fi.prototype.unbind=function(n,e,t){var r,o,i;if(!n||3===n.nodeType||8===n.nodeType)return this;var a=n[this.expando];if(a){if(i=this.events[a],e){for(var u,s,c,l,f=e.split(" "),d=f.length;d--;)if(l=i[o=f[d]]){if(t)for(r=l.length;r--;)l[r].func===t&&(u=l.nativeHandler,s=l.fakeName,c=l.capture,(l=l.slice(0,r).concat(l.slice(r+1))).nativeHandler=u,l.fakeName=s,l.capture=c,i[o]=l);t&&0!==l.length||(delete i[o],ui(n,l.fakeName||o,l.nativeHandler,l.capture))}}else ae(i,function(e,t){ui(n,e.fakeName||t,e.nativeHandler,e.capture)}),i={};for(o in i)if(pe(i,o))return this;delete this.events[a];try{delete n[this.expando]}catch(m){n[this.expando]=null}}return this},fi.prototype.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return this;for(var o=si({type:t,target:e},n);(r=e[this.expando])&&this.executeHandlers(o,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!o.isPropagationStopped(););return this},fi.prototype.clean=function(e){var t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),(e=!e.getElementsByTagName?e.document:e)&&e.getElementsByTagName)for(this.unbind(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this},fi.prototype.destroy=function(){this.events={}},fi.prototype.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1},fi.prototype.executeHandlers=function(e,t){var t=this.events[t],n=t&&t[e.type];if(n)for(var r=0,o=n.length;r<o;r++){var i=n[r];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}},fi.Event=new fi,fi);function fi(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}var di,mi,gi,pi,hi,vi,bi,yi,Ci,wi,xi,Si,Ni,Ei,ki,_i,Ti,Ai="sizzle"+-new Date,Ri=window.document,Di=0,Oi=0,Bi=ua(),Pi=ua(),Li=ua(),Ii=function(e,t){return e===t&&(wi=!0),0},Mi=typeof undefined,Fi={}.hasOwnProperty,o=[],Ui=o.pop,zi=o.push,ji=o.push,Hi=o.slice,Vi=o.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},qi="[\\x20\\t\\r\\n\\f]",Xe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ct="\\["+qi+"*("+Xe+")(?:"+qi+"*([*^$|!~]?=)"+qi+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Xe+"))|)"+qi+"*\\]",Ve=":("+Xe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ct+")*)|.*)\\)|)",$i=new RegExp("^"+qi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+qi+"+$","g"),Wi=new RegExp("^"+qi+"*,"+qi+"*"),Ki=new RegExp("^"+qi+"*([>+~]|"+qi+")"+qi+"*"),Xi=new RegExp("="+qi+"*([^\\]'\"]*?)"+qi+"*\\]","g"),Yi=new RegExp(Ve),Gi=new RegExp("^"+Xe+"$"),Ji={ID:new RegExp("^#("+Xe+")"),CLASS:new RegExp("^\\.("+Xe+")"),TAG:new RegExp("^("+Xe+"|[*])"),ATTR:new RegExp("^"+ct),PSEUDO:new RegExp("^"+Ve),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+qi+"*(even|odd|(([+-]|)(\\d*)n|)"+qi+"*(?:([+-]|)"+qi+"*(\\d+)|))"+qi+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+qi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+qi+"*((?:-\\d)?\\d*)"+qi+"*\\)|)(?=[^-]|$)","i")},Qi=/^(?:input|select|textarea|button)$/i,Zi=/^h\d$/i,ea=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,na=/[+~]/,ra=/'|\\/g,oa=new RegExp("\\\\([\\da-f]{1,6}"+qi+"?|("+qi+")|.)","ig"),ia=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)};try{ji.apply(o=Hi.call(Ri.childNodes),Ri.childNodes),o[Ri.childNodes.length].nodeType}catch(FS){ji={apply:o.length?function(e,t){zi.apply(e,Hi.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var aa=function(e,t,n,r){var o,i,a,u,s,c,l;if((t?t.ownerDocument||t:Ri)!==Si&&xi(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=(t=t||Si).nodeType)&&9!==o)return[];if(Ei&&!r){if(c=ta.exec(e))if(l=c[1]){if(9===o){if(!(u=t.getElementById(l))||!u.parentNode)return n;if(u.id===l)return n.push(u),n}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(l))&&Ti(t,u)&&u.id===l)return n.push(u),n}else{if(c[2])return ji.apply(n,t.getElementsByTagName(e)),n;if((l=c[3])&&di.getElementsByClassName)return ji.apply(n,t.getElementsByClassName(l)),n}if(di.qsa&&(!ki||!ki.test(e))){if(s=u=Ai,c=t,l=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(a=hi(e),(u=t.getAttribute("id"))?s=u.replace(ra,"\\$&"):t.setAttribute("id",s),s="[id='"+s+"'] ",i=a.length;i--;)a[i]=s+ma(a[i]);c=na.test(e)&&fa(t.parentNode)||t,l=a.join(",")}if(l)try{return ji.apply(n,c.querySelectorAll(l)),n}catch(f){}finally{u||t.removeAttribute("id")}}}return bi(e.replace($i,"$1"),t,n,r)};function ua(){var n=[];function r(e,t){return n.push(e+" ")>mi.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function sa(e){return e[Ai]=!0,e}function ca(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function la(a){return sa(function(i){return i=+i,sa(function(e,t){for(var n,r=a([],e.length,i),o=r.length;o--;)e[n=r[o]]&&(e[n]=!(t[n]=e[n]))})})}function fa(e){return e&&typeof e.getElementsByTagName!=Mi&&e}function da(){}function ma(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ga(a,e,t){var u=e.dir,s=t&&"parentNode"===u,c=Oi++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||s)return a(e,t,n)}:function(e,t,n){var r,o,i=[Di,c];if(n){for(;e=e[u];)if((1===e.nodeType||s)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||s){if((r=(o=e[Ai]||(e[Ai]={}))[u])&&r[0]===Di&&r[1]===c)return i[2]=r[2];if((o[u]=i)[2]=a(e,t,n))return!0}}}function pa(o){return 1<o.length?function(e,t,n){for(var r=o.length;r--;)if(!o[r](e,t,n))return!1;return!0}:o[0]}function ha(e,t,n,r,o){for(var i,a=[],u=0,s=e.length,c=null!=t;u<s;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(u)));return a}function va(m,g,p,h,v,e){return h&&!h[Ai]&&(h=va(h)),v&&!v[Ai]&&(v=va(v,e)),sa(function(e,t,n,r){var o,i,a,u=[],s=[],c=t.length,l=e||function(e,t,n){for(var r=0,o=t.length;r<o;r++)aa(e,t[r],n);return n}(g||"*",n.nodeType?[n]:n,[]),f=!m||!e&&g?l:ha(l,u,m,n,r),d=p?v||(e?m:c||h)?[]:t:f;if(p&&p(f,d,n,r),h)for(o=ha(d,s),h(o,[],n,r),i=o.length;i--;)(a=o[i])&&(d[s[i]]=!(f[s[i]]=a));if(e){if(v||m){if(v){for(o=[],i=d.length;i--;)(a=d[i])&&o.push(f[i]=a);v(null,d=[],o,r)}for(i=d.length;i--;)(a=d[i])&&-1<(o=v?Vi.call(e,a):u[i])&&(e[o]=!(t[o]=a))}}else d=ha(d===t?d.splice(c,d.length):d),v?v(null,t,d,r):ji.apply(t,d)})}di=aa.support={},pi=aa.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},xi=aa.setDocument=function(e){var s=e?e.ownerDocument||e:Ri,e=s.defaultView;return s!==Si&&9===s.nodeType&&s.documentElement?(Ni=(Si=s).documentElement,Ei=!pi(s),e&&e!==function(e){try{return e.top}catch(t){}return null}(e)&&(e.addEventListener?e.addEventListener("unload",function(){xi()},!1):e.attachEvent&&e.attachEvent("onunload",function(){xi()})),di.attributes=!0,di.getElementsByTagName=!0,di.getElementsByClassName=ea.test(s.getElementsByClassName),di.getById=!0,mi.find.ID=function(e,t){if(typeof t.getElementById!=Mi&&Ei){e=t.getElementById(e);return e&&e.parentNode?[e]:[]}},mi.filter.ID=function(e){var t=e.replace(oa,ia);return function(e){return e.getAttribute("id")===t}},mi.find.TAG=di.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=Mi)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},mi.find.CLASS=di.getElementsByClassName&&function(e,t){if(Ei)return t.getElementsByClassName(e)},_i=[],ki=[],di.disconnectedMatch=!0,ki=ki.length&&new RegExp(ki.join("|")),_i=_i.length&&new RegExp(_i.join("|")),e=ea.test(Ni.compareDocumentPosition),Ti=e||ea.test(Ni.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Ii=e?function(e,t){if(e===t)return wi=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!di.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===Ri&&Ti(Ri,e)?-1:t===s||t.ownerDocument===Ri&&Ti(Ri,t)?1:Ci?Vi.call(Ci,e)-Vi.call(Ci,t):0:4&n?-1:1)}:function(e,t){if(e===t)return wi=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],u=[t];if(!o||!i)return e===s?-1:t===s?1:o?-1:i?1:Ci?Vi.call(Ci,e)-Vi.call(Ci,t):0;if(o===i)return ca(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?ca(a[r],u[r]):a[r]===Ri?-1:u[r]===Ri?1:0},s):Si},aa.matches=function(e,t){return aa(e,null,null,t)},aa.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Si&&xi(e),t=t.replace(Xi,"='$1']"),di.matchesSelector&&Ei&&(!_i||!_i.test(t))&&(!ki||!ki.test(t)))try{var n=(void 0).call(e,t);if(n||di.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(FS){}return 0<aa(t,Si,null,[e]).length},aa.contains=function(e,t){return(e.ownerDocument||e)!==Si&&xi(e),Ti(e,t)},aa.attr=function(e,t){(e.ownerDocument||e)!==Si&&xi(e);var n=mi.attrHandle[t.toLowerCase()],n=n&&Fi.call(mi.attrHandle,t.toLowerCase())?n(e,t,!Ei):undefined;return n!==undefined?n:di.attributes||!Ei?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},aa.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},aa.uniqueSort=function(e){var t,n=[],r=0,o=0;if(wi=!di.detectDuplicates,Ci=!di.sortStable&&e.slice(0),e.sort(Ii),wi){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return Ci=null,e},gi=aa.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=gi(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=gi(t);return n},(mi=aa.selectors={cacheLength:50,createPseudo:sa,match:Ji,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(oa,ia),e[3]=(e[3]||e[4]||e[5]||"").replace(oa,ia),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||aa.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&aa.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Ji.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Yi.test(n)&&(t=hi(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(oa,ia).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Bi[e+" "];return t||(t=new RegExp("(^|"+qi+")"+e+"("+qi+"|$)"))&&Bi(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!=Mi&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=aa.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(m,e,t,g,p){var h="nth"!==m.slice(0,3),v="last"!==m.slice(-4),b="of-type"===e;return 1===g&&0===p?function(e){return!!e.parentNode}:function(e,t,n){var r,o,i,a,u,s,c=h!=v?"nextSibling":"previousSibling",l=e.parentNode,f=b&&e.nodeName.toLowerCase(),d=!n&&!b;if(l){if(h){for(;c;){for(i=e;i=i[c];)if(b?i.nodeName.toLowerCase()===f:1===i.nodeType)return!1;s=c="only"===m&&!s&&"nextSibling"}return!0}if(s=[v?l.firstChild:l.lastChild],v&&d){for(u=(r=(o=l[Ai]||(l[Ai]={}))[m]||[])[0]===Di&&r[1],a=r[0]===Di&&r[2],i=u&&l.childNodes[u];i=++u&&i&&i[c]||(a=u=0)||s.pop();)if(1===i.nodeType&&++a&&i===e){o[m]=[Di,u,a];break}}else if(d&&(r=(e[Ai]||(e[Ai]={}))[m])&&r[0]===Di)a=r[1];else for(;(i=++u&&i&&i[c]||(a=u=0)||s.pop())&&((b?i.nodeName.toLowerCase()!==f:1!==i.nodeType)||!++a||(d&&((i[Ai]||(i[Ai]={}))[m]=[Di,a]),i!==e)););return(a-=p)===g||a%g==0&&0<=a/g}}},PSEUDO:function(e,i){var t,a=mi.pseudos[e]||mi.setFilters[e.toLowerCase()]||aa.error("unsupported pseudo: "+e);return a[Ai]?a(i):1<a.length?(t=[e,e,"",i],mi.setFilters.hasOwnProperty(e.toLowerCase())?sa(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)e[n=Vi.call(e,r[o])]=!(t[n]=r[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:sa(function(e){var r=[],o=[],u=vi(e.replace($i,"$1"));return u[Ai]?sa(function(e,t,n,r){for(var o,i=u(e,null,r,[]),a=e.length;a--;)(o=i[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return r[0]=e,u(r,null,n,o),r[0]=null,!o.pop()}}),has:sa(function(t){return function(e){return 0<aa(t,e).length}}),contains:sa(function(t){return t=t.replace(oa,ia),function(e){return-1<(e.textContent||e.innerText||gi(e)).indexOf(t)}}),lang:sa(function(n){return Gi.test(n||"")||aa.error("unsupported lang: "+n),n=n.replace(oa,ia).toLowerCase(),function(e){var t;do{if(t=Ei?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===Ni},focus:function(e){return e===Si.activeElement&&(!Si.hasFocus||Si.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!mi.pseudos.empty(e)},header:function(e){return Zi.test(e.nodeName)},input:function(e){return Qi.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:la(function(){return[0]}),last:la(function(e,t){return[t-1]}),eq:la(function(e,t,n){return[n<0?n+t:n]}),even:la(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:la(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:la(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:la(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=mi.pseudos.eq,Y(["radio","checkbox","file","password","image"],function(e){var t;mi.pseudos[e]=(t=e,function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})}),Y(["submit","reset"],function(e){var n;mi.pseudos[e]=(n=e,function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n})}),da.prototype=mi.filters=mi.pseudos,mi.setFilters=new da,hi=aa.tokenize=function(e,t){var n,r,o,i,a,u,s,c=Pi[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],s=mi.preFilter;a;){for(i in n&&!(r=Wi.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=Ki.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace($i," ")}),a=a.slice(n.length)),mi.filter)mi.filter.hasOwnProperty(i)&&(!(r=Ji[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length)));if(!n)break}return t?a.length:a?aa.error(e):Pi(e,u).slice(0)},vi=aa.compile=function(e,t){var n,h,v,b,y,r,o=[],i=[],a=Li[e+" "];if(!a){for(n=(t=t||hi(e)).length;n--;)((a=function f(e){for(var r,t,n,o=e.length,i=mi.relative[e[0].type],a=i||mi.relative[" "],u=i?1:0,s=ga(function(e){return e===r},a,!0),c=ga(function(e){return-1<Vi.call(r,e)},a,!0),l=[function(e,t,n){return n=!i&&(n||t!==yi)||((r=t).nodeType?s:c)(e,t,n),r=null,n}];u<o;u++)if(t=mi.relative[e[u].type])l=[ga(pa(l),t)];else{if((t=mi.filter[e[u].type].apply(null,e[u].matches))[Ai]){for(n=++u;n<o&&!mi.relative[e[n].type];n++);return va(1<u&&pa(l),1<u&&ma(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace($i,"$1"),t,u<n&&f(e.slice(u,n)),n<o&&f(e=e.slice(n)),n<o&&ma(e))}l.push(t)}return pa(l)}(t[n]))[Ai]?o:i).push(a);(a=Li(e,(h=i,b=0<(v=o).length,y=0<h.length,r=function(e,t,n,r,o){var i,a,u,s=0,c="0",l=e&&[],f=[],d=yi,m=e||y&&mi.find.TAG("*",o),g=Di+=null==d?1:Math.random()||.1,p=m.length;for(o&&(yi=t!==Si&&t);c!==p&&null!=(i=m[c]);c++){if(y&&i){for(a=0;u=h[a++];)if(u(i,t,n)){r.push(i);break}o&&(Di=g)}b&&((i=!u&&i)&&s--,e&&l.push(i))}if(s+=c,b&&c!==s){for(a=0;u=v[a++];)u(l,f,t,n);if(e){if(0<s)for(;c--;)l[c]||f[c]||(f[c]=Ui.call(r));f=ha(f)}ji.apply(r,f),o&&!e&&0<f.length&&1<s+v.length&&aa.uniqueSort(r)}return o&&(Di=g,yi=d),l},b?sa(r):r))).selector=e}return a},bi=aa.select=function(e,t,n,r){var o,i,a,u,s,c="function"==typeof e&&e,l=!r&&hi(e=c.selector||e);if(n=n||[],1===l.length){if(2<(i=l[0]=l[0].slice(0)).length&&"ID"===(a=i[0]).type&&di.getById&&9===t.nodeType&&Ei&&mi.relative[i[1].type]){if(!(t=(mi.find.ID(a.matches[0].replace(oa,ia),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=Ji.needsContext.test(e)?0:i.length;o--&&(a=i[o],!mi.relative[u=a.type]);)if((s=mi.find[u])&&(r=s(a.matches[0].replace(oa,ia),na.test(i[0].type)&&fa(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&ma(i)))return ji.apply(n,r),n;break}}return(c||vi(e,l))(r,t,!Ei,n,na.test(e)&&fa(t.parentNode)||t),n},di.sortStable=Ai.split("").sort(Ii).join("")===Ai,di.detectDuplicates=!!wi,xi(),di.sortDetached=!0;var ba=document,ya=Array.prototype.push,Ca=Array.prototype.slice,wa=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,xa=li.Event,Sa=pt.makeMap("children,contents,next,prev"),Na=function(e){return void 0!==e},Ea=function(e){return"string"==typeof e},ka=function(e,t){var n,r=(t=t||ba).createElement("div"),o=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)o.appendChild(n);return o},_a=function(e,t,n,r){var o;if(Ea(t))t=ka(t,ja(e[0]));else if(t.length&&!t.nodeType){if(t=$a.makeArray(t),r)for(o=t.length-1;0<=o;o--)_a(e,t[o],n,r);else for(o=0;o<t.length;o++)_a(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},Ta=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Aa=function(e,t,n){var r,o;return t=$a(t)[0],e.each(function(){n&&r===this.parentNode||(r=this.parentNode,o=t.cloneNode(!1),this.parentNode.insertBefore(o,this)),o.appendChild(this)}),e},Ra=pt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Da=pt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Oa={"for":"htmlFor","class":"className",readonly:"readOnly"},Ba={"float":"cssFloat"},Pa={},La={},Ia=function(e,t){return new $a.fn.init(e,t)},Ma=/^\s*|\s*$/g,Fa=function(e){return null===e||e===undefined?"":(""+e).replace(Ma,"")},Ua=function(e,t){var n,r,o,i;if(e)if((n=e.length)===undefined){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},za=function(e,n){var r=[];return Ua(e,function(e,t){n(t,e)&&r.push(t)}),r},ja=function(e){return e?9===e.nodeType?e:e.ownerDocument:ba};Ia.fn=Ia.prototype={constructor:Ia,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return $a(e).attr(t);o.context=t=document}if(Ea(e)){if(!(n="<"===(o.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:wa.exec(e)))return $a(t).find(e);if(n[1])for(r=ka(e,ja(t)).firstChild;r;)ya.call(o,r),r=r.nextSibling;else{if(!(r=ja(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1);return o},toArray:function(){return pt.toArray(this)},add:function(e,t){var n,r;if(Ea(e))return this.add($a(e));if(!1!==t)for(n=$a.unique(this.toArray().concat($a.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else ya.apply(this,$a.makeArray(e));return this},attr:function(t,n){var e,r=this;if("object"==typeof t)Ua(t,function(e,t){r.attr(e,t)});else{if(!Na(n)){if(r[0]&&1===r[0].nodeType){if((e=Pa[t])&&e.get)return e.get(r[0],t);if(Da[t])return r.prop(t)?t:undefined;null===(n=r[0].getAttribute(t,2))&&(n=undefined)}return n}this.each(function(){var e;1===this.nodeType&&((e=Pa[t])&&e.set?e.set(this,n):null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2))})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Oa[e]||e))Ua(e,function(e,t){n.prop(e,t)});else{if(!Na(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(n,r){var e,o,i=this,t=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof n)Ua(n,function(e,t){i.css(e,t)});else if(Na(r))n=t(n),"number"!=typeof r||Ra[n]||(r=r.toString()+"px"),i.each(function(){var e=this.style;if((o=La[n])&&o.set)o.set(this,r);else{try{this.style[Ba[n]||n]=r}catch(t){}null!==r&&""!==r||(e.removeProperty?e.removeProperty(a(n)):e.removeAttribute(n))}});else{if(e=i[0],(o=La[n])&&o.get)return o.get(e);if(!e.ownerDocument.defaultView)return e.currentStyle?e.currentStyle[t(n)]:"";try{return e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(a(n))}catch(u){return undefined}}return i},remove:function(){for(var e,t=this.length;t--;)e=this[t],xa.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t;if(Na(e)){t=this.length;try{for(;t--;)this[t].innerHTML=e}catch(n){$a(this[t]).empty().append(e)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(Na(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return _a(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return _a(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?_a(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?_a(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return $a(e).append(this),this},prependTo:function(e){return $a(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Aa(this,e)},wrapAll:function(e){return Aa(this,e,!0)},wrapInner:function(e){return this.each(function(){$a(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){$a(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),$a(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(o,i){var e=this;return"string"!=typeof o||(-1!==o.indexOf(" ")?Ua(o.split(" "),function(){e.toggleClass(this,i)}):e.each(function(e,t){var n,r=Ta(t,o);r!==i&&(n=t.className,r?t.className=Fa((" "+n+" ").replace(" "+o+" "," ")):t.className+=n?" "+o:o)})),e},hasClass:function(e){return Ta(this[0],e)},each:function(e){return Ua(this,e)},on:function(e,t){return this.each(function(){xa.bind(this,e,t)})},off:function(e,t){return this.each(function(){xa.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?xa.fire(this,e.type,e):xa.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return $a(Ca.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){for(var t=[],n=0,r=this.length;n<r;n++)$a.find(e,this[n],t);return $a(t)},filter:function(n){return $a("function"==typeof n?za(this.toArray(),function(e,t){return n(t,e)}):$a.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof $a&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&$a(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),$a(r)},offset:function(e){var t,n,r=0,o=0;return e?this.css(e):((n=this[0])&&(e=(t=n.ownerDocument).documentElement,n.getBoundingClientRect&&(r=(n=n.getBoundingClientRect()).left+(e.scrollLeft||t.body.scrollLeft)-e.clientLeft,o=n.top+(e.scrollTop||t.body.scrollTop)-e.clientTop)),{left:r,top:o})},push:ya,sort:Array.prototype.sort,splice:Array.prototype.splice},pt.extend(Ia,{extend:pt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:pt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:pt.isArray,each:Ua,trim:Fa,grep:za,find:aa,expr:aa.selectors,unique:aa.uniqueSort,text:aa.getText,contains:aa.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?$a.find.matchesSelector(t[0],e)?[t[0]]:[]:$a.find.matches(e,t)}});var Ha=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof $a&&(n=n[0]);o&&9!==o.nodeType;){if(n!==undefined){if(o===n)break;if("string"==typeof n&&$a(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},Va=function(e,t,n,r){var o=[];for(r instanceof $a&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(r!==undefined){if(e===r)break;if("string"==typeof r&&$a(e).is(r))break}o.push(e)}return o},qa=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Ua({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Ha(e,"parentNode")},next:function(e){return qa(e,"nextSibling",1)},prev:function(e){return qa(e,"previousSibling",1)},children:function(e){return Va(e.firstChild,"nextSibling",1)},contents:function(e){return pt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(r,o){Ia.fn[r]=function(t){var n=[];this.each(function(){var e=o.call(n,this,t,n);e&&($a.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(Sa[r]||(n=$a.unique(n)),0===r.indexOf("parents")&&(n=n.reverse()));var e=$a(n);return t?e.filter(t):e}}),Ua({parentsUntil:function(e,t){return Ha(e,"parentNode",t)},nextUntil:function(e,t){return Va(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Va(e,"previousSibling",1,t).slice(1)}},function(o,i){Ia.fn[o]=function(t,e){var n=[];this.each(function(){var e=i.call(n,this,t,n);e&&($a.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=$a.unique(n),0!==o.indexOf("parents")&&"prevUntil"!==o||(n=n.reverse()));var r=$a(n);return e?r.filter(e):r}}),Ia.fn.is=function(e){return!!e&&0<this.filter(e).length},Ia.fn.init.prototype=Ia.fn,Ia.overrideDefaults=function(n){var r,o=function(e,t){return r=r||n(),0===arguments.length&&(e=r.element),t=t||r.context,new o.fn.init(e,t)};return $a.extend(o,this),o},Ia.attrHooks=Pa,Ia.cssHooks=La;var $a=Ia,Wa=pt.each,Ka=pt.grep,Xa=lt.ie,Ya=/^([a-z0-9],?)+$/i,Ga=function(e,t){var n=t.attr("style"),n=e.serialize(e.parse(n),t[0].nodeName);t.attr("data-mce-style",n=n||null)},Ja=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o},Qa=function(a,u){void 0===u&&(u={});var n,r,o,i,e,s={},c=window,l={},t=0,f=Tr.forElement(vt.fromDom(a),{contentCssCors:u.contentCssCors,referrerPolicy:u.referrerPolicy}),d=[],m=u.schema||Zo({}),g=ti({url_converter:u.url_converter,url_converter_scope:u.url_converter_scope},u.schema),p=u.ownEvents?new li:li.Event,h=m.getBlockElements(),v=$a.overrideDefaults(function(){return{context:a,element:q.getRoot()}}),b=function(e){return e&&a&&W(e)?a.getElementById(e):e},y=function(e){return v("string"==typeof e?b(e):e)},C=function(e,t,n){var r,o=y(e);return r=void 0===(r=o.length?(e=$[t])&&e.get?e.get(o,t):o.attr(t):r)?n||"":r},w=function(e){e=b(e);return e?e.attributes:[]},x=function(e,t,n){""===n&&(n=null);var r=y(e),o=r.attr(t);r.length&&((e=$[t])&&e.set?e.set(r,n,t):r.attr(t,n),o!==n&&u.onSetAttrib&&u.onSetAttrib({attrElm:r,attrName:t,attrValue:n}))},S=function(){return u.root_element||a.body},N=function(e,t){return $n(a.body,b(e),t)},E=function(e,t,n){e=y(e);return n?e.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=lt.browser.isIE()?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:undefined)},k=function(e){var t,n;return e=b(e),t=E(e,"width"),n=E(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},_=function(e,t){if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Ya.test(t)){for(var n=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase(),o=n.length-1;0<=o;o--)if(n[o]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}e=Array.isArray(e)?e:[e];return 0<aa(t,e[0].ownerDocument||e[0],null,e).length},T=function(e,t,n,r){var o,i=[],a=b(e);for(r=r===undefined,n=n||("BODY"!==S().nodeName?S().parentNode:null),pt.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return _(e,o)});a&&!(a===n||K(a.nodeType)||wn(a)||xn(a));){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},A=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return _(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},R=function(e,n,r){var o,e="string"==typeof e?b(e):e;return!!e&&(pt.isArray(e)&&(e.length||0===e.length)?(o=[],Wa(e,function(e,t){e&&o.push(n.call(r,"string"==typeof e?b(e):e,t))}),o):n.call(r||this,e))},D=function(e,t){y(e).each(function(e,n){Wa(t,function(e,t){x(n,t,e)})})},O=function(e,r){e=y(e);Xa?e.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+r,t.removeChild(t.firstChild)}catch(n){$a("<div></div>").html("<br>"+r).contents().slice(1).appendTo(t)}return r}}):e.html(r)},B=function(e,n,r,o,i){return R(e,function(e){var t="string"==typeof n?a.createElement(n):n;return D(t,r),o&&("string"!=typeof o&&o.nodeType?t.appendChild(o):"string"==typeof o&&O(t,o)),i?t:e.appendChild(t)})},P=function(e,t,n){return B(a.createElement(e),e,t,n,!0)},L=Vo.encodeAllRaw,I=function(e,t){e=y(e);return(t?e.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}):e).remove(),1<e.length?e.toArray():e[0]},M=function(e,t,n){y(e).toggleClass(t,n).each(function(){""===this.className&&$a(this).attr("class",null)})},F=function(t,e,n){return R(e,function(e){return pt.is(e,"array")&&(t=t.cloneNode(!0)),n&&Wa(Ka(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},U=function(e){if(gn(e)){var t="a"===e.nodeName.toLowerCase()&&!C(e,"href")&&C(e,"id");if(C(e,"name")||C(e,"data-mce-bookmark")||t)return!0}return!1},z=function(){return a.createRange()},j=function(e,t,n,r){if(pt.isArray(e)){for(var o=e.length,i=[];o--;)i[o]=j(e[o],t,n,r);return i}return!u.collect||e!==a&&e!==c||d.push([e,t,n,r]),p.bind(e,t,n,r||q)},H=function(e,t,n){if(pt.isArray(e)){for(var r=e.length,o=[];r--;)o[r]=H(e[r],t,n);return o}if(0<d.length&&(e===a||e===c))for(r=d.length;r--;){var i=d[r];e!==i[0]||t&&t!==i[1]||n&&n!==i[2]||p.unbind(i[0],i[1],i[2])}return p.unbind(e,t,n)},V=function(e){if(e&&gn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},q={doc:a,settings:u,win:c,files:l,stdMode:!0,boxModel:!0,styleSheetLoader:f,boundEvents:d,styles:g,schema:m,events:p,isBlock:function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},$:v,$$:y,root:null,clone:function(t,e){if(!Xa||1!==t.nodeType||e)return t.cloneNode(e);var n=a.createElement(t.nodeName);return Wa(w(t),function(e){x(n,e.nodeName,C(t,e.nodeName))}),n},getRoot:S,getViewPort:function(e){e=dn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:function(e){e=b(e);var t=N(e),e=k(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:k,getParent:function(e,t,n){n=T(e,t,n,!1);return n&&0<n.length?n[0]:null},getParents:T,get:b,getNext:function(e,t){return A(e,t,"nextSibling")},getPrev:function(e,t){return A(e,t,"previousSibling")},select:function(e,t){return aa(e,b(t)||u.root_element||a,[])},is:_,add:B,create:P,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)he(t,r)&&(o+=" "+r+'="'+L(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n=a.createElement("div"),r=a.createDocumentFragment();for(r.appendChild(n),e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r.removeChild(n),r},remove:I,setStyle:function(e,t,n){t=W(t)?y(e).css(t,n):y(e).css(t);u.update_styles&&Ga(g,t)},getStyle:E,setStyles:function(e,t){t=y(e).css(t);u.update_styles&&Ga(g,t)},removeAllAttribs:function(e){return R(e,function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--)e.removeAttributeNode(t.item(n))})},setAttrib:x,setAttribs:D,getAttrib:C,getPos:N,parseStyle:function(e){return g.parse(e)},serializeStyle:function(e,t){return g.serialize(e,t)},addStyle:function(e){var t,n;if(q!==Qa.DOM&&a===document){if(s[e])return;s[e]=!0}(n=a.getElementById("mceDefaultStyles"))||((n=a.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=a.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(a.createTextNode(e))},loadCSS:function(e){Y((e=e||"").split(","),function(e){l[e]=!0,f.load(e,ee)})},addClass:function(e,t){y(e).addClass(t)},removeClass:function(e,t){M(e,t,!1)},hasClass:function(e,t){return y(e).hasClass(t)},toggleClass:M,show:function(e){y(e).show()},hide:function(e){y(e).hide()},isHidden:function(e){return"none"===y(e).css("display")},uniqueId:function(e){return(e||"mce_")+t++},setHTML:O,getOuterHTML:function(e){e="string"==typeof e?b(e):e;return gn(e)?e.outerHTML:$a("<div></div>").append($a(e).clone()).html()},setOuterHTML:function(e,t){y(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}I($a(this).html(t),!0)})},decode:Vo.decode,encode:L,insertAfter:function(e,t){var r=b(t);return R(e,function(e){var t=r.parentNode,n=r.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},replace:F,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=P(e),Wa(w(t),function(e){x(n,e.nodeName,C(t,e.nodeName))}),F(n,t,!0)),n||t},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return g.toHex(pt.trim(e))},run:R,getAttribs:w,isEmpty:function(e,t){var n,r=0;if(U(e))return!1;if(e=e.firstChild){var o=new Ar(e,e.parentNode),i=m?m.getWhiteSpaceElements():{};t=t||(m?m.getNonEmptyElements():null);do{if(n=e.nodeType,gn(e)){var a=e.getAttribute("data-mce-bogus");if(a){e=o.next("all"===a);continue}if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"!==a)return!1;r++,e=o.next();continue}if(U(e))return!1}if(8===n)return!1;if(3===n&&!yo(e.nodeValue))return!1;if(3===n&&e.parentNode&&i[e.parentNode.nodeName]&&yo(e.nodeValue))return!1;e=o.next()}while(e)}return r<=1},createRng:z,nodeIndex:Ja,split:function(e,t,n){var r,o,i=z();if(e&&t)return i.setStart(e.parentNode,Ja(e)),i.setEnd(t.parentNode,Ja(t)),r=i.extractContents(),(i=z()).setStart(t.parentNode,Ja(t)+1),i.setEnd(e.parentNode,Ja(e)+1),o=i.extractContents(),(i=e.parentNode).insertBefore(Ao(q,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(Ao(q,o),e),I(e),n||t},bind:j,unbind:H,fire:function(e,t,n){return p.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=S(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(0<d.length)for(var e=d.length;e--;){var t=d[e];p.unbind(t[0],t[1],t[2])}ae(l,function(e,t){f.unload(t),delete l[t]}),aa.setDocument&&aa.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},$=(n=g,o=X(q),i=(r=u).keep_values,e={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),null!==t&&"string"==typeof t?(e.removeAttr("style"),e.css(n.parse(t))):e.attr("style",t)):e.css(t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return t=n.serialize(n.parse(t),e[0].nodeName)}}},i&&(e.href=e.src={set:function(e,t,n){r.url_converter&&(t=r.url_converter.call(r.url_converter_scope||o(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}}),e);return q};Qa.DOM=Qa(document),Qa.nodeIndex=Ja;var Za=Qa.DOM,eu=pt.each,tu=pt.grep,nu=(ru.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e},ru.prototype.loadScript=function(e,t,n){var r=Za,o=function(){r.remove(i),a&&(a.onerror=a.onload=a=null)},i=r.uniqueId(),a=document.createElement("script");a.id=i,a.type="text/javascript",a.src=pt._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=function(){o(),t()},a.onerror=function(){o(),m(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)},ru.prototype.isDone=function(e){return 2===this.states[e]},ru.prototype.markDone=function(e){this.states[e]=2},ru.prototype.add=function(e,t,n,r){var o=this.states[e];this.queue.push(e),o===undefined&&(this.states[e]=0),t&&(this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]),this.scriptLoadedCallbacks[e].push({success:t,failure:r,scope:n||this}))},ru.prototype.load=function(e,t,n,r){return this.add(e,t,n,r)},ru.prototype.remove=function(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]},ru.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)},ru.prototype.loadScripts=function(t,e,n,r){var o=this,i=[],a=function(t,e){eu(o.scriptLoadedCallbacks[e],function(e){m(e[t])&&e[t].call(e.scope)}),o.scriptLoadedCallbacks[e]=undefined};o.queueLoadedCallbacks.push({success:e,failure:r,scope:n||this});var u=function(){var e=tu(t);t.length=0,eu(e,function(e){2!==o.states[e]?3!==o.states[e]?1!==o.states[e]&&(o.states[e]=1,o.loading++,o.loadScript(e,function(){o.states[e]=2,o.loading--,a("success",e),u()},function(){o.states[e]=3,o.loading--,i.push(e),a("failure",e),u()})):a("failure",e):a("success",e)}),o.loading||(e=o.queueLoadedCallbacks.slice(0),o.queueLoadedCallbacks.length=0,eu(e,function(e){0===i.length?m(e.success)&&e.success.call(e.scope):m(e.failure)&&e.failure.call(e.scope,i)}))};u()},ru.ScriptLoader=new ru,ru);function ru(e){void 0===e&&(e={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=e}var ou=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},iu={},au=ou("en"),uu=function(){return ge(iu,au.get())},su={getData:function(){return ue(iu,function(e){return Ee({},e)})},setCode:function(e){e&&au.set(e)},getCode:function(){return au.get()},add:function(e,t){var n=iu[e];n||(iu[e]=n={}),ae(t,function(e,t){n[t.toLowerCase()]=e})},translate:function(e){var t,n=uu().getOr({}),r=function(e){return m(e)?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null===e||e===undefined},i=function(e){e=r(e);return ge(n,e.toLowerCase()).map(r).getOr(e)},a=function(e){return e.replace(/{context:\w+}$/,"")};if(o(e))return"";if(C(t=e)&&pe(t,"raw"))return r(e.raw);if(y(t=e)&&1<t.length){var u=e.slice(1);return a(i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return pe(u,t)?r(u[t]):e}))}return a(i(e))},isRtl:function(){return uu().bind(function(e){return ge(e,"_dir")}).exists(function(e){return"rtl"===e})},hasCode:function(e){return pe(iu,e)}},cu=function(){var r=[],u={},s={},o=[],c=function(t,n){var e=U(o,function(e){return e.name===t&&e.state===n});Y(e,function(e){return e.callback()})},l=function(e){var t;return(t=s[e]?s[e].dependencies:t)||[]},f=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},d=function(e,t,n,r,o){var i,a;u[e]||(0!==(i="string"==typeof t?t:t.prefix+t.resource+t.suffix).indexOf("/")&&-1===i.indexOf("://")&&(i=cu.baseURL+"/"+i),u[e]=i.substring(0,i.lastIndexOf("/")),a=function(){c(e,"loaded"),function(e,t,n,r){e=l(e);Y(e,function(e){e=f(t,e);d(e.resource,e,undefined,undefined)}),n&&(r?n.call(r):n.call(nu))}(e,t,n,r)},s[e]?a():nu.ScriptLoader.add(i,a,r,o))},e=function(e,t,n){void 0===n&&(n="added"),pe(s,e)&&"added"===n||pe(u,e)&&"loaded"===n?t():o.push({name:e,state:n,callback:t})};return{items:r,urls:u,lookup:s,_listeners:o,get:function(e){return s[e]?s[e].instance:undefined},dependencies:l,requireLangPack:function(t,n){!1!==cu.languageLoad&&e(t,function(){var e=su.getCode();!e||n&&-1===(","+(n||"")+",").indexOf(","+e+",")||nu.ScriptLoader.add(u[t]+"/langs/"+e+".js")},"loaded")},add:function(e,t,n){return r.push(t),s[e]={instance:t,dependencies:n},c(e,"added"),t},remove:function(e){delete u[e],delete s[e]},createUrl:f,addComponents:function(e,t){var n=u[e];Y(t,function(e){nu.ScriptLoader.add(n+"/"+e)})},load:d,waitFor:e}};cu.languageLoad=!0,cu.baseURL="",cu.PluginManager=cu(),cu.ThemeManager=cu();var lu=function(n,r){var o=null;return{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===o&&(o=setTimeout(function(){n.apply(null,e),o=null},r))}}},fu=function(n,r){var o=null;return{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==o&&clearTimeout(o),o=setTimeout(function(){n.apply(null,e),o=null},r)}}},du=function(e,t){t=Pn(e,t);return t===undefined||""===t?[]:t.split(" ")},mu=function(e){return e.dom.classList!==undefined},gu=function(e,t){return function(e,t,n){n=du(e,t).concat([n]);return On(e,t,n.join(" ")),!0}(e,"class",t)},pu=function(e,t){return r=t,0<(e=U(du(n=e,t="class"),function(e){return e!==r})).length?On(n,t,e.join(" ")):In(n,t),!1;var n,r},hu=function(e,t){mu(e)?e.dom.classList.add(t):gu(e,t)},vu=function(e){0===(mu(e)?e.dom.classList:du(e,"class")).length&&In(e,"class")},bu=function(e,t){return mu(e)&&e.dom.classList.contains(t)},yu=function(e,t){var n=[];return Y(Ft(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(yu(e,t))}),n},Cu=function(e,t){return function(e,t){t=t===undefined?document:t.dom;return Ct(t)?[]:I(t.querySelectorAll(e),vt.fromDom)}(t,e)},wu=X("mce-annotation"),xu=X("data-mce-annotation"),Su=X("data-mce-annotation-uid"),Nu=function(r,e){var t=r.selection.getRng(),n=vt.fromDom(t.startContainer),o=vt.fromDom(r.getBody()),e=e.fold(function(){return"."+wu()},function(e){return"["+xu()+'="'+e+'"]'}),n=Ut(n,t.startOffset).getOr(n),e=pr(n,e,function(e){return wt(e,o)}),i=function(e,t){return function(e,t){e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)}(e,t)?A.some(Pn(e,t)):A.none()};return e.bind(function(e){return i(e,""+Su()).bind(function(n){return i(e,""+xu()).map(function(e){var t=Eu(r,n);return{uid:n,name:e,elements:t}})})})},Eu=function(e,t){e=vt.fromDom(e.getBody());return Cu(e,"["+Su()+'="'+t+'"]')},ku=function(t,e){var r=ou({}),o=function(){return{listeners:[],previous:ou(A.none())}},s=function(e,t){n(e,function(e){return t(e),e})},n=function(e,t){var n=r.get(),t=t(ge(n,e).getOrThunk(o));n[e]=t,r.set(n)},i=fu(function(){var e=r.get(),e=function(e,t){e=R.call(e,0);return e.sort(t),e}(oe(e));Y(e,function(e){n(e,function(a){var u=a.previous.get();return Nu(t,A.some(e)).fold(function(){var t;u.isSome()&&(s(t=e,function(e){Y(e.listeners,function(e){return e(!1,t)})}),a.previous.set(A.none()))},function(e){var t,n,r,o=e.uid,i=e.name,e=e.elements;Tn(u,o)||(n=o,r=e,s(t=i,function(e){Y(e.listeners,function(e){return e(!0,t,{uid:n,nodes:I(r,function(e){return e.dom})})})}),a.previous.set(A.some(o)))}),{previous:a.previous,listeners:a.listeners}})})},30);t.on("remove",function(){i.cancel()}),t.on("NodeChange",function(){i.throttle()});return{addListener:function(e,t){n(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},_u=function(e,n){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){Y(e,function(t){A.from(t.attr(xu())).bind(n.lookup).each(function(e){!1===e.persistent&&t.unwrap()})})})})},Tu=0,Au=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Tu+String(t)},Ru=function(e,t){var n=Rt(e).dom,r=vt.fromDom(n.createDocumentFragment()),n=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,Ft(vt.fromDom(t))}(t,n);Qt(r,n),Zt(e),Jt(e,r)},Du=function(e,t){return vt.fromDom(e.dom.cloneNode(t))},Ou=function(e){return Du(e,!1)},Bu=function(e){return Du(e,!0)},Pu=function(e,t,n){void 0===n&&(n=N);var r=new Ar(e,t),o=function(e){for(var t;(t=r[e]())&&!yn(t)&&!n(t););return A.from(t).filter(yn)};return{current:function(){return A.from(r.current()).filter(yn)},next:function(){return o("next")},prev:function(){return o("prev")},prev2:function(){return o("prev2")}}},Lu=function(t,e){var i=e||function(e){return t.isBlock(e)||Sn(e)||kn(e)},a=function(e,t,n,r){if(yn(e)){t=r(e,t,e.data);if(-1!==t)return A.some({container:e,offset:t})}return n().bind(function(e){return a(e.container,e.offset,n,r)})};return{backwards:function(e,t,n,r){var o=Pu(e,r,i);return a(e,t,function(){return o.prev().map(function(e){return{container:e,offset:e.length}})},n).getOrNull()},forwards:function(e,t,n,r){var o=Pu(e,r,i);return a(e,t,function(){return o.next().map(function(e){return{container:e,offset:0}})},n).getOrNull()}}},Iu=Math.round,Mu=function(e){return e?{left:Iu(e.left),top:Iu(e.top),bottom:Iu(e.bottom),right:Iu(e.right),width:Iu(e.width),height:Iu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Fu=function(e,t){return e=Mu(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Uu=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},zu=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Uu(t.top-e.bottom,e,t)},ju=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Uu(t.bottom-e.top,e,t)},Hu=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Vu=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},qu=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},$u=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Wu=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&$u.test(e)},Ku=gn,Xe=po,Xu=k("display","block table"),ct=k("float","left right"),Yu=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(Ku,Xe,b(ct)),Gu=b(k("white-space","pre pre-line pre-wrap")),Ju=yn,Qu=Sn,Zu=Qa.nodeIndex,es=qu,ts=function(e){return"createRange"in e?e.createRange():Qa.DOM.createRng()},ns=function(e){return e&&/[\r\n\t ]/.test(e)},rs=function(e){return!!e.setStart&&!!e.setEnd},os=function(e){var t=e.startContainer,n=e.startOffset;if(ns(e.toString())&&Gu(t.parentNode)&&yn(t)){t=t.data;if(ns(t[n-1])||ns(t[n+1]))return!0}return!1},is=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},as=function(e){var t=e.getClientRects(),t=0<t.length?Mu(t[0]):Mu(e.getBoundingClientRect());return!rs(e)&&Qu(e)&&is(t)?function(e){var t=e.ownerDocument,n=ts(t),r=t.createTextNode(qr),t=e.parentNode;t.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);n=Mu(n.getBoundingClientRect());return t.removeChild(r),n}(e):is(t)&&rs(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&yn(n)&&0===r&&1===o){e=e.cloneRange();return e.setEndAfter(n),as(e)}return null}(e):t},us=function(e,t){t=Fu(e,t);return t.width=1,t.right=t.left+1,t},ss=function(e){var r=[],o=function(e){var t,n;0!==e.height&&(0<r.length&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},t=function(e,t){var n=ts(e.ownerDocument);if(t<e.data.length){if(Wu(e.data[t]))return r;if(Wu(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!os(n)))return o(us(as(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),os(n)||o(us(as(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),os(n)||o(us(as(n),!0)))},n=e.container(),i=e.offset();if(Ju(n))return t(n,i),r;if(Ku(n))if(e.isAtEnd()){var a=es(n,i);Ju(a)&&t(a,a.data.length),Yu(a)&&!Qu(a)&&o(us(as(a),!1))}else{a=es(n,i);if(Ju(a)&&t(a,0),Yu(a)&&e.isAtEnd())return o(us(as(a),!1)),r;e=es(e.container(),e.offset()-1);Yu(e)&&!Qu(e)&&(!Xu(e)&&!Xu(a)&&Yu(a)||o(us(as(e),!1))),Yu(a)&&o(us(as(a),!0))}return r},cs=function(t,n,e){var r=function(){return e=e||ss(cs(t,n))};return{container:X(t),offset:X(n),toRange:function(){var e=ts(t.ownerDocument);return e.setStart(t,n),e.setEnd(t,n),e},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return Ju(t),0===n},isAtEnd:function(){return Ju(t)?n>=t.data.length:n>=t.childNodes.length},isEqual:function(e){return e&&t===e.container()&&n===e.offset()},getNode:function(e){return es(t,e?n-1:n)}}};cs.fromRangeStart=function(e){return cs(e.startContainer,e.startOffset)},cs.fromRangeEnd=function(e){return cs(e.endContainer,e.endOffset)},cs.after=function(e){return cs(e.parentNode,Zu(e)+1)},cs.before=function(e){return cs(e.parentNode,Zu(e))},cs.isAbove=function(e,t){return An(te(t.getClientRects()),ne(e.getClientRects()),zu).getOr(!1)},cs.isBelow=function(e,t){return An(ne(t.getClientRects()),te(e.getClientRects()),ju).getOr(!1)},cs.isAtStart=function(e){return!!e&&e.isAtStart()},cs.isAtEnd=function(e){return!!e&&e.isAtEnd()},cs.isTextPosition=function(e){return!!e&&yn(e.container())},cs.isElementPosition=function(e){return!1===cs.isTextPosition(e)};var ls,fs=function(e,t){yn(t)&&0===t.data.length&&e.remove(t)},ds=function(e,t,n){var r,o,i,a,u;xn(n)?(r=e,o=t,i=n,a=A.from(i.firstChild),u=A.from(i.lastChild),o.insertNode(i),a.each(function(e){return fs(r,e.previousSibling)}),u.each(function(e){return fs(r,e.nextSibling)})):(e=e,n=n,t.insertNode(n),fs(e,n.previousSibling),fs(e,n.nextSibling))},ms=yn,gs=hn,ps=Qa.nodeIndex,hs=function(e){e=e.parentNode;return gs(e)?hs(e):e},vs=function(e){return e?xe(e.childNodes,function(e,t){return gs(t)&&"BR"!==t.nodeName?e=e.concat(vs(t)):e.push(t),e},[]):[]},bs=function(t){return function(e){return t===e}},ys=function(e){var t=ms(e)?"text()":e.nodeName.toLowerCase();return t+"["+function(e){var r=vs(hs(e)),t=Se(r,bs(e),e);r=r.slice(0,t+1);var n=xe(r,function(e,t,n){return ms(t)&&ms(r[n-1])&&e++,e},0);return r=Ce(r,pn([e.nodeName])),Se(r,bs(e),e)-n}(e)+"]"},Cs=function(e,t){var n,r=[],o=t.container(),i=t.offset();return ms(o)?n=function(e,t){for(;(e=e.previousSibling)&&ms(e);)t+=e.data.length;return t}(o,i):(i>=(t=o.childNodes).length?(n="after",i=t.length-1):n="before",o=t[i]),r.push(ys(o)),o=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r}(e,o),o=Ce(o,b(hn)),(r=r.concat(ye(o,ys))).reverse().join("/")+","+n},ws=function(e,t){if(!t)return null;var n=t.split(","),t=n[0].split("/"),n=1<n.length?n[1]:"before",e=xe(t,function(e,t){var n,r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),t=e,e=r[1],r=parseInt(r[2],10),n=vs(t),n=Ce(n,function(e,t){return!ms(e)||!ms(n[t-1])}),(n=Ce(n,pn([e])))[r]):null},e);return e?ms(e)?function(e,t){for(var n,r=e,o=0;ms(r);){if(n=r.data.length,o<=t&&t<=o+n){e=r,t-=o;break}if(!ms(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return ms(e)&&t>e.data.length&&(t=e.data.length),cs(e,t)}(e,parseInt(n,10)):(n="after"===n?ps(e)+1:ps(e),cs(e.parentNode,n)):null},xs=kn,Ss=function(e,t,n,r,o){var i=r[o?"startContainer":"endContainer"],r=r[o?"startOffset":"endOffset"],a=[],o=0,u=e.getRoot();for(yn(i)?a.push(n?function(e,t,n){for(var r=e(t.data.slice(0,n)).length,o=t.previousSibling;o&&yn(o);o=o.previousSibling)r+=e(o.data).length;return r}(t,i,r):r):(r>=(t=i.childNodes).length&&t.length&&(o=1,r=Math.max(0,t.length-1)),a.push(e.nodeIndex(t[r],n)+o));i&&i!==u;i=i.parentNode)a.push(e.nodeIndex(i,n));return a},Ns=function(e,t,n){var r=0;return pt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Es=function(e,t){var n=t?"start":"end",r=e[n+"Container"],o=e[n+"Offset"];gn(r)&&"TR"===r.nodeName&&(r=(n=r.childNodes)[Math.min(t?o:o-1,n.length-1)])&&(o=t?0:r.childNodes.length,e["set"+(t?"Start":"End")](r,o))},ks=function(e){return Es(e,!0),Es(e,!1),e},_s=function(e,t){return gn(e)&&(e=qu(e,t),xs(e))?e:Qr(e)?(t=(e=yn(e)&&Gr(e)?e.parentNode:e).previousSibling,xs(t)?t:(t=e.nextSibling,xs(t)?t:void 0)):void 0},Ts=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(xs(r)||"IMG"===o)return{name:o,index:Ns(n.dom,o,r)};r=_s((r=i).startContainer,r.startOffset)||_s(r.endContainer,r.endOffset);return r?{name:o=r.tagName,index:Ns(n.dom,o,r)}:(o=e,r=t,e=i,i=(t=n).dom,(n={}).start=Ss(i,o,r,e,!0),t.isCollapsed()||(n.end=Ss(i,o,r,e,!1)),n)},As=function(e,t,n){t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",t,"&#xFEFF;"):e.create("span",t)},Rs=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),u=a.nodeName;if("IMG"===u)return{name:u,index:Ns(n,u,a)};a=ks(r.cloneRange());i||(a.collapse(!1),i=As(n,o+"_end",t),ds(n,a,i)),(r=ks(r)).collapse(!0);t=As(n,o+"_start",t);return ds(n,r,t),e.moveToBookmark({id:o,keep:!0}),{id:o}},Ve=function(e,t,n){return 2===t?Ts(Kr,n,e):3===t?(n=(r=e).getRng(),{start:Cs(r.dom.getRoot(),cs.fromRangeStart(n)),end:Cs(r.dom.getRoot(),cs.fromRangeEnd(n))}):t?{rng:e.getRng()}:Rs(e,!1);var r},Ds=h(Ts,g,!0),Os=Qa.DOM,Bs=function(e,t,n){var r=e.getParam(t,n);if(-1===r.indexOf("="))return r;t=e.getParam(t,"","hash");return ge(t,e.id).getOr(n)},Ps=function(e){return e.getParam("content_security_policy","")},Ls=function(e){if(e.getParam("force_p_newlines",!1))return"p";e=e.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Is=function(e){return e.getParam("forced_root_block_attrs",{})},Ms=function(e){return e.getParam("icons","","string")},Fs=function(e){return e.getParam("referrer_policy","","string")},Us=function(e){return e.getParam("language","en","string")},zs=function(e){return e.getParam("indent_use_margin",!1)},js=function(e){e=e.getParam("font_css",[]);return y(e)?e:I(e.split(","),qe)},Hs=function(e){e=e.getParam("object_resizing");return!1!==e&&!lt.iOS&&(W(e)?e:"table,img,figure.image,div,video,iframe")},Vs=function(e){return e.getParam("event_root")},qs=function(e){return e.getParam("theme")},$s=function(e){return!1!==e.getParam("inline_boundaries")},Ws=function(e){return e.getParam("plugins","","string")},Ks=gn,Xs=yn,Ys=function(e){var t=e.parentNode;t&&t.removeChild(e)},Gs=function(e){var t=Kr(e);return{count:e.length-t.length,text:t}},Js=function(e){for(var t;-1!==(t=e.data.lastIndexOf($r));)e.deleteData(t,1)},Qs=function(e,t){return nc(e),t},Zs=function(e,t){var n=t.container(),r=function(e,t){t=B(e,t);return-1===t?A.none():A.some(t)}(re(n.childNodes),e).map(function(e){return e<t.offset()?cs(n,t.offset()-1):t}).getOr(t);return nc(e),r},ec=function(e,t){return Xs(e)&&t.container()===e?(r=t,o=Gs((n=e).data.substr(0,r.offset())),i=Gs(n.data.substr(r.offset())),0<(o.text+i.text).length?(Js(n),cs(n,r.offset()-o.count)):r):Qs(e,t);var n,r,o,i},tc=function(e,t){return cs.isTextPosition(t)?ec(e,t):(e=e,((t=t).container()===e.parentNode?Zs:Qs)(e,t))},nc=function(e){Ks(e)&&Qr(e)&&(Zr(e)?e.removeAttribute("data-mce-caret"):Ys(e)),Xs(e)&&(Js(e),0===e.data.length&&Ys(e))},rc=st().browser,oc=kn,ic=_n,ac=e,uc=function(e,t,n){var r,o,i,a=Fu(t.getBoundingClientRect(),n);i="BODY"===e.tagName?(r=e.ownerDocument.documentElement,o=e.scrollLeft||r.scrollLeft,e.scrollTop||r.scrollTop):(i=e.getBoundingClientRect(),o=e.scrollLeft-i.left,e.scrollTop-i.top),a.left+=o,a.right+=o,a.top+=i,a.bottom+=i,a.width=1;t=t.offsetWidth-t.clientWidth;return 0<t&&(n&&(t*=-1),a.left+=t,a.right+=t),a},sc=function(e,o,i,t){var n,a,u=ou(A.none()),e=Ls(e),s=0<e.length?e:"p",c=function(){!function(e){for(var t=Cu(vt.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),n=0;n<t.length;n++){var r,o=t[n].dom,i=o.previousSibling;oo(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(r.length-1,1)),i=o.nextSibling,ro(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}}(o),a&&(nc(a),a=null),u.get().each(function(e){$a(e.caret).remove(),u.set(A.none())}),n&&(kr.clearInterval(n),n=undefined)},l=function(){n=kr.setInterval(function(){t()?$a("div.mce-visual-caret",o).toggleClass("mce-visual-caret-hidden"):$a("div.mce-visual-caret",o).addClass("mce-visual-caret-hidden")},500)};return{show:function(t,e){var n;if(c(),ac(e))return null;if(!i(e))return a=function(e,t){var n=e.ownerDocument.createTextNode($r),r=e.parentNode;if(t){o=e.previousSibling;if(Yr(o)){if(Qr(o))return o;if(oo(o))return o.splitText(o.data.length-1)}r.insertBefore(n,e)}else{var o=e.nextSibling;if(Yr(o)){if(Qr(o))return o;if(ro(o))return o.splitText(1),o}e.nextSibling?r.insertBefore(n,e.nextSibling):r.appendChild(n)}return n}(e,t),n=e.ownerDocument.createRange(),lc(a.nextSibling)?(n.setStart(a,0),n.setEnd(a,0)):(n.setStart(a,1),n.setEnd(a,1)),n;a=no(s,e,t);var r=uc(o,e,t);$a(a).css("top",r.top);r=$a('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(Ee({},r)).appendTo(o)[0];return u.set(A.some({caret:r,element:e,before:t})),u.get().each(function(e){t&&$a(e.caret).addClass("mce-visual-caret-before")}),l(),(n=e.ownerDocument.createRange()).setStart(a,0),n.setEnd(a,0),n},hide:c,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){u.get().each(function(e){var t=uc(o,e.element,e.before);$a(e.caret).css(Ee({},t))})},destroy:function(){return kr.clearInterval(n)}}},cc=function(){return rc.isIE()||rc.isEdge()||rc.isFirefox()},lc=function(e){return oc(e)||ic(e)},fc=function(e){return lc(e)||vn(e)&&cc()},dc=kn,mc=_n,gc=k("display","block table table-cell table-caption list-item"),pc=Qr,hc=Gr,vc=gn,bc=po,yc=function(e,t){for(var n;n=e(t);)if(!hc(n))return n;return null},Cc=function(e,t,n,r,o){var i=new Ar(e,r),r=dc(e)||hc(e);if(t<0){if(r&&n(e=yc(i.prev.bind(i),!0)))return e;for(;e=yc(i.prev.bind(i),o);)if(n(e))return e}if(0<t){if(r&&n(e=yc(i.next.bind(i),!0)))return e;for(;e=yc(i.next.bind(i),o);)if(n(e))return e}return null},wc=function(e,t){for(;e&&e!==t;){if(gc(e))return e;e=e.parentNode}return null},xc=function(e,t,n){return wc(e.container(),n)===wc(t.container(),n)},Sc=function(e,t){if(!t)return null;var n=t.container(),t=t.offset();return vc(n)?n.childNodes[t+e]:null},o=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Nc=function(e,t,n){for(var r,o,i=e?"previousSibling":"nextSibling";n&&n!==t;){var a=n[i];if(pc(a)&&(a=a[i]),dc(a)||mc(a)){if(o=n,wc(a,r=t)===wc(o,r))return a;break}if(bc(a))break;n=n.parentNode}return null},Ec=h(o,!0),kc=h(o,!1),_c=function(e,t,n){var r,o=h(Nc,!0,t),i=h(Nc,!1,t),a=n.startContainer,u=n.startOffset;if(Gr(a)){t=(a=!vc(a)?a.parentNode:a).getAttribute("data-mce-caret");if("before"===t&&(r=a.nextSibling,fc(r)))return Ec(r);if("after"===t&&(r=a.previousSibling,fc(r)))return kc(r)}if(!n.collapsed)return n;if(yn(a)){if(pc(a)){if(1===e){if(r=i(a))return Ec(r);if(r=o(a))return kc(r)}if(-1===e){if(r=o(a))return kc(r);if(r=i(a))return Ec(r)}return n}if(oo(a)&&u>=a.data.length-1)return 1===e&&(r=i(a))?Ec(r):n;if(ro(a)&&u<=1)return-1===e&&(r=o(a))?kc(r):n;if(u===a.data.length)return(r=i(a))?Ec(r):n;if(0===u)return(r=o(a))?kc(r):n}return n},Tc=function(e,t){return A.from(Sc(e?0:-1,t)).filter(dc)},Ac=function(e,t,n){n=_c(e,t,n);return-1===e?cs.fromRangeStart(n):cs.fromRangeEnd(n)},Rc=function(e){return A.from(e.getNode()).map(vt.fromDom)},Dc=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},Oc=function(e,t){t=xc(e,t);return!(t||!Sn(e.getNode()))||t};(Xe=ls=ls||{})[Xe.Backwards=-1]="Backwards",Xe[Xe.Forwards=1]="Forwards";var Bc,Pc,Lc,Ic,Mc=kn,Fc=yn,Uc=gn,zc=Sn,jc=po,Hc=function(e){return fo(e)||!!ho(e=e)&&!0!==j(re(e.getElementsByTagName("*")),function(e,t){return e||ao(t)},!1)},Vc=vo,qc=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},$c=function(e,t){if(0<e){if(jc(t.previousSibling)&&!Fc(t.previousSibling))return cs.before(t);if(Fc(t))return cs(t,0)}if(e<0){if(jc(t.nextSibling)&&!Fc(t.nextSibling))return cs.after(t);if(Fc(t))return cs(t,t.data.length)}return!(e<0)||zc(t)?cs.before(t):cs.after(t)},Wc=function(e,t,n){var r,o,i;if(!Uc(n)||!t)return null;if(t.isEqual(cs.after(n))&&n.lastChild){if(i=cs.after(n.lastChild),e<0&&jc(n.lastChild)&&Uc(n.lastChild))return zc(n.lastChild)?cs.before(n.lastChild):i}else i=t;var a,u=i.container(),s=i.offset();if(Fc(u)){if(e<0&&0<s)return cs(u,--s);if(0<e&&s<u.length)return cs(u,++s);r=u}else{if(e<0&&0<s&&(c=qc(u,s-1),jc(c)))return!Hc(c)&&(o=Cc(c,e,Vc,c))?Fc(o)?cs(o,o.data.length):cs.after(o):Fc(c)?cs(c,c.data.length):cs.before(c);if(0<e&&s<u.childNodes.length&&(c=qc(u,s),jc(c)))return zc(c)?(a=n,(s=(t=c).nextSibling)&&jc(s)?Fc(s)?cs(s,0):cs.before(s):Wc(ls.Forwards,cs.after(t),a)):!Hc(c)&&(o=Cc(c,e,Vc,c))?Fc(o)?cs(o,0):cs.before(o):Fc(c)?cs(c,0):cs.after(c);r=c||i.getNode()}if((0<e&&i.isAtEnd()||e<0&&i.isAtStart())&&(r=Cc(r,e,E,n,!0),Vc(r,n)))return $c(e,r);var c=Cc(r,e,Vc,n),n=Ne(U(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(u,n),Mc));return!n||c&&n.contains(c)?c?$c(e,c):null:i=0<e?cs.after(n):cs.before(n)},Kc=function(t){return{next:function(e){return Wc(ls.Forwards,e,t)},prev:function(e){return Wc(ls.Backwards,e,t)}}},Xc=function(e){return cs.isTextPosition(e)?0===e.offset():po(e.getNode())},Yc=function(e){if(cs.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return po(e.getNode(!0))},Gc=function(e,t){return!cs.isTextPosition(e)&&!cs.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Jc=function(e,t,n){return e?!Gc(t,n)&&(e=t,!(!cs.isTextPosition(e)&&Sn(e.getNode())))&&Yc(t)&&Xc(n):!Gc(n,t)&&Xc(t)&&Yc(n)},Qc=function(e,t,n){t=Kc(t);return A.from(e?t.next(n):t.prev(n))},Zc=function(t,n,r){return Qc(t,n,r).bind(function(e){return xc(r,e,n)&&Jc(t,r,e)?Qc(t,n,e):A.some(e)})},el=function(t,n,e,r){return Zc(t,n,e).bind(function(e){return r(e)?el(t,n,e,r):A.some(e)})},tl=function(e,t){var n,r=e?t.firstChild:t.lastChild;return yn(r)?A.some(cs(r,e?0:r.data.length)):r?po(r)?A.some(e?cs.before(r):Sn(n=r)?cs.before(n):cs.after(n)):function(e,t,n){n=e?cs.before(n):cs.after(n);return Qc(e,t,n)}(e,t,r):A.none()},nl=h(Qc,!0),rl=h(Qc,!1),ol=h(tl,!0),il=h(tl,!1),al="_mce_caret",ul=function(e){return gn(e)&&e.id===al},sl=function(e,t){for(;t&&t!==e;){if(t.id===al)return t;t=t.parentNode}return null},cl=function(e,t){return gn(t)&&e.isBlock(t)&&!t.innerHTML&&!lt.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},ll=function(e,t,n){return!(!1!==t.hasChildNodes()||!sl(e,t))&&(e=n,t=(n=t).ownerDocument.createTextNode($r),n.appendChild(t),e.setStart(t,0),e.setEnd(t,0),!0)},fl=function(e,t,n,r){var o,i,a,u=n[t?"start":"end"],s=e.getRoot();if(u){for(e=u[0],i=s,o=u.length-1;1<=o;o--){if(a=i.childNodes,ll(s,i,r))return!0;if(u[o]>a.length-1)return!!ll(s,i,r)||function(e,t){return il(e).fold(N,function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})}(i,r);i=a[u[o]]}3===i.nodeType&&(e=Math.min(u[0],i.nodeValue.length)),1===i.nodeType&&(e=Math.min(u[0],i.childNodes.length)),t?r.setStart(i,e):r.setEnd(i,e)}return!0},dl=function(e){return yn(e)&&0<e.data.length},ml=function(e,t,n){var r,o,i,a,u=e.get(n.id+"_"+t),s=n.keep;if(u){if(o=u.parentNode,a=(i=(r="start"===t?s?u.hasChildNodes()?(o=u.firstChild,1):dl(u.nextSibling)?(o=u.nextSibling,0):dl(u.previousSibling)?(o=u.previousSibling,u.previousSibling.data.length):(o=u.parentNode,e.nodeIndex(u)+1):e.nodeIndex(u):s?u.hasChildNodes()?(o=u.firstChild,1):dl(u.previousSibling)?(o=u.previousSibling,u.previousSibling.data.length):(o=u.parentNode,e.nodeIndex(u)):e.nodeIndex(u),o),r),!s){for(o=u.previousSibling,s=u.nextSibling,pt.each(pt.grep(u.childNodes),function(e){yn(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);o&&s&&o.nodeType===s.nodeType&&yn(o)&&!lt.opera&&(r=o.nodeValue.length,o.appendData(s.nodeValue),e.remove(s),i=o,a=r)}return A.some(cs(i,a))}return A.none()},gl=function(e,t){var n,r,o,i,a,u,s=e.dom;if(t){if(pt.isArray(t.start))return a=t,u=(e=s).createRng(),fl(e,!0,a,u)&&fl(e,!1,a,u)?A.some(u):A.none();if(W(t.start))return A.some((a=t,o=(u=s).createRng(),i=ws(u.getRoot(),a.start),o.setStart(i.container(),i.offset()),i=ws(u.getRoot(),a.end),o.setEnd(i.container(),i.offset()),o));if(pe(t,"id"))return o=ml(r=s,"start",i=t),i=ml(r,"end",i),An(o,i.or(o),function(e,t){var n=r.createRng();return n.setStart(cl(r,e.container()),e.offset()),n.setEnd(cl(r,t.container()),t.offset()),n});if(pe(t,"name"))return n=s,s=t,A.from(n.select(s.name)[s.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(pe(t,"rng"))return A.some(t.rng)}return A.none()},pl=Ve,hl=function(t,e){gl(t,e).each(function(e){t.setRng(e)})},vl=function(e){return gn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},bl=(Bc=qr,function(e){return Bc===e}),yl=function(e){return""!==e&&-1!==" \f\n\r\t\x0B".indexOf(e)},Cl=function(e){return!yl(e)&&!bl(e)},wl=function(e){return!!e.nodeType},xl=function(e,t,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!(i=n.startContainer.childNodes[n.startOffset])||!/^(IMG)$/.test(i.nodeName))&&1===u.nodeType)for(a<(i=u.childNodes).length?(u=i[a],r=new Ar(u,e.getParent(u,e.isBlock))):(u=i[i.length-1],(r=new Ar(u,e.getParent(u,e.isBlock))).next(!0)),o=r.current();o;o=r.next())if(3===o.nodeType&&!kl(o))return n.setStart(o,0),void t.setRng(n)},Sl=function(e,t,n){if(e){var r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(1===e.nodeType||!kl(e))return e}},Nl=function(e,t){return wl(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},El=function(e,t,n){return e.schema.isValidChild(t,n)},kl=function(e,t){if(void 0===t&&(t=!1),V(e)&&yn(e)){e=t?e.data.replace(/ /g,"\xa0"):e.data;return yo(e)}return!1},_l=function(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e},Tl=function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},Al=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),""+(t="fontFamily"===n?t.replace(/[\'\"]/g,"").replace(/,\s+/g,","):t)},Rl=function(e,t,n){return Al(e,e.getStyle(t,n),n)},Dl=function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},Ol=function(e,t,n){return e.getParents(t,n,e.getRoot())},Bl=function(t,e,n){var r=["inline","block","selector","attributes","styles","classes"],o=function(e){return de(e,function(e,t){return L(r,function(e){return e===t})})};return L(t.formatter.get(e),function(e){var r=o(e);return L(t.formatter.get(n),function(e){var t,n=o(e);return e=r,n=n,a(t=void 0===t?u:t).eq(e,n)})})},Pl=function(e){return he(e,"block")},Ll=function(e){return he(e,"selector")},Il=function(e){return he(e,"inline")},Ml=function(e,t){return L(t.childNodes,e.isBlock)},Fl=vl,Ul=Ol,zl=kl,jl=Nl,Hl=function(e,t){for(var n=t;n;){if(gn(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Vl=function(e,t,n,r){for(var o=t.data,i=n;e?0<=i:i<o.length;e?i--:i++)if(r(o.charAt(i)))return e?i+1:i;return-1},ql=function(e,t,n){return Vl(e,t,n,function(e){return bl(e)||yl(e)})},$l=function(e,t,n){return Vl(e,t,n,Cl)},Wl=function(o,e,t,n,i,r){var a,u=o.getParent(t,o.isBlock)||e,s=function(e,t,n){var r=Lu(o),r=i?r.backwards:r.forwards;return A.from(r(e,t,function(e,t){return Fl(e.parentNode)?-1:n(i,a=e,t)},u))};return s(t,n,ql).bind(function(e){return r?s(e.container,e.offset+(i?-1:0),$l):A.some(e)}).orThunk(function(){return a?A.some({container:a,offset:i?0:a.length}):A.none()})},Kl=function(e,t,n,r,o){yn(r)&&0===r.nodeValue.length&&r[o]&&(r=r[o]);for(var i=Ul(e,r),a=0;a<i.length;a++)for(var u=0;u<t.length;u++){var s=t[u];if(!("collapsed"in s&&s.collapsed!==n.collapsed)&&e.is(i[a],s.selector))return i[a]}return r},Xl=function(t,e,n,r){var o,i,a=t.dom,u=a.getRoot();if((i=!e[0].wrapper?a.getParent(n,e[0].block,u):i)||(o=a.getParent(n,"LI,TD,TH"),i=a.getParent(yn(n)?n.parentNode:n,function(e){return e!==u&&jl(t,e)},o)),!(i=i&&e[0].wrapper?Ul(a,i,"ul,ol").reverse()[0]||i:i))for(i=n;i[r]&&!a.isBlock(i[r])&&(i=i[r],!Tl(i,"br")););return i||n},Yl=function(e,t,n,r){var o=n.parentNode;return!V(n[r])&&(!(o!==t&&!K(o)&&!e.isBlock(o))||Yl(e,t,o,r))},Gl=function(e,t,n,r,o){var i,a,u=n,s=o?"previousSibling":"nextSibling",c=e.getRoot();if(yn(n)&&!zl(n)&&(o?0<r:r<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(i=u[s];i;i=i[s]){var l=yn(i)&&!Yl(e,c,i,s);if(!Fl(i)&&(!Sn(a=i)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!zl(i,l))return u}if(u===c||u.parentNode===c){n=u;break}u=u.parentNode}return n},Jl=function(e){return Fl(e.parentNode)||Fl(e)},Ql=function(e,t,n,r){void 0===r&&(r=!1);var o=t.startContainer,i=t.startOffset,a=t.endContainer,u=t.endOffset,s=e.dom;return gn(o)&&o.hasChildNodes()&&(o=qu(o,i),yn(o)&&(i=0)),gn(a)&&a.hasChildNodes()&&(a=qu(a,t.collapsed?u:u-1),yn(a)&&(u=a.nodeValue.length)),o=Hl(s,o),a=Hl(s,a),Jl(o)&&(o=Fl(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,yn(o)&&(i=t.collapsed?o.length:0)),Jl(a)&&(a=Fl(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,yn(a)&&(u=t.collapsed?0:a.length)),t.collapsed&&(Wl(s,e.getBody(),o,i,!0,r).each(function(e){var t=e.container,e=e.offset;o=t,i=e}),Wl(s,e.getBody(),a,u,!1,r).each(function(e){var t=e.container,e=e.offset;a=t,u=e})),(n[0].inline||n[0].block_expand)&&(n[0].inline&&yn(o)&&0!==i||(o=Gl(s,n,o,i,!0)),n[0].inline&&yn(a)&&u!==a.nodeValue.length||(a=Gl(s,n,a,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=Kl(s,n,t,o,"previousSibling"),a=Kl(s,n,t,a,"nextSibling")),(n[0].block||n[0].selector)&&(o=Xl(e,n,o,"previousSibling"),a=Xl(e,n,a,"nextSibling"),n[0].block&&(s.isBlock(o)||(o=Gl(s,n,o,i,!0)),s.isBlock(a)||(a=Gl(s,n,a,u,!1)))),gn(o)&&(i=s.nodeIndex(o),o=o.parentNode),gn(a)&&(u=s.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:i,endContainer:a,endOffset:u}},Zl=function(e,t){var n=e.childNodes;return t>=n.length?t=n.length-1:t<0&&(t=0),n[t]||e},ef=function(e,t,u){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,s=function(e){var t=e[0];return 3===t.nodeType&&t===n&&r>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===i&&0<e.length&&t===o&&3===t.nodeType&&e.splice(e.length-1,1),e},c=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},t=function(e,t){do{if(e.parentNode===t)return e}while(e=e.parentNode)},a=function(e,t,n){var r=n?"nextSibling":"previousSibling",o=e;for(o.parentNode;o&&o!==t;o=i){var i=o.parentNode,a=c(o===e?o:o[r],r);a.length&&(n||a.reverse(),u(s(a)))}};if(1===n.nodeType&&n.hasChildNodes()&&(n=Zl(n,r)),1===o.nodeType&&o.hasChildNodes()&&(o=Zl(o,i-1)),n===o)return u(s([n]));for(var l=e.findCommonAncestor(n,o),f=n;f;f=f.parentNode){if(f===o)return a(n,l,!0);if(f===l)break}for(f=o;f;f=f.parentNode){if(f===n)return a(o,l);if(f===l)break}e=t(n,l)||n,t=t(o,l)||o;a(n,e,!0);e=c(e===n?e:e.nextSibling,"nextSibling",t===o?t.nextSibling:t);e.length&&u(s(e)),a(o,t)},tf=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},nf=function(e){return U($(e,function(e){e=Vu(e);return e?[vt.fromDom(e)]:[]}),jr)},rf=function(e,t){t=Cu(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:nf(e)},of=function(e){return rf(tf(e.selection.getSel()),vt.fromDom(e.getBody()))},af=function(e,t){return mr(e,"table",t)},uf=function(t){return zt(t).fold(X([t]),function(e){return[t].concat(uf(e))})},sf=function(t){return jt(t).fold(X([t]),function(e){return"br"===Nt(e)?Pt(e).map(function(e){return[t].concat(sf(e))}).getOr([]):[t].concat(sf(e))})},cf=function(n,e){return An((r=(t=e).startContainer,t=t.startOffset,yn(r)?0===t?A.some(vt.fromDom(r)):A.none():A.from(r.childNodes[t]).map(vt.fromDom)),(e=(t=e).endContainer,t=t.endOffset,yn(e)?t===e.data.length?A.some(vt.fromDom(e)):A.none():A.from(e.childNodes[t-1]).map(vt.fromDom)),function(e,t){e=H(uf(n),h(wt,e)),t=H(sf(n),h(wt,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,r},lf=function(e,t,n,r){var o=n,i=new Ar(n,o),a=de(e.schema.getMoveCaretBeforeOnEnterElements(),function(e,t){return!P(["td","th","table"],t.toLowerCase())});do{if(yn(n)&&0!==pt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},ff=function(e){e=e.selection.getSel();return e&&0<e.rangeCount},df=function(n,r){var e=of(n);0<e.length?Y(e,function(e){var t=e.dom,e=n.dom.createRng();e.setStartBefore(t),e.setEndAfter(t),r(e,!0)}):r(n.selection.getRng(),!1)},mf=function(e,t,n){t=Rs(e,t);n(t),e.moveToBookmark(t)},gf=(Pc=_t,Lc="text",{get:function(e){if(!Pc(e))throw new Error("Can only get "+Lc+" value of a "+Lc+" node");return Ic(e).getOr("")},getOption:Ic=function(e){return Pc(e)?A.from(e.dom.nodeValue):A.none()},set:function(e,t){if(!Pc(e))throw new Error("Can only set raw "+Lc+" value of a "+Lc+" node");e.dom.nodeValue=t}}),pf=function(e){return gf.get(e)},hf=function(n,r,o,i){return Bt(r).fold(function(){return"skipping"},function(e){return"br"===i||_t(t=r)&&pf(t)===$r?"valid":kt(t=r)&&bu(t,wu())?"existing":ul(r.dom)?"caret":El(n,o,i)&&El(n,Nt(e),o)?"valid":"invalid-child";var t})},vf=function(e,t,n,r){var o=t.uid,o=void 0===o?Au("mce-annotation"):o,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["uid"]),e=vt.fromTag("span",e);hu(e,wu()),On(e,""+Su(),o),On(e,""+xu(),n);var i,o=r(o,t),t=o.attributes,o=o.classes,o=void 0===o?[]:o;return Bn(e,void 0===t?{}:t),i=e,Y(o,function(e){hu(i,e)}),e},bf=function(r,e,t,n,o){var i=[],a=vf(r.getDoc(),o,t,n),u=ou(A.none()),s=function(){u.set(A.none())},c=function(e){Y(e,l)},l=function(e){switch(hf(r,e,"span",Nt(e))){case"invalid-child":s();var t=Ft(e);c(t),s();break;case"valid":var n=u.get().getOrThunk(function(){var e=Ou(a);return i.push(e),u.set(A.some(e)),e});Xt(t=e,n=n),Jt(n,t)}};return ef(r.dom,e,function(e){s(),function(e){e=I(e,vt.fromDom);c(e)}(e)}),i},yf=function(i,a,u,s){i.undoManager.transact(function(){var e,t,n=i.selection,r=n.getRng(),o=0<of(i).length;r.collapsed&&!o&&(r=Ql(e=i,t=r,[{inline:!0}]),t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)),n.getRng().collapsed&&!o?(o=vf(i.getDoc(),s,a,u.decorate),Ru(o,qr),n.getRng().insertNode(o.dom),n.select(o.dom)):mf(n,!1,function(){df(i,function(e){bf(i,e,a,u.decorate,s)})})})},Cf=function(o){var n,r=(n={},{register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return ge(n,e).map(function(e){return e.settings})}});_u(o,r);var i=ku(o);return{register:function(e,t){r.register(e,t)},annotate:function(t,n){r.lookup(t).each(function(e){yf(o,t,e,n)})},annotationChanged:function(e,t){i.addListener(e,t)},remove:function(e){Nu(o,A.some(e)).each(function(e){e=e.elements;Y(e,tn)})},getAll:function(e){var t,r,e=(t=o,e=e,t=vt.fromDom(o.getBody()),e=Cu(t,"["+xu()+'="'+e+'"]'),r={},Y(e,function(e){var t=Pn(e,Su()),n=ge(r,t).getOr([]);r[t]=n.concat([e])}),r);return ue(e,function(e){return I(e,function(e){return e.dom})})}}},wf=function(e){return{getBookmark:h(pl,e),moveToBookmark:h(hl,e)}};wf.isBookmarkNode=vl;var xf=function(e,t){for(;t&&t!==e;){if(En(t)||kn(t))return t;t=t.parentNode}return null},Sf=function(t,n,e){if(e.collapsed)return!1;if(lt.browser.isIE()&&e.startOffset===e.endOffset-1&&e.startContainer===e.endContainer){var r=e.startContainer.childNodes[e.startOffset];if(gn(r))return L(r.getClientRects(),function(e){return Hu(e,t,n)})}return L(e.getClientRects(),function(e){return Hu(e,t,n)})},Nf=function(e,t,n){return e.fire(t,n)},Ef={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||Ef.metaKeyPressed(e)},metaKeyPressed:function(e){return lt.mac?e.metaKey:e.ctrlKey&&!e.altKey}},kf=kn,_f=function(n,s){var c,l,f,d,m,g,p,h,v,b,o,y,C,w,x,S="data-mce-selected",N=s.dom,r=pt.each,E=s.getDoc(),k=document,i=Math.abs,a=Math.round,_=s.getBody(),T={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},u=function(e){return e&&("IMG"===e.nodeName||s.dom.is(e,"figure.image"))},A=function(e){return _n(e)||N.hasClass(e,"mce-preview-object")},R=function(e){var t=e.target;!function(e,t){if("longpress"!==e.type&&0!==e.type.indexOf("touch"))return u(e.target)&&!Sf(e.clientX,e.clientY,t);var n=e.touches[0];return u(e.target)&&!Sf(n.clientX,n.clientY,t)}(e,s.selection.getRng())||e.isDefaultPrevented()||s.selection.select(t)},D=function(e){return N.is(e,"figure.image")?[e.querySelector("img")]:N.hasClass(e,"mce-preview-object")&&V(e.firstElementChild)?[e,e.firstElementChild]:[e]},O=function(e){var t=Hs(s);return!!t&&("false"!==e.getAttribute("data-mce-resize")&&(e!==s.getBody()&&(N.hasClass(e,"mce-preview-object")?yt(vt.fromDom(e.firstElementChild),t):yt(vt.fromDom(e),t))))},B=function(e,t,n){V(n)&&(e=D(e),Y(e,function(e){e.style[t]||!s.schema.isValid(e.nodeName.toLowerCase(),t)?N.setStyle(e,t,n):N.setAttrib(e,t,""+n)}))},P=function(e,t,n){B(e,"width",t),B(e,"height",n)},L=function(e){var t,n=e.screenX-g,r=e.screenY-p;y=n*d[2]+h,C=r*d[3]+v,y=y<5?5:y,C=C<5?5:C,((u(c)||A(c))&&!1!==s.getParam("resize_img_proportional",!0,"boolean")?!Ef.modifierPressed(e):Ef.modifierPressed(e))&&(i(n)>i(r)?(C=a(y*b),y=a(C/b)):(y=a(C/b),C=a(y*b))),P(l,y,C),t=d.startPos.x+n,e=d.startPos.y+r,N.setStyles(f,{left:t=0<t?t:0,top:e=0<e?e:0,display:"block"}),f.innerHTML=y+" &times; "+C,d[2]<0&&l.clientWidth<=y&&N.setStyle(l,"left",void 0+(h-y)),d[3]<0&&l.clientHeight<=C&&N.setStyle(l,"top",void 0+(v-C)),(n=_.scrollWidth-w)+(r=_.scrollHeight-x)!==0&&N.setStyles(f,{left:t-n,top:e-r}),o||(r="corner-"+d.name,s.fire("ObjectResizeStart",{target:c,width:h,height:v,origin:r}),o=!0)},I=function(){var e=o;o=!1,e&&(B(c,"width",y),B(c,"height",C)),N.unbind(E,"mousemove",L),N.unbind(E,"mouseup",I),k!==E&&(N.unbind(k,"mousemove",L),N.unbind(k,"mouseup",I)),N.remove(l),N.remove(f),N.remove(m),M(c),e&&(e="corner-"+d.name,s.fire("ObjectResized",{target:c,width:y,height:C,origin:e}),N.setAttrib(c,"style",N.getAttrib(c,"style"))),s.nodeChanged()},M=function(e){j();var t=N.getPos(e,_),o=t.x,i=t.y,n=e.getBoundingClientRect(),a=n.width||n.right-n.left,u=n.height||n.bottom-n.top;c!==e&&(F(),c=e,y=C=0);t=s.fire("ObjectSelected",{target:e}),n=N.getAttrib(c,S,"1");O(e)&&!t.isDefaultPrevented()?r(T,function(n,r){var t=function(e){var t=D(c)[0];g=e.screenX,p=e.screenY,h=t.clientWidth,v=t.clientHeight,b=v/h,(d=n).name=r,d.startPos={x:a*n[0]+o,y:u*n[1]+i},w=_.scrollWidth,x=_.scrollHeight,m=N.add(_,"div",{"class":"mce-resize-backdrop"}),N.setStyles(m,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),l=A(t=c)?N.create("img",{src:lt.transparentSrc}):t.cloneNode(!0),N.addClass(l,"mce-clonedresizable"),N.setAttrib(l,"data-mce-bogus","all"),l.contentEditable="false",N.setStyles(l,{left:o,top:i,margin:0}),P(l,a,u),l.removeAttribute(S),_.appendChild(l),N.bind(E,"mousemove",L),N.bind(E,"mouseup",I),k!==E&&(N.bind(k,"mousemove",L),N.bind(k,"mouseup",I)),f=N.add(_,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+v)},e=N.get("mceResizeHandle"+r);e&&N.remove(e),e=N.add(_,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),11===lt.ie&&(e.contentEditable=!1),N.bind(e,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),t(e)}),n.elm=e,N.setStyles(e,{left:a*n[0]+o-e.offsetWidth/2,top:u*n[1]+i-e.offsetHeight/2})}):F(),N.getAttrib(c,S)||c.setAttribute(S,n)},F=function(){j(),c&&c.removeAttribute(S),ae(T,function(e,t){t=N.get("mceResizeHandle"+t);t&&(N.unbind(t),N.remove(t))})},U=function(e){var t=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};o||s.removed||(r(N.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute(S)}),e="mousedown"===e.type?e.target:n.getNode(),t(e=N.$(e).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],_)&&(H(),t(n.getStart(!0),e)&&t(n.getEnd(!0),e))?M(e):F())},z=function(e){return kf(xf(s.getBody(),e))},j=function(){ae(T,function(e){e.elm&&(N.unbind(e.elm),delete e.elm)})},H=function(){try{s.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};s.on("init",function(){var e;H(),(lt.browser.isIE()||lt.browser.isEdge())&&(s.on("mousedown click",function(e){var t=e.target,n=t.nodeName;o||!/^(TABLE|IMG|HR)$/.test(n)||z(t)||(2!==e.button&&s.selection.select(t,"TABLE"===n),"mousedown"===e.type&&s.nodeChanged())}),N.bind(_,"mscontrolselect",e=function(e){var t=function(e){kr.setEditorTimeout(s,function(){return s.selection.select(e)})};if(z(e.target)||_n(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}),s.on("remove",function(){return N.unbind(_,"mscontrolselect",e)}));var t=kr.throttle(function(e){s.composing||U(e)});s.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",t),s.on("keyup compositionend",function(e){c&&"TABLE"===c.nodeName&&t(e)}),s.on("hide blur",F),s.on("contextmenu longpress",R,!0)}),s.on("remove",j);return{isResizable:O,showResizeRect:M,hideResizeRect:F,updateResizeRect:U,destroy:function(){c=l=m=null}}},Tf=function(e){return En(e)||kn(e)},Af=function(e,t,n){var r,o,i=n;if(i.caretPositionFromPoint)(o=i.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(a){r=function(e,n,t){var r=t.elementFromPoint(e,n),o=t.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=t.body),o.moveToElementText(r),0<(r=(r=pt.toArray(o.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(e,n),o.collapse(!0),o}catch(i){}}return null}(e,t,n)}return e=r,t=n.body,n=e&&e.parentElement?e.parentElement():null,kn(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,Tf))?null:e}return r},Rf=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Df=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},Of=function(e){return e&&"TABLE"===e.nodeName},Bf=function(e,t,n){for(var r=new Ar(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Sn(t))return!0},Pf=function(e,t,n,r,o){var i,a,u=e.getRoot(),s=e.schema.getNonEmptyElements(),c=e.getParent(o.parentNode,e.isBlock)||u;if(r&&Sn(o)&&t&&e.isEmpty(c))return A.some(cs(o.parentNode,e.nodeIndex(o)));for(var l,f,d=new Ar(o,c);a=d[r?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||(f=u,Qr(l=a)&&!1===Df(l,f,ul)))return A.none();if(yn(a)&&0<a.nodeValue.length)return!1===function(e,t,n){return Df(e,t,function(e){return e.nodeName===n})}(a,u,"A")?A.some(cs(a,r?a.nodeValue.length:0)):A.none();if(e.isBlock(a)||s[a.nodeName.toLowerCase()])return A.none();i=a}return n&&i?A.some(cs(i,0)):A.none()},Lf=function(e,t,n,r){var o,i=e.getRoot(),a=!1,u=r[(n?"start":"end")+"Container"],s=r[(n?"start":"end")+"Offset"],r=gn(u)&&s===u.childNodes.length,c=e.schema.getNonEmptyElements(),l=n;if(Qr(u))return A.none();if(gn(u)&&s>u.childNodes.length-1&&(l=!1),wn(u)&&(u=i,s=0),u===i){if(l&&(f=u.childNodes[0<s?s-1:0])){if(Qr(f))return A.none();if(c[f.nodeName]||Of(f))return A.none()}if(u.hasChildNodes()){if(s=Math.min(!l&&0<s?s-1:s,u.childNodes.length-1),u=u.childNodes[s],s=yn(u)&&r?u.data.length:0,!t&&u===i.lastChild&&Of(u))return A.none();if(function(e,t){for(;t&&t!==e;){if(kn(t))return!0;t=t.parentNode}return!1}(i,u)||Qr(u))return A.none();if(u.hasChildNodes()&&!1===Of(u)){var f=u,d=new Ar(u,i);do{if(kn(f)||Qr(f)){a=!1;break}if(yn(f)&&0<f.nodeValue.length){s=l?0:f.nodeValue.length,u=f,a=!0;break}if(c[f.nodeName.toLowerCase()]&&(!(o=f)||!/^(TD|TH|CAPTION)$/.test(o.nodeName))){s=e.nodeIndex(f),u=f.parentNode,l||s++,a=!0;break}}while(f=l?d.next():d.prev())}}}return t&&(yn(u)&&0===s&&Pf(e,r,t,!0,u).each(function(e){u=e.container(),s=e.offset(),a=!0}),gn(u)&&(!(f=(f=u.childNodes[s])||u.childNodes[s-1])||!Sn(f)||(n="A",(i=f).previousSibling&&i.previousSibling.nodeName===n)||Bf(e,f,!1)||Bf(e,f,!0)||Pf(e,r,t,!0,f).each(function(e){u=e.container(),s=e.offset(),a=!0}))),l&&!t&&yn(u)&&s===u.nodeValue.length&&Pf(e,r,t,!1,u).each(function(e){u=e.container(),s=e.offset(),a=!0}),a?A.some(cs(u,s)):A.none()},If=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=cs.fromRangeStart(t);return Lf(e,n,!0,r).each(function(e){n&&cs.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||Lf(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Rf(t,r)?A.none():A.some(r)},Mf=function(e,t){return e.splitText(t)},Ff=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,e=e.endOffset;return t===r&&yn(t)?0<n&&n<t.nodeValue.length&&(t=(r=Mf(t,n)).previousSibling,n<e?(t=r=Mf(r,e-=n).previousSibling,e=r.nodeValue.length,n=0):e=0):(yn(t)&&0<n&&n<t.nodeValue.length&&(t=Mf(t,n),n=0),yn(r)&&0<e&&e<r.nodeValue.length&&(e=(r=Mf(r,e).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:e}},ct=function(n){return{walk:function(e,t){return ef(n,e,t)},split:Ff,normalize:function(t){return If(n,t).fold(N,function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}};ct.compareRanges=Rf,ct.getCaretRangeFromPoint=Af,ct.getSelectedNode=Vu,ct.getNode=qu;var Uf,zf,jf,Hf,Vf,qf=(Uf="height",zf=function(e){var t=e.dom;return nn(e)?t.getBoundingClientRect().height:t.offsetHeight},{set:function(e,t){if(!w(t)&&!t.match(/^[0-9]+$/))throw new Error(Uf+".set accepts only positive integer values. Value was "+t);e=e.dom;Rn(e)&&(e.style[Uf]=t+"px")},get:jf=function(e){var t=zf(e);if(t<=0||null===t){e=Fn(e,Uf);return parseFloat(e)||0}return t},getOuter:jf,aggregate:Hf=function(n,e){return j(e,function(e,t){t=Fn(n,t),t=t===undefined?0:parseInt(t,10);return isNaN(t)?e:e+t},0)},max:function(e,t,n){n=Hf(e,n);return n<t?t-n:0}}),$f=function(n,e){return n.view(e).fold(X([]),function(e){var t=n.owner(e),t=$f(n,t);return[e].concat(t)})},Wf=Object.freeze({__proto__:null,view:function(e){return(e.dom===document?A.none():A.from(null===(e=e.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(vt.fromDom)},owner:Dt}),Kf=function(e){var t=vt.fromDom(document),n=sn(t),t=function(e,t){e=t.owner(e);return $f(t,e)}(e,Wf),e=un(e),t=z(t,function(e,t){t=un(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0});return on(t.left+e.left+n.left,t.top+e.top+n.top)},Xf=function(e){return"textarea"===Nt(e)},Yf=function(e,t){var n=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom)return on(n.offsetLeft,n.offsetTop);var i=an(null==r?void 0:r.pageYOffset,o.scrollTop),t=an(null==r?void 0:r.pageXOffset,o.scrollLeft),r=an(o.clientTop,n.clientTop),n=an(o.clientLeft,n.clientLeft);return un(e).translate(t-n,i-r)}(e),r=qf.get(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},Gf=function(e,t){var t=function(e,t){var n=Ft(e);if(0===n.length||Xf(e))return{element:e,offset:t};if(t<n.length&&!Xf(n[t]))return{element:n[t],offset:0};n=n[n.length-1];return Xf(n)?{element:e,offset:t}:"img"===Nt(n)?{element:n,offset:1}:_t(n)?{element:n,offset:pf(n).length}:{element:n,offset:Ft(n).length}}(e,t),n=vt.fromHtml('<span data-mce-bogus="all">\ufeff</span>');return Xt(t.element,n),Yf(n,function(){return en(n)})},Jf=function(n,r,o,i){td(n,function(e,t){return Zf(n,r,o,i)},o)},Qf=function(e,t,n,r,o){var i={elm:r.element.dom,alignToTop:o};e.fire("ScrollIntoView",i).isDefaultPrevented()||(n(t,sn(t).top,r,o),e.fire("AfterScrollIntoView",i))},Zf=function(e,t,n,r){var o=vt.fromDom(e.getBody()),i=vt.fromDom(e.getDoc());o.dom.offsetWidth;n=Gf(vt.fromDom(n.startContainer),n.startOffset);Qf(e,i,t,n,r),n.cleanup()},ed=function(e,t,n,r){var o=vt.fromDom(e.getDoc());Qf(e,o,n,Yf(vt.fromDom(t),ee),r)},td=function(e,t,n){var r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;t(vt.fromDom(r),vt.fromDom(i));t=e.dom.createRng();t.setStart(r,o),t.setEnd(i,a),e.selection.setRng(n)},nd=function(e,t,n,r){var o=e.pos;n?cn(o.left,o.top,r):(e=o.top-t+e.height,cn(o.left,e,r))},rd=function(e,t,n,r,o){var i=n+t,a=r.pos.top,u=r.bottom,s=n<=u-a;a<t?nd(r,n,!1!==o,e):i<a?nd(r,n,s?!1!==o:!0===o,e):i<u&&!s&&nd(r,n,!0===o,e)},od=function(e,t,n,r){var o=e.dom.defaultView.innerHeight;rd(e,t,o,n,r)},id=function(e,t,n,r){var o=e.dom.defaultView.innerHeight;rd(e,t,o,n,r);t=Kf(n.element),o=dn(window);t.top<o.y?ln(n.element,!1!==r):t.top>o.bottom&&ln(n.element,!0===r)},ad=function(e,t,n){return Jf(e,od,t,n)},ud=function(e,t,n){return ed(e,t,od,n)},sd=function(e,t,n){return Jf(e,id,t,n)},cd=function(e,t,n){return ed(e,t,id,n)},ld=function(e,t,n){(e.inline?ad:sd)(e,t,n)},fd=function(e){var t=qt(e).dom;return e.dom===t.activeElement},dd=function(e){return void 0===e&&(e=vt.fromDom(document)),A.from(e.dom.activeElement).map(vt.fromDom)},k=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},o=n([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),md=(o.before,o.on,o.after,function(e){return e.fold(g,g,g)}),gd=n([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),pd={domRange:gd.domRange,relative:gd.relative,exact:gd.exact,exactFromRange:function(e){return gd.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){e=e.match({domRange:function(e){return vt.fromDom(e.startContainer)},relative:function(e,t){return md(e)},exact:function(e,t,n,r){return e}});return Ot(e)},range:k},hd=st().browser,vd=function(e,t){t=_t(t)?pf(t).length:Ft(t).length+1;return t<e?t:e<0?0:e},bd=function(e){return pd.range(e.start,vd(e.soffset,e.start),e.finish,vd(e.foffset,e.finish))},yd=function(e,t){return!mn(t.dom)&&(St(e,t)||wt(e,t))},Cd=function(t){return function(e){return yd(t,e.start)&&yd(t,e.finish)}},wd=function(e){return!0===e.inline||hd.isIE()},xd=function(e){return pd.range(vt.fromDom(e.startContainer),e.startOffset,vt.fromDom(e.endContainer),e.endOffset)},Sd=function(e){return function(e){e=e.getSelection();return(e&&0!==e.rangeCount?A.from(e.getRangeAt(0)):A.none()).map(xd)}(Ot(e).dom).filter(Cd(e))},Nd=function(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),A.some(t)}catch(n){return A.none()}},Ed=function(e){var t=wd(e)?Sd(vt.fromDom(e.getBody())):A.none();e.bookmark=t.isSome()?t:e.bookmark},kd=function(n){return(n.bookmark||A.none()).bind(function(e){return t=vt.fromDom(n.getBody()),A.from(e).filter(Cd(t)).map(bd);var t}).bind(Nd)},_d={isEditorUIElement:function(e){e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Td=function(t,e){var n,r;st().browser.isIE()?(r=t).on("focusout",function(){Ed(r)}):(n=e,t.on("mouseup touchend",function(e){n.throttle()})),t.on("keyup NodeChange",function(e){"nodechange"===(e=e).type&&e.selectionChange||Ed(t)})},Ad=function(r){var o=lu(function(){Ed(r)},0);r.on("init",function(){var e,t,n;r.inline&&(e=r,t=o,n=function(){t.throttle()},Qa.DOM.bind(document,"mouseup",n),e.on("remove",function(){Qa.DOM.unbind(document,"mouseup",n)})),Td(r,o)}),r.on("remove",function(){o.cancel()})},Rd=Qa.DOM,Dd=function(t,e){var n=t.getParam("custom_ui_selector","","string");return null!==Rd.getParent(e,function(e){return _d.isEditorUIElement(e)||!!n&&t.dom.is(e,n)})},Od=function(n,e){var t=e.editor;Ad(t),t.on("focusin",function(){var e=n.focusedEditor;e!==t&&(e&&e.fire("blur",{focusedEditor:t}),n.setActive(t),(n.focusedEditor=t).fire("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",function(){kr.setEditorTimeout(t,function(){var e=n.focusedEditor;Dd(t,function(e){try{var t=qt(vt.fromDom(e.getElement()));return dd(t).fold(function(){return document.body},function(e){return e.dom})}catch(n){return document.body}}(t))||e!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})}),Vf||(Vf=function(e){var t=n.activeEditor;t&&!function(e){if(Vt()&&V(e.target)){var t=vt.fromDom(e.target);if(kt(t)&&Kt(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return te(t)}}return A.from(e.target)}(e).each(function(e){e.ownerDocument===document&&(e===document.body||Dd(t,e)||n.focusedEditor!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null))})},Rd.bind(document,"focusin",Vf))},Bd=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Rd.unbind(document,"focusin",Vf),Vf=null)},Pd=function(t,e){return((e=e).collapsed?A.from(qu(e.startContainer,e.startOffset)).map(vt.fromDom):A.none()).bind(function(e){return zr(e)?A.some(e):!1===St(t,e)?A.some(t):A.none()})},Ld=function(t,e){Pd(vt.fromDom(t.getBody()),e).bind(function(e){return ol(e.dom)}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},Id=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Md=function(e){return fd(e)||dd(qt(t=e)).filter(function(e){return t.dom.contains(e.dom)}).isSome();var t},Fd=function(t){var e=qt(vt.fromDom(t.getElement()));return dd(e).filter(function(e){return!function(e){e=e.classList;return e!==undefined&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))}(e.dom)&&Dd(t,e.dom)}).isSome()},Ud=function(e){return e.inline?function(e){e=e.getBody();return e&&Md(vt.fromDom(e))}(e):(e=e).iframeElement&&fd(vt.fromDom(e.iframeElement))},zd=function(e){return e.editorManager.setActive(e)},jd=function(e,t){e.removed||(t?zd:function(t){var e=t.selection,n=t.getBody(),r=e.getRng();t.quirks.refreshContentEditable(),t.bookmark!==undefined&&!1===Ud(t)&&kd(t).each(function(e){t.selection.setRng(e),r=e});var o,e=(o=t,e=e.getNode(),o.dom.getParent(e,function(e){return"true"===o.dom.getContentEditable(e)}));if(t.$.contains(n,e))return Id(e),Ld(t,r),zd(t);t.inline||(lt.opera||Id(n),t.getWin().focus()),(lt.gecko||t.inline)&&(Id(n),Ld(t,r)),zd(t)})(e)},Hd=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return A.from(i).map(vt.fromDom).map(function(e){return r&&t.collapsed?e:Ut(e,o(e,a)).getOr(e)}).bind(function(e){return kt(e)?A.some(e):Bt(e).filter(kt)}).map(function(e){return e.dom}).getOr(e)},Vd=function(e,t,n){return Hd(e,t,!0,n,function(e,t){return Math.min(e.dom.childNodes.length,t)})},qd=function(e,t,n){return Hd(e,t,!1,n,function(e,t){return 0<t?t-1:t})},$d=function(e,t){for(var n=e;e&&yn(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Wd=function(n,e){return I(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})},Kd={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Xd=function(e,t,n){var r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){var i=e[o];if(i)return i;for(var a=e.parent;a&&a!==t;a=a.parent)if(i=a[o])return i}},Yd=function(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},Gd=(Jd.create=function(e,t){var n=new Jd(e,Kd[e]||1);return t&&ae(t,function(e,t){n.attr(t,e)}),n},Jd.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},Jd.prototype.attr=function(e,t){var n,r=this;if("string"!=typeof e)return e!==undefined&&null!==e&&ae(e,function(e,t){r.attr(t,e)}),r;if(n=r.attributes){if(t===undefined)return n.map[e];if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}return r}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}},Jd.prototype.clone=function(){var e,t=new Jd(this.name,this.type);if(e=this.attributes){var n=[];n.map={};for(var r=0,o=e.length;r<o;r++){var i=e[r];"id"!==i.name&&(n[n.length]={name:i.name,value:i.value},n.map[i.name]=i.value)}t.attributes=n}return t.value=this.value,t.shortEnded=this.shortEnded,t},Jd.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},Jd.prototype.unwrap=function(){for(var e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()},Jd.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},Jd.prototype.append=function(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},Jd.prototype.insert=function(e,t,n){e.parent&&e.remove();var r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},Jd.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=Xd(n,this))n.name===e&&t.push(n);return t},Jd.prototype.empty=function(){if(this.firstChild){for(var e=[],t=this.firstChild;t;t=Xd(t,this))e.push(t);for(var n=e.length;n--;)(t=e[n]).parent=t.firstChild=t.lastChild=t.next=t.prev=null}return this.firstChild=this.lastChild=null,this},Jd.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var r=this.firstChild;if(Yd(this))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(e[r.name])return!1;if(Yd(r))return!1}if(8===r.type)return!1;if(3===r.type&&!function(e){if(!yo(e.value))return!1;var t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)}(r))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&yo(r.value))return!1;if(n&&n(r))return!1}while(r=Xd(r,this));return!0},Jd.prototype.walk=function(e){return Xd(this,null,e)},Jd);function Jd(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}var Qd=function(e,t){return e.replace(t.re,function(e){return ge(t.uris,e).getOr(e)})},Zd=["img","video"],em=function(e,t,n){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,n=n,!(K(e)?P(Zd,n):e)&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t))},tm=function(e,t,n){var r,o,i=1,a=e.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_:.]+)(\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g;for(u.lastIndex=r=n;o=u.exec(t);){if(r=u.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in a)continue;i++}if(0===i)break}return r},nm=function($,W){void 0===W&&(W=Zo()),!1!==($=$||{}).fix_self_closing&&($.fix_self_closing=!0);var K=$.comment||ee,X=$.cdata||ee,Y=$.text||ee,G=$.start||ee,J=$.end||ee,Q=$.pi||ee,Z=$.doctype||ee,n=function(c,e){void 0===e&&(e="html");for(var t,i,l,n,r,o,f,a,u,s,d,m,g,p,h,v,b,y,C=c.html,w=0,x=[],S=0,N=Vo.decode,E=pt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),k=/((java|vb)script|mhtml):/i,_="html"===e?0:1,T=function(e){for(var t,n=x.length;n--&&x[n].name!==e;);if(0<=n){for(t=x.length-1;n<=t;t--)(e=x[t]).valid&&J(e.name);x.length=n}},A=function(e,t){return Y(Qd(e,c),t)},R=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),$.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),K(Qd(e,c)))},D=function(e,t){var n=e||"",r=!He(n,"--"),o=function(e,t,n){void 0===n&&(n=0);var r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){var o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(t){var i=r.indexOf(">",n);return-1!==i?i:r.length}i=/--!?>/g;i.lastIndex=n;e=i.exec(e);return e?e.index+e[0].length:r.length}(C,r,t);return e=C.substr(t,o-t),R(r?n+e:e),o+1},O=function(e,t,n,r,o){var i,a;if(t=t.toLowerCase(),o=t in M?t:N(n||r||o||""),n=Qd(o,c),F&&!f&&!1==(0===(u=t).indexOf("data-")||0===u.indexOf("aria-"))){if(!(i=g[t])&&p){for(a=p.length;a--&&!(i=p[a]).pattern.test(t););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}if(E[t]&&!$.allow_script_urls){var u=n.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(s){u=unescape(u)}if(k.test(u))return;if(em($,u,e))return}f&&(t in E||0===t.indexOf("on"))||(l.map[t]=n,l.push({name:t,value:n}))},B=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,L=W.getShortEndedElements(),I=$.self_closing_elements||W.getSelfClosingElements(),M=W.getBoolAttrs(),F=$.validate,U=$.remove_internals,z=$.fix_self_closing,j=W.getSpecialElements(),H=C+">";t=B.exec(H);){var V=t[0];if(w<t.index&&A(N(C.substr(w,t.index-w))),i=t[7])T(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i);else if(i=t[8]){if(t.index+V.length>C.length){A(N(C.substr(t.index))),w=t.index+V.length;continue}a=(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i)in L,z&&I[i]&&0<x.length&&x[x.length-1].name===i&&T(i);var q=function(e,t){e=e.exec(t);if(e){t=e[1],e=e[2];return"string"==typeof t&&"data-mce-bogus"===t.toLowerCase()?e:null}return null}(P,t[9]);if(null!==q){if("all"===q){w=tm(W,C,B.lastIndex),B.lastIndex=w;continue}s=!1}if(!F||(u=W.getElementRule(i))){if(s=!0,F&&(g=u.attributes,p=u.attributePatterns),(m=t[9])?((f=-1!==m.indexOf("data-mce-type"))&&U&&(s=!1),(l=[]).map={},m.replace(P,function(e,t,n,r,o){return O(i,t,n,r,o),""})):(l=[]).map={},F&&!f){if(h=u.attributesRequired,v=u.attributesDefault,b=u.attributesForced,u.removeEmptyAttrs&&!l.length&&(s=!1),b)for(n=b.length;n--;)o=(d=b[n]).name,"{$uid}"===(y=d.value)&&(y="mce_"+S++),l.map[o]=y,l.push({name:o,value:y});if(v)for(n=v.length;n--;)(o=(d=v[n]).name)in l.map||("{$uid}"===(y=d.value)&&(y="mce_"+S++),l.map[o]=y,l.push({name:o,value:y}));if(h){for(n=h.length;n--&&!(h[n]in l.map););-1===n&&(s=!1)}if(d=l.map["data-mce-bogus"]){if("all"===d){w=tm(W,C,B.lastIndex),B.lastIndex=w;continue}s=!1}}s&&G(i,l,a)}else s=!1;if(q=j[i]){q.lastIndex=w=t.index+V.length,w=(t=q.exec(C))?(s&&(r=C.substr(w,t.index-w)),t.index+t[0].length):(r=C.substr(w),C.length),s&&(0<r.length&&A(r,!0),J(i)),B.lastIndex=w;continue}a||(m&&m.indexOf("/")===m.length-1?s&&J(i):x.push({name:i,valid:s}))}else if(i=t[1])R(i);else if(i=t[2]){if(!(1==_||$.preserve_cdata||0<x.length&&W.isValidChild(x[x.length-1].name,"#cdata"))){w=D("",t.index+2),B.lastIndex=w;continue}X(i)}else if(i=t[3])Z(i);else{if((i=t[4])||"<!"===V){w=D(i,t.index+V.length),B.lastIndex=w;continue}if(i=t[5]){if(1!=_){w=D("?",t.index+2),B.lastIndex=w;continue}Q(i,t[6])}}w=t.index+V.length}for(w<C.length&&A(N(C.substr(w))),n=x.length-1;0<=n;n--)(i=x[n]).valid&&J(i.name)};return{parse:function(e,t){void 0===t&&(t="html"),n(function(e){for(var t,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,r=[],o={},i=Au("img"),a=0,u=0;t=n.exec(e);){var s=t[0],c=i+"_"+u++;o[c]=s,a<t.index&&r.push(e.substr(a,t.index-a)),r.push(c),a=t.index+s.length}var l=new RegExp(i+"_[0-9]+","g");return 0===a?{prefix:i,uris:o,html:e,re:l}:(a<e.length&&r.push(e.substr(a)),{prefix:i,uris:o,html:r.join(""),re:l})}(e),t)}}};nm.findEndTag=tm;var rm=function(e,t){for(var n,r,o,i=t,a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=e.schema,i=function(e,t){e=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(e,"")}(e.getTempAttrs(),i),s=u.getShortEndedElements();o=a.exec(i);)n=a.lastIndex,r=o[0].length,o=s[o[1]]?n:nm.findEndTag(u,i,n),i=i.substring(0,n-r)+i.substring(o),a.lastIndex=n-r;return Kr(i)},om=rm,im=function(e,t,n,r){t=t.no_events?t:e.fire("BeforeGetContent",Ee(Ee({},t),{format:n,get:!0,getInner:!0})),n="raw"===t.format?pt.trim(om(e.serializer,r.innerHTML)):"text"===t.format?e.dom.isEmpty(r)?"":Kr(r.innerText||r.textContent):"tree"===t.format?e.serializer.serialize(r,t):function(e,t){e=Ls(e),e=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(e,"")}(e,e.serializer.serialize(r,t));return P(["text","tree"],t.format)||Hr(vt.fromDom(r))?t.content=n:t.content=pt.trim(n),(t.no_events?t:e.fire("GetContent",t)).content},am=pt.each,um=function(o){return{compare:function(e,t){if(e.nodeName!==t.nodeName)return!1;var n=function(t){var n={};return am(o.getAttribs(t),function(e){e=e.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(n[e]=o.getAttrib(t,e))}),n},r=function(e,t){var n,r;for(r in e)if(pe(e,r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(pe(t,r))return!1;return!0};return!!r(n(e),n(t))&&(!!r(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))&&(!vl(e)&&!vl(t)))}}},sm=pt.makeMap,cm=function(e){var u=[],s=(e=e||{}).indent,c=sm(e.indent_before||""),l=sm(e.indent_after||""),f=Vo.getEncodeFunc(e.entity_encoding||"raw",e.entities),d="html"===e.element_format;return{start:function(e,t,n){var r,o,i,a;if(s&&c[e]&&0<u.length&&0<(a=u[u.length-1]).length&&"\n"!==a&&u.push("\n"),u.push("<",e),t)for(r=0,o=t.length;r<o;r++)i=t[r],u.push(" ",i.name,'="',f(i.value,!0),'"');u[u.length]=!n||d?">":" />",n&&s&&l[e]&&0<u.length&&0<(a=u[u.length-1]).length&&"\n"!==a&&u.push("\n")},end:function(e){var t;u.push("</",e,">"),s&&l[e]&&0<u.length&&0<(t=u[u.length-1]).length&&"\n"!==t&&u.push("\n")},text:function(e,t){0<e.length&&(u[u.length]=t?e:f(e))},cdata:function(e){u.push("<![CDATA[",e,"]]>")},comment:function(e){u.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?u.push("<?",e," ",f(t),"?>"):u.push("<?",e,"?>"),s&&u.push("\n")},doctype:function(e){u.push("<!DOCTYPE",e,">",s?"\n":"")},reset:function(){u.length=0},getContent:function(){return u.join("").replace(/\n$/,"")}}},lm=function(t,m){void 0===m&&(m=Zo());var g=cm(t);(t=t||{}).validate=!("validate"in t)||t.validate;return{serialize:function(e){var l=t.validate,f={3:function(e){g.text(e.value,e.raw)},8:function(e){g.comment(e.value)},7:function(e){g.pi(e.name,e.value)},10:function(e){g.doctype(e.value)},4:function(e){g.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;d(e),e=e.next;);}};g.reset();var d=function(e){var t,n,r,o,i,a,u,s,c=f[e.type];if(c)c(e);else{if(t=e.name,c=e.shortEnded,n=e.attributes,l&&n&&1<n.length&&((i=[]).map={},s=m.getElementRule(e.name))){for(a=0,u=s.attributesOrder.length;a<u;a++)(r=s.attributesOrder[a])in n.map&&(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));for(a=0,u=n.length;a<u;a++)(r=n[a].name)in i.map||(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));n=i}if(g.start(e.name,n,c),!c){if(e=e.firstChild)for(;d(e),e=e.next;);g.end(t)}}};return 1!==e.type||t.inner?f[11](e):d(e),g.getContent()}}},fm=new Set;Y(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(e){fm.add(e)});var dm,mm,gm=["font","text-decoration","text-emphasis"],pm=function(e,t){return oe(e.parseStyle(e.getAttrib(t,"style")))},hm=function(e,t){return G(pm(e,t),function(e){return!fm.has(e)})},vm=function(n,r,o){var e=pm(n,r),i=pm(n,o),a=function(e){var t=n.getStyle(r,e),e=n.getStyle(o,e);return Ke(t)&&Ke(e)&&t!==e};return L(e,function(t){var e=function(e){return L(e,function(e){return e===t})};if(e(i)||!e(gm))return a(t);e=U(i,function(t){return L(gm,function(e){return He(t,e)})});return L(e,a)})},Xe=function(n,r,o){return A.from(o.container()).filter(yn).exists(function(e){var t=n?0:-1;return r(e.data.charAt(o.offset()+t))})},bm=h(Xe,!0,yl),ym=h(Xe,!1,yl),Cm=function(e){e=e.container();return yn(e)&&(0===e.data.length||Wr(e.data)&&wf.isBookmarkNode(e.parentNode))},Ve=function(t,n){return function(e){return A.from(Sc(t?0:-1,e)).filter(n).isSome()}},o=function(e){return Nn(e)&&"block"===Fn(vt.fromDom(e),"display")},k=function(e){return kn(e)&&!(gn(e=e)&&"all"===e.getAttribute("data-mce-bogus"))},wm=Ve(!0,o),xm=Ve(!1,o),Sm=Ve(!0,_n),Nm=Ve(!1,_n),Em=Ve(!0,vn),km=Ve(!1,vn),_m=Ve(!0,k),Tm=Ve(!1,k),Am=function(e){var t=Cu(e,"br"),e=U(function(e){for(var t=[],n=e.dom;n;)t.push(vt.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Ir);t.length===e.length&&Y(e,en)},Rm=function(e){Zt(e),Jt(e,vt.fromHtml('<br data-mce-bogus="1">'))},Dm=function(n){jt(n).each(function(t){Pt(t).each(function(e){Pr(n)&&Ir(t)&&Pr(e)&&en(t)})})},Om=function(e,t,n){return St(t,e)?function(e,t){for(var n=m(t)?t:N,r=e.dom,o=[];null!==r.parentNode&&r.parentNode!==undefined;){var i=r.parentNode,a=vt.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,function(e){return n(e)||wt(e,t)}).slice(0,-1):[]},Bm=function(e,t){return Om(e,t,N)},Pm=function(e,t){return[e].concat(Bm(e,t))},Lm=function(e,t,n){return el(e,t,n,Cm)},Im=function(e,t){return H(Pm(vt.fromDom(t.container()),e),Pr)},Xe=function(e,n,r){return Lm(e,n.dom,r).forall(function(t){return Im(n,r).fold(function(){return!1===xc(t,r,n.dom)},function(e){return!1===xc(t,r,n.dom)&&St(e,vt.fromDom(t.container()))})})},o=function(t,n,r){return Im(n,r).fold(function(){return Lm(t,n.dom,r).forall(function(e){return!1===xc(e,r,n.dom)})},function(e){return Lm(t,e.dom,r).isNone()})},Mm=h(o,!1),Fm=h(o,!0),Um=h(Xe,!1),zm=h(Xe,!0),jm=function(e){return Rc(e).exists(Ir)},Hm=function(e,t,n){var r=U(Pm(vt.fromDom(n.container()),t),Pr),t=te(r).getOr(t);return Qc(e,t.dom,n).filter(jm)},Vm=function(e,t){return Rc(t).exists(Ir)||Hm(!0,e,t).isSome()},qm=function(e,t){return A.from(t.getNode(!0)).map(vt.fromDom).exists(Ir)||Hm(!1,e,t).isSome()},$m=h(Hm,!1),Wm=h(Hm,!0),Km=function(e){return cs.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},Xm=function(e,t){t=U(Pm(vt.fromDom(t.container()),e),Pr);return te(t).getOr(e)},Ym=function(e,t){return Km(t)?ym(t):ym(t)||rl(Xm(e,t).dom,t).exists(ym)},Gm=function(e,t){return Km(t)?bm(t):bm(t)||nl(Xm(e,t).dom,t).exists(bm)},Jm=function(e){return Rc(e).bind(function(e){return fr(e,kt)}).exists(function(e){return e=Fn(e,"white-space"),P(["pre","pre-wrap"],e)})},Qm=function(e,t){return rl(e.dom,t).isNone()||nl(e.dom,t).isNone()||Mm(e,t)||Fm(e,t)||qm(e,t)||Vm(e,t)},Zm=function(e,t){return!Jm(t)&&(Mm(e,t)||Um(e,t)||qm(e,t)||Ym(e,t))},eg=function(e,t){return!Jm(t)&&(Fm(e,t)||zm(e,t)||Vm(e,t)||Gm(e,t))},tg=function(e,t){return Zm(e,t)||eg(e,(e=(n=t).container(),t=n.offset(),yn(e)&&t<e.data.length?cs(e,t+1):n));var n},ng=function(e,t){return bl(e.charAt(t))},rg=function(e){e=e.container();return yn(e)&&je(e.data,qr)},og=function(e){var n,t=e.data,r=(n=t.split(""),I(n,function(e,t){return bl(e)&&0<t&&t<n.length-1&&Cl(n[t-1])&&Cl(n[t+1])?" ":e}).join(""));return r!==t&&(e.data=r,!0)},ig=function(a,e){return A.some(e).filter(rg).bind(function(e){var t,n,r,o,i=e.container();return(t=a,r=(n=i).data,o=cs(n,0),(!ng(r,0)||tg(t,o)?og(i):(n.data=" "+r.slice(1),!0))||(o=a,r=(n=i).data,i=cs(n,r.length-1),!(!ng(r,r.length-1)||tg(o,i))&&(n.data=r.slice(0,-1)+" ",!0)))?A.some(e):A.none()})},ag=function(t){var e=vt.fromDom(t.getBody());t.selection.isCollapsed()&&ig(e,cs.fromRangeStart(t.selection.getRng())).each(function(e){t.selection.setRng(e.toRange())})},ug=function(e,t,n){var r,o,i,a,u,s;0!==n&&(o=vt.fromDom(e),i=lr(o,Pr).getOr(o),r=e.data.slice(t,t+n),o=t+n>=e.data.length&&eg(i,cs(e,e.data.length)),i=0===t&&Zm(i,cs(e,0)),e.replaceData(t,n,(u=i,s=o,j(a=r,function(e,t){return yl(t)||bl(t)?e.previousCharIsSpace||""===e.str&&u||e.str.length===a.length-1&&s?{previousCharIsSpace:!1,str:e.str+qr}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str)))},sg=function(e,t){var n=e.data.slice(t),n=n.length-$e(n).length;return ug(e,t,n)},cg=function(e,t){var n=e.data.slice(0,t),n=n.length-We(n).length;return ug(e,t-n,n)},lg=function(e,t,n,r){void 0===r&&(r=!0);var o=We(e.data).length,i=r?e:t,e=r?t:e;return r?i.appendData(e.data):i.insertData(0,e.data),en(vt.fromDom(e)),n&&sg(i,o),i},fg=function(e,t){return r=e,o=(n=t).container(),e=n.offset(),!1===cs.isTextPosition(n)&&o===r.parentNode&&e>cs.before(r).offset()?cs(t.container(),t.offset()-1):t;var n,r,o},dg=function(e){return po(e.previousSibling)?A.some((t=e.previousSibling,yn(t)?cs(t,t.data.length):cs.after(t))):e.previousSibling?il(e.previousSibling):A.none();var t},mg=function(e){return po(e.nextSibling)?A.some((t=e.nextSibling,yn(t)?cs(t,0):cs.before(t))):e.nextSibling?ol(e.nextSibling):A.none();var t},gg=function(r,o){return dg(o).orThunk(function(){return mg(o)}).orThunk(function(){return e=r,t=o,n=cs.before(t.previousSibling||t.parentNode),rl(e,n).fold(function(){return nl(e,cs.after(t))},A.some);var e,t,n})},pg=function(n,r){return mg(r).orThunk(function(){return dg(r)}).orThunk(function(){return t=r,nl(e=n,cs.after(t)).fold(function(){return rl(e,cs.before(t))},A.some);var e,t})},hg=function(e,t,n){return(e?pg:gg)(t,n).map(h(fg,n))},vg=function(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})},bg=function(e,t){return t&&pe(e.schema.getBlockElements(),Nt(t))},yg=function(e){if(Eo(e)){var t=vt.fromHtml('<br data-mce-bogus="1">');return Zt(e),Jt(e,t),A.some(cs.before(t.dom))}return A.none()},Cg=function(e,t,o){var n,r,i,a=Pt(e).filter(_t),u=Lt(e).filter(_t);return en(e),n=u,r=t,i=function(e,t,n){var r=e.dom,e=t.dom,t=r.data.length;return lg(r,e,o),n.container()===e?cs(r,t):n},((e=a).isSome()&&n.isSome()&&r.isSome()?A.some(i(e.getOrDie(),n.getOrDie(),r.getOrDie())):A.none()).orThunk(function(){return o&&(a.each(function(e){return cg(e.dom,e.dom.length)}),u.each(function(e){return sg(e.dom,0)})),t})},wg=function(t,n,e,r){void 0===r&&(r=!0);var o,i=hg(n,t.getBody(),e.dom),a=lr(e,h(bg,t),(o=t.getBody(),function(e){return e.dom===o})),u=Cg(e,i,(e=e,pe(t.schema.getTextInlineElements(),Nt(e))));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(yg).fold(function(){r&&vg(t,n,u)},function(e){r&&vg(t,n,A.some(e))})},xg=function(e){return Cu(e,"td,th")},Sg=function(e,t){return{start:e,end:t}},Ng=n([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Eg=function(e,t){return pr(vt.fromDom(e),"td,th",t)},kg=function(e){return!wt(e.start,e.end)},_g=function(e,t){return af(e.start,t).bind(function(n){return af(e.end,t).bind(function(e){return t=wt(n,e),e=n,t?A.some(e):A.none();var t})})},Tg=function(e){return function(t){return _g(t,e).map(function(e){return{rng:t,table:e,cells:xg(e)}})}},Ag=function(e,t,n,r){if(n.collapsed||!e.forall(kg))return A.none();if(t.isSameTable){var o=e.bind(Tg(r));return A.some({start:o,end:o})}var i,a,o=Eg(n.startContainer,r),n=Eg(n.endContainer,r),o=o.bind((a=r,function(t){return af(t,a).bind(function(e){return ne(xg(e)).map(function(e){return Sg(t,e)})})})).bind(Tg(r)),r=n.bind((i=r,function(t){return af(t,i).bind(function(e){return te(xg(e)).map(function(e){return Sg(e,t)})})})).bind(Tg(r));return A.some({start:o,end:r})},Rg=function(e,t){return q(e,function(e){return wt(e,t)})},Dg=function(n){return An(Rg(n.cells,n.rng.start),Rg(n.cells,n.rng.end),function(e,t){return n.cells.slice(e,t+1)})},Og=function(e,r,o){return e.exists(function(e){return n=o,!kg(t=e)&&_g(t,n).exists(function(e){e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&cf(e.start,r);var t,n})},Bg=function(e,t){var n=t.startTable,t=t.endTable,r=e.cloneRange();return n.each(function(e){return r.setStartAfter(e.dom)}),t.each(function(e){return r.setEndBefore(e.dom)}),r},Pg=function(e,t){var n,r,o,i,a,u,s,c,l,f,d=(n=e,function(e){return wt(n,e)}),m=(u=d,a=Eg((i=t).startContainer,u),u=Eg(i.endContainer,u),An(a,u,Sg)),o=(r=d,i=(o=function(e){return af(vt.fromDom(e),r)})((e=t).startContainer),a=o(e.endContainer),u=i.isSome(),o=a.isSome(),e=An(i,a,wt).getOr(!1),{startTable:i,endTable:a,isStartInTable:u,isEndInTable:o,isSameTable:e,isMultiTable:!e&&u&&o});return Og(m,t,d)?m.map(function(e){return Ng.singleCellTable(t,e.start)}):o.isMultiTable?Ag(m,l=o,f=t,d).bind(function(e){var t=e.start,n=e.end,e=t.bind(Dg).getOr([]),t=n.bind(Dg).getOr([]);if(0<e.length&&0<t.length){n=Bg(f,l);return A.some(Ng.multiTable(e,t,n))}return A.none()}):Ag(m,s=o,c=t,d).bind(function(e){var t=e.start,e=e.end;return t.or(e)}).bind(function(e){var t=s.isSameTable,n=Dg(e).getOr([]);if(t&&e.cells.length===n.length)return A.some(Ng.fullTable(e.table));if(0<n.length){if(t)return A.some(Ng.partialTable(n,A.none()));t=Bg(c,s);return A.some(Ng.partialTable(n,A.some(Ee(Ee({},s),{rng:t}))))}return A.none()})},Lg=function(e){var t;return(8===Et(t=e)||"#comment"===Nt(t)?Pt:jt)(e).bind(Lg).orThunk(function(){return A.some(e)})},Ig=function(e){return Y(e,Rm)},Mg=function(i,e,t){Ig(e),t.map(function(e){var t,n,r=e.rng,o=e.isStartInTable,e=(e=o?r.endContainer:r.startContainer,A.from(i.dom.getParent(e,i.dom.isBlock)).map(vt.fromDom));r.deleteContents(),t=i,n=o,e.filter(Eo).each(function(e){n?en(e):(Rm(e),t.selection.setCursorLocation(e.dom,0))})});var n=i.selection;return t.forall(function(e){return e.isStartInTable})?n.setCursorLocation(e[0].dom,0):n.collapse(!0),!0},Fg=function(e,t,n,r){return Ig(t.concat(n)),r.deleteContents(),e.selection.setCursorLocation(t[0].dom,0),!0},Ug=function(e,t,n){t.deleteContents();var r,t=Lg(n).getOr(n),o=vt.fromDom(e.dom.getParent(t.dom,e.dom.isBlock));return Eo(o)&&(Rm(o),e.selection.setCursorLocation(o.dom,0)),wt(n,o)||(e=Tn(Bt(o),n)?[]:Bt(r=o).map(Ft).map(function(e){return U(e,function(e){return!wt(r,e)})}).getOr([]),Y(e.concat(Ft(n)),function(e){wt(e,o)||St(e,o)||en(e)})),!0},zg=function(e,t){return wg(e,!1,t),!0},jg=function(n,e,r,t){return Vg(e,t).fold(function(){return t=n,Pg(e,r).map(function(e){return e.fold(h(Ug,t),h(zg,t),h(Mg,t),h(Fg,t))});var t},function(e){return qg(n,e)}).getOr(!1)},Hg=function(e,t){return H(Pm(t,e),jr)},Vg=function(e,t){return H(Pm(t,e),function(e){return"caption"===Nt(e)})},qg=function(e,t){return Rm(t),e.selection.setCursorLocation(t.dom,0),A.some(!0)},$g=function(a,u,s,c,l){return Zc(s,a.getBody(),l).bind(function(e){return r=s,o=l,i=e,ol((n=c).dom).bind(function(t){return il(n.dom).map(function(e){return r?o.isEqual(t)&&i.isEqual(e):o.isEqual(e)&&i.isEqual(t)})}).getOr(!0)?qg(a,c):(t=c,Vg(u,vt.fromDom(e.getNode())).map(function(e){return!1===wt(e,t)}));var t,n,r,o,i}).or(A.some(!0))},Wg=function(r,o,i,e){var a=cs.fromRangeStart(r.selection.getRng());return Hg(i,e).bind(function(e){return Eo(e)?qg(r,e):(t=i,n=e,e=a,Zc(o,r.getBody(),e).bind(function(e){return Hg(t,vt.fromDom(e.getNode())).map(function(e){return!1===wt(e,n)})}));var t,n}).getOr(!1)},Kg=function(e,t){return(e?Em:km)(t)},Xg=function(i,a,r){var u=vt.fromDom(i.getBody());return Vg(u,r).fold(function(){return Wg(i,a,u,r)||(e=i,t=a,n=cs.fromRangeStart(e.selection.getRng()),Kg(t,n)||Qc(t,e.getBody(),n).exists(function(e){return Kg(t,e)}));var e,t,n},function(e){return t=i,n=a,r=u,o=e,e=cs.fromRangeStart(t.selection.getRng()),(Eo(o)?qg(t,o):$g(t,r,n,o,e)).getOr(!1);var t,n,r,o})},Yg=function(e,t){var n,r=vt.fromDom(e.selection.getStart(!0)),o=of(e);return e.selection.isCollapsed()&&0===o.length?Xg(e,t,r):(n=e,o=r,t=vt.fromDom(n.getBody()),e=n.selection.getRng(),0!==(r=of(n)).length?Mg(n,r,A.none()):jg(n,t,e,o))},Gg=function(i){var a=cs.fromRangeStart(i),u=cs.fromRangeEnd(i),s=i.commonAncestorContainer;return Qc(!1,s,u).map(function(e){return!xc(a,u,s)&&xc(a,e,s)?(t=a.container(),n=a.offset(),r=e.container(),o=e.offset(),(e=document.createRange()).setStart(t,n),e.setEnd(r,o),e):i;var t,n,r,o}).getOr(i)},Jg=function(e){return e.collapsed?e:Gg(e)},Qg=function(e,t){return e.getBlockElements()[t.name]&&((e=t).firstChild&&e.firstChild===e.lastChild)&&("br"===(t=t.firstChild).name||t.value===qr)},Zg=function(e,t){var n,r=t.firstChild,o=t.lastChild;return r&&"meta"===r.name&&(r=r.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),n=o,e=(t=e).getNonEmptyElements(),n&&(n.isEmpty(e)||Qg(t,n))&&(o=o.prev),!(!r||r!==o)&&("ul"===r.name||"ol"===r.name)},ep=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&((e=e.firstChild).data===qr||Sn(e))},tp=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||ep(t))?e.slice(0,-1):e;var t},np=function(e,t){e=e.getParent(t,e.isBlock);return e&&"LI"===e.nodeName?e:null},rp=function(e,t){e=cs.after(e),e=Kc(t).prev(e);return e?e.toRange():null},op=function(t,e,n){var r=t.parentNode;return pt.each(e,function(e){r.insertBefore(e,t)}),function(e,t){e=cs.before(e),e=Kc(t).next(e);return e?e.toRange():null}(t,n)},ip=function(e,r,o,t){var n,i,a,u,s,c=function(e,t,n){t=t.serialize(n),n=e.createFragment(t);return t=(e=n).firstChild,n=e.lastChild,t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(r,e,t),l=np(r,o.startContainer),t=tp((e=c.firstChild,U(e.childNodes,function(e){return"LI"===e.nodeName}))),c=r.getRoot(),e=function(e){var t=cs.fromRangeStart(o),n=Kc(r.getRoot()),t=1===e?n.prev(t):n.next(t);return!t||np(r,t.getNode())!==l};return e(1)?op(l,t,c):e(2)?(i=l,a=t,u=c,r.insertAfter(a.reverse(),i),rp(a[0],u)):(i=t,a=c,u=n=l,t=(c=t=o).cloneRange(),c=c.cloneRange(),t.setStartBefore(u),c.setEndAfter(u),c=[t.cloneContents(),c.cloneContents()],(s=n.parentNode).insertBefore(c[0],n),pt.each(i,function(e){s.insertBefore(e,n)}),s.insertBefore(c[1],n),s.removeChild(n),rp(i[i.length-1],a))},ap=e,up=function(n,e){var t,r=n.dom,o=n.selection;if(e){o.scrollIntoView(e);var i=function(e){for(var t=n.getBody();e&&e!==t;e=e.parentNode)if("false"===r.getContentEditable(e))return e;return null}(e);if(i)return r.remove(e),void o.select(i);var a=r.createRng(),i=e.previousSibling;yn(i)?(a.setStart(i,i.nodeValue.length),lt.ie||(u=e.nextSibling,yn(u)&&(i.appendData(u.data),u.parentNode.removeChild(u)))):(a.setStartBefore(e),a.setEndBefore(e));var u=r.getParent(e,r.isBlock);r.remove(e),u&&r.isEmpty(u)&&(n.$(u).empty(),a.setStart(u,0),a.setEnd(u,0),ap(u)||u.getAttribute("data-mce-fragment")||!(t=function(e){e=cs.fromRangeStart(e);if(e=Kc(n.getBody()).next(e))return e.toRange()}(a))?r.add(u,r.create("br",{"data-mce-bogus":"1"})):(a=t,r.remove(u))),o.setRng(a)}},sp=function(e){var t=e.dom,n=Jg(e.selection.getRng());e.selection.setRng(n);var r,o,i=t.getParent(n.startContainer,ap);r=t,o=n,null!==(t=i)&&(t===r.getParent(o.endContainer,ap)&&cf(vt.fromDom(t),o))?Ug(e,n,vt.fromDom(i)):e.getDoc().execCommand("Delete",!1,null)},cp=function(e,t,n){var r=e.selection,o=e.dom;/^ | $/.test(t)&&(t=function(e,t,n){e=vt.fromDom(e.getRoot());return n=Zm(e,cs.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),n=eg(e,cs.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(o,r.getRng(),t));var i=e.parser,a=n.merge,u=lm({validate:e.getParam("validate")},e.schema),s='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',c=e.fire("BeforeSetContent",{content:t,format:"html",selection:!0,paste:n.paste});if(c.isDefaultPrevented())e.fire("SetContent",{content:c.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=c.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,s);var l,f,d=(l=r.getRng()).startContainer||(l.parentElement?l.parentElement():null),m=e.getBody();d===m&&r.isCollapsed()&&o.isBlock(m.firstChild)&&(f=e,(d=m.firstChild)&&!f.schema.getShortEndedElements()[d.nodeName])&&o.isEmpty(m.firstChild)&&((l=o.createRng()).setStart(m.firstChild,0),l.setEnd(m.firstChild,0),r.setRng(l)),r.isCollapsed()||sp(e);var g,p,h,v,b,m={context:(x=r.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},y=i.parse(t,m);if(!0===n.paste&&Zg(e.schema,y)&&!!np(o,x))return l=ip(u,o,r.getRng(),y),r.setRng(l),void e.fire("SetContent",c);if(!function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(y),"mce_marker"===(w=y.lastChild).attr("id"))for(var C=w,w=w.prev;w;w=w.walk(!0))if(3===w.type||!o.isBlock(w.name)){e.schema.isValidChild(w.parent.name,"span")&&w.parent.insert(C,w,"br"===w.name);break}if(e._selectionOverrides.showBlockCaretContainer(x),m.invalid){e.selection.setContent(s);var x=r.getNode(),S=e.getBody();for(9===x.nodeType?x=w=S:w=x;w!==S;)w=(x=w).parentNode;t=x===S?S.innerHTML:o.getOuterHTML(x),t=u.serialize(i.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(y)}))),x===S?o.setHTML(S,t):o.setOuterHTML(x,t)}else t=u.serialize(y),m=e,g=t,"all"===(s=x).getAttribute("data-mce-bogus")?s.parentNode.insertBefore(m.dom.createFragment(g),s):(i=s.firstChild,t=s.lastChild,!i||i===t&&"BR"===i.nodeName?m.dom.setHTML(s,g):m.selection.setContent(g));g=a,v=(a=e).schema.getTextInlineElements(),b=a.dom,g&&(p=a.getBody(),h=um(b),pt.each(b.select("*[data-mce-fragment]"),function(e){if(V(v[e.nodeName.toLowerCase()])&&hm(b,e))for(var t=e.parentNode;V(t)&&t!==p;t=t.parentNode){if(vm(b,e,t))break;if(h.compare(t,e)){b.remove(e,!0);break}}})),up(e,o.get("mce_marker")),a=e.getBody(),pt.each(a.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),a=o,r=r.getStart(),A.from(a.getParent(r,"td,th")).map(vt.fromDom).each(Dm),e.fire("SetContent",c),e.addVisual()}},lp=function(e,t){t(e),e.firstChild&&lp(e.firstChild,t),e.next&&lp(e.next,t)},fp=function(e,t,n){n=function(e,n,t){var r,o,i={},a={},u=[];for(r in t.firstChild&&lp(t.firstChild,function(t){Y(e,function(e){e.name===t.name&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})}),Y(n,function(e){"string"==typeof t.attr(e.name)&&(a[e.name]?a[e.name].nodes.push(t):a[e.name]={filter:e,nodes:[t]})})}),i)pe(i,r)&&u.push(i[r]);for(o in a)pe(a,o)&&u.push(a[o]);return u}(e,t,n);Y(n,function(t){Y(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},dp=function(e){return e instanceof Gd},mp=function(e,t){var n;e.dom.setHTML(e.getBody(),t),Ud(n=e)&&ol(n.getBody()).each(function(e){var t=e.getNode(),e=vn(t)?ol(t).getOr(e):e;n.selection.setRng(e.toRange())})},gp=function(a,u,e){var s=e.no_events?e:a.fire("BeforeSetContent",Ee(Ee({format:"html"},e),{set:!0,content:dp(u)?"":u}));return dp(u)||(u=s.content),A.from(a.getBody()).fold(X(u),function(e){return dp(u)?function(e,t,n,r){fp(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=lm({validate:e.validate},e.schema).serialize(n);return r.content=Hr(vt.fromDom(t))?o:pt.trim(o),mp(e,r.content),r.no_events||e.fire("SetContent",r),n}(a,e,u,s):(t=a,n=e,o=s,0===(r=u).length||/^\s+$/.test(r)?(i='<br data-mce-bogus="1">',"TABLE"===n.nodeName?r="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(r="<li>"+i+"</li>"),r=(e=Ls(t))&&t.schema.isValidChild(n.nodeName.toLowerCase(),e.toLowerCase())?(r=i,t.dom.createHTML(e,Is(t),r)):r||'<br data-mce-bogus="1">',mp(t,r),t.fire("SetContent",o)):("raw"!==o.format&&(r=lm({validate:t.validate},t.schema).serialize(t.parser.parse(r,{isRootContent:!0,insert:!0}))),o.content=Hr(vt.fromDom(n))?r:pt.trim(r),mp(t,o.content),o.no_events||t.fire("SetContent",o)),o.content);var t,n,r,o,i})},pp=function(e,t){return r=t,((e=(n=e).dom).parentNode?dr(vt.fromDom(e.parentNode),function(e){return!wt(n,e)&&r(e)}):A.none()).isSome();var n,r},hp=function(e){return m(e)?e:N},vp=function(e,t,n){var r=t(e),o=hp(n);return r.orThunk(function(){return o(e)?A.none():function(e,t,n){for(var r=e.dom,o=hp(n);r.parentNode;){var r=r.parentNode,i=vt.fromDom(r),a=t(i);if(a.isSome())return a;if(o(i))break}return A.none()}(e,t,o)})},bp=Tl,yp=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},Cp=function(t,e,n,r){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,function(e){return!!yp(t,e,n)||(e.parentNode===o||!!Sp(t,e,n,r,!0))}),Sp(t,e,n,r))},wp=function(e,t,n){return!!bp(t,n.inline)||(!!bp(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},xp=function(e,t,n,r,o,i){var a,u,s,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if("undefined"==typeof c.length){for(a in c)if(pe(c,a)){if(u="attributes"===r?e.getAttrib(t,a):Rl(e,t,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!bp(u,Al(e,_l(c[a],i),a)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?e.getAttrib(t,c[s]):Rl(e,t,c[s]))return n;return n},Sp=function(e,t,n,r,o){var i,a,u,s,c=e.formatter.get(n),l=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],wp(e.dom,t,i)&&xp(l,t,i,"attributes",o,r)&&xp(l,t,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!e.dom.hasClass(t,_l(s[u],r)))return;return i}},Np=function(e,t,n,r){if(r)return Cp(e,r,t,n);if(r=e.selection.getNode(),Cp(e,r,t,n))return!0;var o=e.selection.getStart();return!(o===r||!Cp(e,o,t,n))},Ep=function(n,r){var t=function(e){return wt(e,vt.fromDom(n.getBody()))};return A.from(n.selection.getStart(!0)).bind(function(e){return vp(vt.fromDom(e),function(t){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return A.none()}(r,function(e){return e=e,Sp(n,t.dom,e)?A.some(e):A.none()})},t)}).getOrNull()},kp=function(r,o,e){return j(e,function(e,t){var n=L(r.formatter.get(t),function(t){var n=function(e){return 1<e.length&&"%"===e.charAt(0)};return L(["styles","attributes"],function(e){return ge(t,e).exists(function(e){e=y(e)?e:me(e);return L(e,n)})})});return r.formatter.matchNode(o,t,{},n)?e.concat([t]):e},[])},_p=$r,Tp="_mce_caret",Ap=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==_p||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},Rp=function(e){if(e){var t=new Ar(e,e);for(e=t.current();e;e=t.next())if(yn(e))return e}return null},Dp=function(e){var t=vt.fromTag("span");return Bn(t,{id:Tp,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Jt(t,vt.fromText(_p)),t},Op=function(e,t,n){void 0===n&&(n=!0);var r,o,i,a,u,s=e.dom,c=e.selection;Ap(t)?wg(e,!1,vt.fromDom(t),n):(r=c.getRng(),o=s.getParent(t,s.isBlock),i=r.startContainer,a=r.startOffset,u=r.endContainer,e=r.endOffset,n=function(e){e=Rp(e);return e&&e.nodeValue.charAt(0)===_p&&e.deleteData(0,1),e}(t),s.remove(t,!0),i===n&&0<a&&r.setStart(n,a-1),u===n&&0<e&&r.setEnd(n,e-1),o&&s.isEmpty(o)&&Rm(vt.fromDom(o)),c.setRng(r))},Bp=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)Op(e,t,n);else if(!(t=sl(e.getBody(),o.getStart())))for(;t=r.get(Tp);)Op(e,t,!1)},Pp=function(e,t){return e.appendChild(t),t},Lp=function(e,t){t=z(e,function(e,t){return Pp(e,t.cloneNode(!1))},t);return Pp(t,t.ownerDocument.createTextNode(_p))},Ip=function(e,t,n,r){var o,i,a,u,s,c=e.dom,l=e.selection,f=[],d=l.getRng(),m=d.startContainer,g=d.startOffset,p=m;for(3===m.nodeType&&(g!==m.nodeValue.length&&(o=!0),p=p.parentNode);p;){if(Sp(e,p,t,n,r)){i=p;break}p.nextSibling&&(o=!0),f.push(p),p=p.parentNode}i&&(o?(s=l.getBookmark(),d.collapse(!0),u=Ql(e,d,e.formatter.get(t),!0),u=Ff(u),e.formatter.remove(t,n,u,r),l.moveToBookmark(s)):(a=sl(e.getBody(),i),g=Dp(!1).dom,m=g,d=null!==a?a:i,(u=(s=(u=e).dom).getParent(d,h(Nl,u)))&&s.isEmpty(u)?d.parentNode.replaceChild(m,d):(Am(vt.fromDom(d)),s.isEmpty(d)?d.parentNode.replaceChild(m,d):s.insertAfter(m,d)),d=function(t,e,n,r,o,i){var a=t.formatter,u=t.dom,s=U(oe(a.get()),function(e){return e!==r&&!je(e,"removeformat")}),s=kp(t,n,s);if(0<U(s,function(e){return!Bl(t,e,r)}).length){n=n.cloneNode(!1);return u.add(e,n),a.remove(r,o,n,i),u.remove(n),A.some(n)}return A.none()}(e,g,i,t,n,r),g=Lp(f.concat(d.toArray()),g),Op(e,a,!1),l.setCursorLocation(g,1),c.isEmpty(i)&&c.remove(i)))},Mp=function(o){o.on("mouseup keydown",function(e){var t,n,r;t=o,n=e.keyCode,r=t.selection,e=t.getBody(),Bp(t,null,!1),8!==n&&46!==n||!r.isCollapsed()||r.getStart().innerHTML!==_p||Bp(t,sl(e,r.getStart())),37!==n&&39!==n||Bp(t,sl(e,r.getStart()))})},Fp=function(e,t){e=e.schema.getTextInlineElements();return pe(e,Nt(t))&&!ul(t.dom)&&!hn(t.dom)},Up={},zp=Ce,jp=be;mm=function(e){var t,n=e.selection.getRng(),r=pn(["pre"]);n.collapsed||(t=e.selection.getSelectedBlocks(),jp(zp(zp(t,r),function(e){return r(e.previousSibling)&&-1!==we(t,e.previousSibling)}),function(e){var t;t=e.previousSibling,$a(e=e).remove(),$a(t).append("<br><br>").append(e.childNodes)}))},Up[dm="pre"]||(Up[dm]=[]),Up[dm].push(mm);var Hp=pt.each,Vp=function(e){return gn(e)&&!vl(e)&&!ul(e)&&!hn(e)},qp=function(e,t){for(var n=e;n;n=n[t]){if(yn(n)&&0!==n.nodeValue.length)return e;if(gn(n)&&!vl(n))return n}return e},$p=function(e,t,n){var r,o,i=um(e);if(t&&n&&(t=qp(t,"previousSibling"),n=qp(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(o=r).nextSibling,t.appendChild(o);return e.remove(n),pt.each(pt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},Wp=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=$p(e,Sl(r),r),$p(e,r,Sl(r,!0)))},Kp=function(e,t,n){Hp(e.childNodes,function(e){Vp(e)&&(t(e)&&n(e),e.hasChildNodes()&&Kp(e,t,n))})},Xp=function(t,n){return function(e){return!(!e||!Rl(t,e,n))}},Yp=function(n,r,o){return function(e){var t;n.setStyle(e,r,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=n,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)}},Gp=n([{keep:[]},{rename:["name"]},{removed:[]}]),Jp=/^(src|href|style)$/,Qp=pt.each,Zp=Tl,eh=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},th=function(e,t,n){var r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];return gn(r)&&(t=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[t<o?t:o]),yn(r)&&n&&o>=r.nodeValue.length&&(r=new Ar(r,e.getBody()).next()||r),r=yn(r)&&!n&&0===o?new Ar(r,e.getBody()).prev()||r:r},nh=function(e,t){var n=t?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(e.nodeName)&&e[n]){t=e[n];return"TR"===e.nodeName&&t[n]||t}return e},rh=function(e,t,n,r){r=e.create(n,r);return t.parentNode.insertBefore(r,t),r.appendChild(t),r},oh=function(e,t,n,r,o){t=vt.fromDom(t),r=vt.fromDom(e.create(r,o)),o=(n?Mt:It)(t);return Qt(r,o),n?(Xt(t,r),Gt(r,t)):(Yt(t,r),Jt(r,t)),r.dom},ih=function(e,t,n,r){return!(t=Sl(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},ah=function(e,r,o,t,i){var n,a,u,s,c=e.dom;if(a=c,!(Zp(u=t,(s=r).inline)||Zp(u,s.block)||(s.selector?gn(u)&&a.is(u,s.selector):void 0)||(s=t,r.links&&"A"===s.nodeName)))return Gp.keep();var l,f,d,m,g=t;if(r.inline&&"all"===r.remove&&y(r.preserve_attributes)){var p=U(c.getAttribs(g),function(e){return P(r.preserve_attributes,e.name.toLowerCase())});if(c.removeAllAttribs(g),Y(p,function(e){return c.setAttrib(g,e.name,e.value)}),0<p.length)return Gp.rename("span")}if("all"!==r.remove){Qp(r.styles,function(e,t){e=Al(c,_l(e,o),t+""),w(t)&&(t=e,i=null),!r.remove_similar&&i&&!Zp(Rl(c,i,t),e)||c.setStyle(g,t,""),n=!0}),n&&""===c.getAttrib(g,"style")&&(g.removeAttribute("style"),g.removeAttribute("data-mce-style")),Qp(r.attributes,function(e,t){var n;if(e=_l(e,o),w(t)&&(t=e,i=null),r.remove_similar||!i||Zp(c.getAttrib(i,t),e))if("class"===t&&(e=c.getAttrib(g,t))&&(n="",Y(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n))c.setAttrib(g,t,n);else{if(Jp.test(t)&&g.removeAttribute("data-mce-"+t),"style"===t&&pn(["li"])(g)&&"none"===c.getStyle(g,"list-style-type"))return g.removeAttribute(t),void c.setStyle(g,"list-style-type","none");"class"===t&&g.removeAttribute("className"),g.removeAttribute(t)}}),Qp(r.classes,function(e){e=_l(e,o),i&&!c.hasClass(i,e)||c.removeClass(g,e)});for(var h=c.getAttribs(g),v=0;v<h.length;v++){var b=h[v].nodeName;if(0!==b.indexOf("_")&&0!==b.indexOf("data-"))return Gp.keep()}}return"none"!==r.remove?(l=e,t=r,e=(p=g).parentNode,d=l.dom,m=Ls(l),t.block&&(m?e===d.getRoot()&&(t.list_block&&Zp(p,t.list_block)||Y(re(p.childNodes),function(e){El(l,m,e.nodeName.toLowerCase())?f?f.appendChild(e):(f=rh(d,e,m),d.setAttribs(f,l.settings.forced_root_block_attrs)):f=0})):d.isBlock(p)&&!d.isBlock(e)&&(ih(d,p,!1)||ih(d,p.firstChild,!0,!0)||p.insertBefore(d.create("br"),p.firstChild),ih(d,p,!0)||ih(d,p.lastChild,!1,!0)||p.appendChild(d.create("br")))),t.selector&&t.inline&&!Zp(t.inline,p)||d.remove(p,!0),Gp.removed()):Gp.keep()},uh=function(t,e,n,r,o){return ah(t,e,n,r,o).fold(N,function(e){return t.dom.rename(r,e),!0},E)},sh=function(e,t,n,r,o,i,a,u){var s,c,l=e.dom;if(n){for(var f=n.parentNode,d=r.parentNode;d&&d!==f;d=d.parentNode){for(var m=l.clone(d,!1),g=0;g<t.length&&null!==(m=function(t,e,n,r){return ah(t,e,n,r,r).fold(X(r),function(e){return t.dom.createFragment().appendChild(r),t.dom.rename(r,e)},X(null))}(e,t[g],u,m));g++);m&&(s&&m.appendChild(s),c=c||m,s=m)}!i||a.mixed&&l.isBlock(n)||(r=l.split(n,r)),s&&(o.parentNode.insertBefore(s,o),c.appendChild(o),a.inline&&Wp(l,a,0,s))}return r},ch=function(u,s,c,e,l){var t,f=u.formatter.get(s),d=f[0],a=!0,m=u.dom,n=u.selection,o=function(e){var n,r,o,i,a,t=(r=s,o=c,i=l,Y(Ol((n=u).dom,e.parentNode).reverse(),function(e){var t;a||"_start"===e.id||"_end"===e.id||(t=Sp(n,e,r,o,i))&&!1!==t.split&&(a=e)}),a);return sh(u,f,t,e,e,!0,d,c)},g=function(e){var t,n,r=e.parentNode;yn(e)&&Ml(m,r)&&uh(u,d,c,r,r),gn(e)&&m.getContentEditable(e)&&(t=a,a="true"===m.getContentEditable(e),n=!0);var o=re(e.childNodes);if(a&&!n)for(var i=0;i<f.length&&!uh(u,f[i],c,e,e);i++);if(d.deep&&o.length){for(i=0;i<o.length;i++)g(o[i]);n&&(a=t)}},i=function(e){var t,n=m.get(e?"_start":"_end"),r=n[e?"firstChild":"lastChild"];return vl(t=r)&&gn(t)&&("_start"===t.id||"_end"===t.id)&&(r=r[e?"firstChild":"lastChild"]),yn(r)&&0===r.data.length&&(r=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),m.remove(n,!0),r},r=function(e){var t=Ql(u,e,f,e.collapsed);if(d.split){if(t=Ff(t),(r=th(u,t,!0))!==(e=th(u,t))){if(r=nh(r,!0),e=nh(e,!1),eh(m,r,e)){var n=A.from(r.firstChild).getOr(r);return o(oh(m,n,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void i(!0)}if(eh(m,e,r)){n=A.from(e.lastChild).getOr(e);return o(oh(m,n,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void i(!1)}var r=rh(m,r,"span",{id:"_start","data-mce-type":"bookmark"}),e=rh(m,e,"span",{id:"_end","data-mce-type":"bookmark"}),n=m.createRng();n.setStartAfter(r),n.setEndBefore(e),ef(m,n,function(e){Y(e,function(e){vl(e)||vl(e.parentNode)||o(e)})}),o(r),o(e),r=i(!0),e=i()}else r=e=o(r);t.startContainer=r.parentNode||r,t.startOffset=m.nodeIndex(r),t.endContainer=e.parentNode||e,t.endOffset=m.nodeIndex(e)+1}ef(m,t,function(e){Y(e,function(t){g(t);Y(["underline","line-through","overline"],function(e){gn(t)&&u.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&Dl(m,t.parentNode)===e&&uh(u,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},null,t)})})})};if(e)wl(e)?((t=m.createRng()).setStartBefore(e),t.setEndAfter(e),r(t)):r(e);else if("false"!==m.getContentEditable(n.getNode()))n.isCollapsed()&&d.inline&&!of(u).length?Ip(u,s,c,l):(mf(n,!0,function(){df(u,r)}),d.inline&&Np(u,s,c,n.getStart())&&xl(m,n,n.getRng()),u.nodeChanged());else{e=n.getNode();for(var p=0;p<f.length&&(!f[p].ceFalseOverride||!uh(u,f[p],c,e,e));p++);}},lh=pt.each,fh=function(i,e,a,u){lh(e,function(t){var r,e,n,o;lh(i.dom.select(t.inline,u),function(e){Vp(e)&&uh(i,t,a,e,t.exact?e:null)}),r=i.dom,n=u,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",Hp(r.select(o,n),function(n){Vp(n)&&Hp(e.styles,function(e,t){r.setStyle(n,t,"")})}))})},dh=pt.each,mh=he,gh=function(b,y,C,r){var e,t,n,w=b.formatter.get(y),x=w[0],o=!r&&b.selection.isCollapsed(),i=b.dom,a=b.selection,S=function(n,e){var t;e=e||x,n&&(e.onformat&&e.onformat(n,e,C,r),dh(e.styles,function(e,t){i.setStyle(n,t,_l(e,C))}),!e.styles||(t=i.getAttrib(n,"style"))&&i.setAttrib(n,"data-mce-style",t),dh(e.attributes,function(e,t){i.setAttrib(n,t,_l(e,C))}),dh(e.classes,function(e){e=_l(e,C),i.hasClass(n,e)||i.addClass(n,e)}))},d=function(e,t){var n=!1;return!!Ll(x)&&(dh(e,function(e){if(!("collapsed"in e&&e.collapsed!==o))return i.is(t,e.selector)&&!ul(t)?(S(t,e),!(n=!0)):void 0}),n)},u=function(h,e,t,s){var v=[],c=!0,l=x.inline||x.block,f=h.create(l);S(f),ef(h,e,function(e){var a,u=function(e){var t=!1,n=c,r=e.nodeName.toLowerCase(),o=e.parentNode.nodeName.toLowerCase();if(gn(e)&&h.getContentEditable(e)&&(n=c,c="true"===h.getContentEditable(e),t=!0),Sn(e)&&!function(e,t,n,r){if(e.getParam("format_empty_lines",!1,"boolean")&&Il(t)){t=Ee(Ee({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),e=pp(vt.fromDom(n),function(e){return ul(e.dom)});return he(t,r)&&Eo(vt.fromDom(n.parentNode),!1)&&!e}return!1}(b,x,e,o))return a=null,void(Pl(x)&&h.remove(e));if(x.wrapper&&Sp(b,e,y,C))a=null;else{if(c&&!t&&Pl(x)&&!x.wrapper&&Nl(b,r)&&El(b,o,l)){var i=h.rename(e,l);return S(i),v.push(i),void(a=null)}if(Ll(x)){i=d(w,e);if(yn(e)&&Ml(h,e.parentNode)&&d(w,e.parentNode),!mh(x,"inline")||i)return void(a=null)}!c||t||!El(b,l,r)||!El(b,o,l)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||ul(e)||mh(x,"inline")&&h.isBlock(e)?(a=null,dh(pt.grep(e.childNodes),u),t&&(c=n),a=null):(a||(a=h.clone(f,!1),e.parentNode.insertBefore(a,e),v.push(a)),a.appendChild(e))}};dh(e,u)}),!0===x.links&&dh(v,function(e){var t=function(e){"A"===e.nodeName&&S(e,x),dh(pt.grep(e.childNodes),t)};t(e)}),dh(v,function(e){var n,r,t,o,i,a,u,s,c,l,f,d,m,g=function(e){var n=!1;return dh(e.childNodes,function(e){if((t=e)&&1===t.nodeType&&!vl(t)&&!ul(t)&&!hn(t))return n=e,!1;var t}),n},p=(n=0,dh(e.childNodes,function(e){var t;V(t=e)&&yn(t)&&0===t.length||vl(e)||n++}),n);!(1<v.length)&&h.isBlock(e)||0!==p?(Il(x)||x.wrapper)&&(x.exact||1!==p||((m=g(f=e))&&!vl(m)&&wp(h,m,x)&&(d=h.clone(m,!1),S(d),h.replace(d,f,!0),h.remove(m,!0)),e=d||f),fh(b,w,C,e),u=x,s=y,c=C,Sp(a=b,(l=e).parentNode,s,c)&&uh(a,u,c,l)||u.merge_with_parents&&a.dom.getParent(l.parentNode,function(e){if(Sp(a,e,s,c))return uh(a,u,c,l),!0}),t=h,o=C,i=e,(p=x).styles&&p.styles.backgroundColor&&Kp(i,Xp(t,"fontSize"),Yp(t,"backgroundColor",_l(p.styles.backgroundColor,o))),r=h,t=e,p=function(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=Dl(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},(o=x).styles&&(o.styles.color||o.styles.textDecoration)&&(pt.walk(t,p,"childNodes"),p(t)),o=h,p=e,"sub"!==(t=x).inline&&"sup"!==t.inline||(Kp(p,Xp(o,"fontSize"),Yp(o,"fontSize","")),o.remove(o.select("sup"===t.inline?"sub":"sup",p),!0)),Wp(h,x,0,e)):h.remove(e,!0)})};if("false"!==i.getContentEditable(a.getNode()))x&&(r?wl(r)?d(w,r)||((t=i.createRng()).setStartBefore(r),t.setEndAfter(r),u(i,Ql(b,t,w),0,!0)):u(i,r,0,!0):o&&Il(x)&&!of(b).length?function(e,t,n){var r,o=e.selection,i=o.getRng(),a=i.startOffset,u=i.startContainer.nodeValue,s=sl(e.getBody(),o.getStart());s&&(r=Rp(s));var c,l,f=/[^\s\u00a0\u00ad\u200b\ufeff]/;u&&0<a&&a<u.length&&f.test(u.charAt(a))&&f.test(u.charAt(a-1))?(l=o.getBookmark(),i.collapse(!0),c=Ql(e,i,e.formatter.get(t)),c=Ff(c),e.formatter.apply(t,n,c),o.moveToBookmark(l)):(s&&r.nodeValue===_p||(c=e.getDoc(),l=Dp(!0).dom,r=(s=c.importNode(l,!0)).firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),o.setCursorLocation(r,a))}(b,y,C):(e=a.getNode(),t=w[0],b.settings.forced_root_block||!t.defaultBlock||i.getParent(e,i.isBlock)||gh(b,t.defaultBlock),a.setRng(Jg(a.getRng())),mf(a,!0,function(e){df(b,function(e,t){e=t?e:Ql(b,e,w);u(i,e)})}),xl(i,a,a.getRng()),b.nodeChanged()),n=b,jp(Up[y],function(e){e(n)}));else{r=a.getNode();for(var s=0,c=w.length;s<c;s++){var l=w[s];if(l.ceFalseOverride&&Ll(l)&&i.is(r,l.selector))return void S(r,l)}}},ph=function(r,e,t,n){var o=oe(t.get()),i={},a={},u=U(Ol(r.dom,e),function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")});ae(n,function(e,n){pt.each(u,function(t){return r.formatter.matchNode(t,n,{},e.similar)?(-1===o.indexOf(n)&&(Y(e.callbacks,function(e){e(!0,{node:t,format:n,parents:u})}),i[n]=e.callbacks),a[n]=e.callbacks,!1):!yp(r,t,n)&&void 0})});e=hh(t.get(),a,e,u);t.set(Ee(Ee({},i),e))},hh=function(e,n,r,o){return fe(e,function(e,t){return!!pe(n,t)||(Y(e,function(e){e(!1,{node:r,format:t,parents:o})}),!1)}).t},vh=function(e,o,i,a,t){var n,r,u,s,c,l;return null===o.get()&&(r=e,u=ou({}),(n=o).set({}),r.on("NodeChange",function(e){ph(r,e.element,u,n.get())})),e=i,s=a,c=t,l=(t=o).get(),Y(e.split(","),function(e){l[e]||(l[e]={similar:c,callbacks:[]}),l[e].callbacks.push(s)}),t.set(l),{unbind:function(){return t=i,n=a,r=(e=o).get(),Y(t.split(","),function(e){r[e].callbacks=U(r[e].callbacks,function(e){return e!==n}),0===r[e].callbacks.length&&delete r[e]}),void e.set(r);var e,t,n,r}}},bh=function(e,t){var n=(t||document).createDocumentFragment();return Y(e,function(e){n.appendChild(e.dom)}),vt.fromDom(n)},yh=function(e,t,n){return{element:e,width:t,rows:n}},Ch=function(e,t){return{element:e,cells:t}},wh=function(e,t){t=parseInt(Pn(e,t),10);return isNaN(t)?1:t},xh=function(e){return j(e,function(e,t){return t.cells.length>e?t.cells.length:e},0)},Sh=function(e,t){for(var n=e.rows,r=0;r<n.length;r++)for(var o=n[r].cells,i=0;i<o.length;i++)if(wt(o[i],t))return A.some({x:i,y:r});return A.none()},Nh=function(e,t,n,r,o){for(var i=[],a=e.rows,u=n;u<=o;u++){var s=a[u].cells,s=t<r?s.slice(t,r+1):s.slice(r,t+1);i.push(Ch(a[u].element,s))}return i},Eh=function(e){var o=yh(Ou(e),0,[]);return Y(Cu(e,"tr"),function(n,r){Y(Cu(n,"td,th"),function(e,t){!function(e,t,n,r,o){for(var i=wh(o,"rowspan"),a=wh(o,"colspan"),u=e.rows,s=n;s<n+i;s++){u[s]||(u[s]=Ch(Bu(r),[]));for(var c=t;c<t+a;c++)u[s].cells[c]=s===n&&c===t?o:Ou(o)}}(o,function(e,t,n){for(;function(e,t,n){e=e.rows;return!!(e[n]?e[n].cells:[])[t]}(e,t,n);)t++;return t}(o,t,r),r,n,e)})}),yh(o.element,xh(o.rows),o.rows)},kh=function(e){return n=I((t=e).rows,function(e){var t=I(e.cells,function(e){e=Bu(e);return In(e,"colspan"),In(e,"rowspan"),e}),e=Ou(e.element);return Qt(e,t),e}),e=Ou(t.element),t=vt.fromTag("tbody"),Qt(t,n),Jt(e,t),e;var t,n},_h=function(a,e,t){return Sh(a,e).bind(function(i){return Sh(a,t).map(function(e){return t=a,r=e,o=(n=i).x,e=n.y,n=r.x,r=r.y,e=e<r?Nh(t,o,e,n,r):Nh(t,o,r,n,e),yh(t.element,xh(e),e);var t,n,r,o})})},Th=function(t,n){return H(t,function(e){return"li"===Nt(e)&&cf(e,n)}).fold(X([]),function(e){return H(t,function(e){return"ul"===Nt(e)||"ol"===Nt(e)}).map(function(e){var t=vt.fromTag(Nt(e)),e=de(jn(e),function(e,t){return He(t,"list-style")});return Mn(t,e),[vt.fromTag("li"),t]}).getOr([])})},Ah=function(e,t){var n,r=vt.fromDom(t.commonAncestorContainer),o=Pm(r,e),e=U(o,function(e){return Lr(e)||Br(e)}),t=Th(o,t),r=e.concat(t.length?t:Ur(n=r)?Bt(n).filter(Fr).fold(X([]),function(e){return[n,e]}):Fr(n)?[n]:[]);return I(r,Ou)},Rh=function(){return bh([])},Dh=function(e,t){return function(e,t){e=j(t,function(e,t){return Jt(t,e),t},e);return 0<t.length?bh([e]):e}(vt.fromDom(t.cloneContents()),Ah(e,t))},Oh=function(e,r){return t=r[0],mr(t,"table",h(wt,e)).bind(function(e){var t=r[0],n=r[r.length-1],e=Eh(e);return _h(e,t,n).map(function(e){return bh([kh(e)])})}).getOrThunk(Rh);var t},Bh=function(e,t){var n=rf(t,e);return 0<n.length?Oh(e,n):(e=e,0<(t=t).length&&t[0].collapsed?Rh():Dh(e,t[0]))},Ph=function(e,t){return 0<=t&&t<e.length&&yl(e.charAt(t))},Lh=function(e,t){e=Kr(e.innerText);return t?e.replace(/^[ \f\n\r\t\v]+/,""):e},Ih=function(e,t,n){var r=e.fire("BeforeGetContent",Ee(Ee({},n=void 0===n?{}:n),{format:t,get:!0,selection:!0}));if(r.isDefaultPrevented())return e.fire("GetContent",r),r.content;if("text"===r.format)return u=e,A.from(u.selection.getRng()).map(function(e){var t=A.from(u.dom.getParent(e.commonAncestorContainer,u.dom.isBlock)),n=u.getBody(),r=t.map(function(e){return e.nodeName}).getOr("div").toLowerCase(),o=lt.browser.isIE()&&"pre"!==r,i=u.dom.add(n,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),r=Lh(i,o),e=Kr(i.textContent);if(u.dom.remove(i),Ph(e,0)||Ph(e,e.length-1)){n=t.getOr(n),n=Lh(n,o),o=n.indexOf(r);return-1===o?r:(Ph(n,o-1)?" ":"")+r+(Ph(n,o+r.length)?" ":"")}return r}).getOr("");r.getInner=!0;var o,i,a,u,i=(i=r,a=(o=e).selection.getRng(),n=o.dom.create("body"),t=o.selection.getSel(),t=Wd(o,tf(t)),(a=i.contextual?Bh(vt.fromDom(o.getBody()),t).dom:a.cloneContents())&&n.appendChild(a),o.selection.serializer.serialize(n,i));return"tree"===r.format?i:(r.content=e.selection.isCollapsed()?"":i,e.fire("GetContent",r),r.content)},Mh=function(e){return gn(e)?e.outerHTML:yn(e)?Vo.encodeRaw(e.data,!1):Cn(e)?"\x3c!--"+e.data+"--\x3e":""},Fh=function(e,t,n){t=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r}(t);e.hasChildNodes()&&n<e.childNodes.length?(n=e.childNodes[n]).parentNode.insertBefore(t,n):e.appendChild(t)},Uh=function(e,n){var r=0;Y(e,function(e){var t;0===e[0]?r++:1===e[0]?(Fh(n,e[1],r),r++):2===e[0]&&(t=r,(e=n).hasChildNodes()&&t<e.childNodes.length&&(t=e.childNodes[t]).parentNode.removeChild(t))})},zh=function(e,t){var m,g,p,h,c,v,l,n=I(re(t.childNodes),Mh);return Uh((g=e,n=(m=n).length+g.length+2,p=new Array(n),h=new Array(n),c=function(e,t,n,r,o){var i=l(e,t,n,r);if(null===i||i.start===t&&i.diag===t-r||i.end===e&&i.diag===e-n)for(var a=e,u=n;a<t||u<r;)a<t&&u<r&&m[a]===g[u]?(o.push([0,m[a]]),++a,++u):r-n<t-e?(o.push([2,m[a]]),++a):(o.push([1,g[u]]),++u);else{c(e,i.start,n,i.start-i.diag,o);for(var s=i.start;s<i.end;++s)o.push([0,m[s]]);c(i.end,t,i.end-i.diag,r,o)}},v=function(e,t,n,r){for(var o=e;o-t<r&&o<n&&m[o]===g[o-t];)++o;return{start:e,end:o,diag:t}},l=function(e,t,n,r){var o=t-e,i=r-n;if(0==o||0==i)return null;var a,u,s,c,l,f=o-i,o=i+o,d=(o%2==0?o:1+o)/2;for(p[1+d]=e,h[1+d]=t+1,a=0;a<=d;++a){for(u=-a;u<=a;u+=2){for(s=u+d,u===-a||u!==a&&p[s-1]<p[s+1]?p[s]=p[s+1]:p[s]=p[s-1]+1,l=(c=p[s])-e+n-u;c<t&&l<r&&m[c]===g[l];)p[s]=++c,++l;if(f%2!=0&&f-a<=u&&u<=f+a&&h[s-f]<=p[s])return v(h[s-f],u+e-n,t,r)}for(u=f-a;u<=f+a;u+=2){for(s=u+d-f,u===f-a||u!==f+a&&h[s+1]<=h[s-1]?h[s]=h[s+1]-1:h[s]=h[s-1],l=(c=h[s]-1)-e+n-u;e<=c&&n<=l&&m[c]===g[l];)h[s]=c--,l--;if(f%2==0&&-a<=u&&u<=a&&h[s]<=p[s+f])return v(h[s],u+e-n,t,r)}}},n=[],c(0,m.length,0,g.length,n),n),t),t},jh=ou(A.none()),Hh=function(t){var e=(n=t.getBody(),U(I(re(n.childNodes),Mh),function(e){return 0<e.length})),n=$(e,function(e){e=rm(t.serializer,e);return 0<e.length?[e]:[]}),e=n.join("");return-1!==e.indexOf("</iframe>")?{type:"fragmented",fragments:n,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},Vh=function(e,t,n){"fragmented"===t.type?zh(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},qh=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},$h=function(e){var t=vt.fromTag("body",jh.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return jh.set(A.some(e)),e}));return Ru(t,qh(e)),Y(Cu(t,"*[data-mce-bogus]"),tn),t.dom.innerHTML},Wh=function(e,t){return!(!e||!t)&&(n=t,qh(e)===qh(n)||(t=t,$h(e)===$h(t)));var n},Kh=function(e){return 0===e.get()},Xh=function(e,t,n){Kh(n)&&(e.typing=t)},Yh=function(e,t){e.typing&&(Xh(e,!1,t),e.add())},Gh=function(s){return{undoManager:{beforeChange:function(e,t){var n;n=s,t=t,Kh(e)&&t.set(A.some(Ds(n.selection)))},add:function(e,t,n,r,o,i){return function(e,t,n,r,o,i,a){var u=Hh(e);if(i=pt.extend(i=i||{},u),!1===Kh(r)||e.removed)return null;r=t.data[n.get()];if(e.fire("BeforeAddUndo",{level:i,lastLevel:r,originalEvent:a}).isDefaultPrevented())return null;if(r&&Wh(r,i))return null;t.data[n.get()]&&o.get().each(function(e){t.data[n.get()].beforeBookmark=e});o=e.getParam("custom_undo_redo_levels",0,"number");if(o&&t.data.length>o){for(var s=0;s<t.data.length-1;s++)t.data[s]=t.data[s+1];t.data.length--,n.set(t.data.length)}i.bookmark=Ds(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(i),n.set(t.data.length-1);a={level:i,lastLevel:r,originalEvent:a};return 0<n.get()?(e.setDirty(!0),e.fire("AddUndo",a),e.fire("change",a)):e.fire("AddUndo",a),i}(s,e,t,n,r,o,i)},undo:function(e,t,n){return r=s,t=t,n=n,(e=e).typing&&(e.add(),e.typing=!1,Xh(e,!1,t)),0<n.get()&&(n.set(n.get()-1),o=e.data[n.get()],Vh(r,o,!0),r.setDirty(!0),r.fire("Undo",{level:o})),o;var r,o},redo:function(e,t){return n=s,t=t,(e=e).get()<t.length-1&&(e.set(e.get()+1),r=t[e.get()],Vh(n,r,!1),n.setDirty(!0),n.fire("Redo",{level:r})),r;var n,r},clear:function(e,t){return n=s,t=t,(e=e).data=[],t.set(0),e.typing=!1,void n.fire("ClearUndos");var n},reset:function(e){(e=e).clear(),e.add()},hasUndo:function(e,t){return n=s,e=e,0<t.get()||e.typing&&e.data[0]&&!Wh(Hh(n),e.data[0]);var n},hasRedo:function(e,t){return e=e,t.get()<e.data.length-1&&!e.typing},transact:function(e,t,n){return n=n,Yh(e=e,t),e.beforeChange(),e.ignore(n),e.add()},ignore:function(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:function(e,t,n,r){var o,i;o=s,i=t,t=n,n=r,(r=e).transact(t)&&(e=r.data[i.get()].bookmark,t=r.data[i.get()-1],Vh(o,t,!0),r.transact(n)&&(r.data[i.get()-1].beforeBookmark=e))}},formatter:{match:function(e,t,n){return Np(s,e,t,n)},matchAll:function(e,t){return o=e,i=t,a=[],u={},t=(r=s).selection.getStart(),r.dom.getParent(t,function(e){for(var t=0;t<o.length;t++){var n=o[t];!u[n]&&Sp(r,e,n,i)&&(u[n]=!0,a.push(n))}},r.dom.getRoot()),a;var r,o,i,a,u},matchNode:function(e,t,n,r){return Sp(s,e,t,n,r)},canApply:function(e){return function(e,t){var n,r,o,i,a=e.formatter.get(t),u=e.dom;if(a)for(e=e.selection.getStart(),n=Ol(u,e),o=a.length-1;0<=o;o--){if(!(i=a[o].selector)||a[o].defaultBlock)return!0;for(r=n.length-1;0<=r;r--)if(u.is(n[r],i))return!0}return!1}(s,e)},closest:function(e){return Ep(s,e)},apply:function(e,t,n){return gh(s,e,t,n)},remove:function(e,t,n,r){return ch(s,e,t,n,r)},toggle:function(e,t,n){var r,o;r=e,o=t,e=n,n=(t=s).formatter.get(r),(!Np(t,r,o,e)||"toggle"in n[0]&&!n[0].toggle?gh:ch)(t,r,o,e)},formatChanged:function(e,t,n,r){return vh(s,e,t,n,r)}},editor:{getContent:function(e,t){return n=s,r=e,o=t,A.from(n.getBody()).fold(X("tree"===r.format?new Gd("body",11):""),function(e){return im(n,r,o,e)});var n,r,o},setContent:function(e,t){return gp(s,e,t)},insertContent:function(e,t){return cp(s,e,t)},addVisual:function(e){return t=e,o=(r=s).dom,e=V(t)?t:r.getBody(),d(r.hasVisual)&&(r.hasVisual=r.getParam("visual",!0,"boolean")),Y(o.select("table,a",e),function(e){switch(e.nodeName){case"TABLE":var t=r.getParam("visual_table_class","mce-item-table","string"),n=o.getAttrib(e,"border");n&&"0"!==n||!r.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(n=o.getAttrib(e,"name")||e.id,t=r.getParam("visual_anchor_class","mce-item-anchor","string"),n&&r.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),void r.fire("VisualAid",{element:t,hasVisual:r.hasVisual});var r,t,o}},selection:{getContent:function(e,t){return Ih(s,e,t)}},raw:{getModel:function(){return A.none()}}}},Jh=function(e){return pe(e.plugins,"rtc")},Qh=function(e){var u=e;return ge(e.plugins,"rtc").bind(function(e){return A.from(e.setup)}).fold(function(){return u.rtcInstance=Gh(e),A.none()},function(e){var t,n;return u.rtcInstance=(t=X(null),n=X(""),{undoManager:{beforeChange:ee,add:t,undo:t,redo:t,clear:ee,reset:ee,hasUndo:N,hasRedo:N,transact:t,ignore:ee,extra:ee},formatter:{match:N,matchAll:X([]),matchNode:N,canApply:N,closest:n,apply:ee,remove:ee,toggle:ee,formatChanged:X({unbind:ee})},editor:{getContent:n,setContent:n,insertContent:ee,addVisual:ee},selection:{getContent:n},raw:{getModel:X(A.none())}}),A.some(function(){return e().then(function(e){var o,i,a,n,r,t;return u.rtcInstance=(o=function(e){return C(e)?e:{}},i=e.undoManager,a=e.formatter,n=e.editor,r=e.selection,t=e.raw,{undoManager:{beforeChange:i.beforeChange,add:i.add,undo:i.undo,redo:i.redo,clear:i.clear,reset:i.reset,hasUndo:i.hasUndo,hasRedo:i.hasRedo,transact:function(e,t,n){return i.transact(n)},ignore:function(e,t){return i.ignore(t)},extra:function(e,t,n,r){return i.extra(n,r)}},formatter:{match:function(e,t,n){return a.match(e,o(t))},matchAll:a.matchAll,matchNode:a.matchNode,canApply:function(e){return a.canApply(e)},closest:function(e){return a.closest(e)},apply:function(e,t,n){return a.apply(e,o(t))},remove:function(e,t,n,r){return a.remove(e,o(t))},toggle:function(e,t,n){return a.toggle(e,o(t))},formatChanged:function(e,t,n,r){return a.formatChanged(t,n,r)}},editor:{getContent:function(e,t){return n.getContent(e)},setContent:function(e,t){return n.setContent(e,t)},insertContent:function(e,t){return n.insertContent(e)},addVisual:n.addVisual},selection:{getContent:function(e,t){return r.getContent(t)}},raw:{getModel:function(){return A.some(t.getRawModel())}}}),e.rtc.isRemote})})})},Zh=function(e){return e.rtcInstance||Gh(e)},ev=function(e){e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},tv=function(e,t){var n=(t=void 0===t?{}:t).format||"html";return n=n,t=t,ev(e).selection.getContent(n,t)},nv=function(e){return 0===e.dom.length?(en(e),A.none()):A.some(e)},rv=function(e,t,a,u){e.bind(function(i){return(u?cg:sg)(i.dom,u?i.dom.length:0),t.filter(_t).map(function(e){var t,n,r,o;n=e,r=a,o=u,e=(t=i).dom,t=n.dom,n=(o?e:t).length,o?(lg(e,t,!1,!o),r.setStart(t,n)):(lg(t,e,!1,!o),r.setEnd(t,n))})}).orThunk(function(){var e;return(e=u,t.filter(function(e){return wf.isBookmarkNode(e.dom)}).bind(e?Lt:Pt).or(t).filter(_t)).map(function(e){var n,r;r=u,Bt(n=e).each(function(e){var t=n.dom;r&&Zm(e,cs(t,0))?sg(t,0):!r&&eg(e,cs(t,t.length))&&cg(t,t.length)})})})},ov=function(e,t,n){t=t,n=Ee(Ee({format:"html"},n=void 0===n?{}:n),{set:!0,selection:!0,content:t}),t=n;if(!n.no_events){var r=e.fire("BeforeSetContent",n);if(r.isDefaultPrevented())return void e.fire("SetContent",r);t=r}t.content=function(e,t){if("raw"===t.format)return t.content;var n=e.selection.getRng(),n=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),n=n?{context:n.nodeName.toLowerCase()}:{},t=e.parser.parse(t.content,Ee(Ee({isRootContent:!0,forced_root_block:!1},n),t));return lm({validate:e.validate},e.schema).serialize(t)}(e,t);r=e.selection.getRng();!function(e,t){var n=A.from(t.firstChild).map(vt.fromDom),r=A.from(t.lastChild).map(vt.fromDom);e.deleteContents(),e.insertNode(t);var o=n.bind(Pt).filter(_t).bind(nv),t=r.bind(Lt).filter(_t).bind(nv);rv(o,n,e,!0),rv(t,r,e,!1),e.collapse(!1)}(r,r.createContextualFragment(t.content)),e.selection.setRng(r),ld(e,r),t.no_events||e.fire("SetContent",t)},iv=function(e,t,n){var r;e&&pe(e,t)&&(0===(r=U(e[t],function(e){return e!==n})).length?delete e[t]:e[t]=r)};var av,uv,sv=function(e){return!!e.select},cv=function(e){return!(!e||!e.ownerDocument)&&St(vt.fromDom(e.ownerDocument),vt.fromDom(e))},lv=function(a,u,e,s){var c,l,i,n,f,d,r=function(e,t){return f||(f={},d={},n.on("NodeChange",function(e){var n=e.element,r=i.getParents(n,null,i.getRoot()),o={};pt.each(f,function(e,n){pt.each(r,function(t){if(i.is(t,n))return d[n]||(pt.each(e,function(e){e(!0,{node:t,selector:n,parents:r})}),d[n]=e),o[n]=e,!1})}),pt.each(d,function(e,t){o[t]||(delete d[t],pt.each(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),f[e]||(f[e]=[]),f[e].push(t),{unbind:function(){iv(f,e,t),iv(d,e,t)}}},t=function(e,t){return ov(s,e,t)},o=function(e){var t=g();t.collapse(!!e),p(t)},m=function(){return u.getSelection?u.getSelection():u.document.selection},g=function(){var e,t,n=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}},r=u.document;if(s.bookmark!==undefined&&!1===Ud(s)){var o=kd(s);if(o.isSome())return o.map(function(e){return Wd(s,[e])[0]}).getOr(r.createRange())}try{(e=m())&&!mn(e.anchorNode)&&(t=0<e.rangeCount?e.getRangeAt(0):(e.createRange?e:r).createRange(),t=Wd(s,[t])[0])}catch(i){}return(t=t||(r.createRange?r.createRange():r.body.createTextRange())).setStart&&9===t.startContainer.nodeType&&t.collapsed&&(r=a.getRoot(),t.setStart(r,0),t.setEnd(r,0)),c&&l&&(0===n(t.START_TO_START,t,c)&&0===n(t.END_TO_END,t,c)?t=l:l=c=null),t},p=function(e,t){var n;if((r=e)&&(!!sv(r)||cv(r.startContainer)&&cv(r.endContainer))){var r=sv(e)?e:null;if(r){l=null;try{r.select()}catch(o){}}else{r=m();if(e=s.fire("SetSelectionRange",{range:e,forward:t}).range,r){l=e;try{r.removeAllRanges(),r.addRange(e)}catch(o){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),c=0<r.rangeCount?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||lt.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(n,0,n,1)),s.fire("AfterSetSelectionRange",{range:e,forward:t})}}},h=function(){var e=m(),t=null==e?void 0:e.anchorNode,n=null==e?void 0:e.focusNode;if(!e||!t||!n||mn(t)||mn(n))return!0;var r=a.createRng();r.setStart(t,e.anchorOffset),r.collapse(!0);t=a.createRng();return t.setStart(n,e.focusOffset),t.collapse(!0),r.compareBoundaryPoints(r.START_TO_START,t)<=0},v={bookmarkManager:null,controlSelection:null,dom:i=a,win:u,serializer:e,editor:n=s,collapse:o,setCursorLocation:function(e,t){var n=a.createRng();V(e)&&V(t)?(n.setStart(e,t),n.setEnd(e,t),p(n),o(!1)):(lf(a,n,s.getBody(),!0),p(n))},getContent:function(e){return tv(s,e)},setContent:t,getBookmark:function(e,t){return b.getBookmark(e,t)},moveToBookmark:function(e){return b.moveToBookmark(e)},select:function(e,t){var r,o;return r=a,o=t,A.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&(lf(r,n,e,!0),lf(r,n,e,!1)),n}).each(p),e},isCollapsed:function(){var e=g(),t=m();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:h,setNode:function(e){return t(a.getOuterHTML(e)),e},getNode:function(){return function(e,t){if(!t)return e;var n=t.startContainer,r=t.endContainer,o=t.startOffset,i=t.endOffset,e=t.commonAncestorContainer;return!t.collapsed&&(n===r&&i-o<2&&n.hasChildNodes()&&(e=n.childNodes[o]),3===n.nodeType&&3===r.nodeType&&(n=n.length===o?$d(n.nextSibling,!0):n.parentNode,r=0===i?$d(r.previousSibling,!1):r.parentNode,n&&n===r))?n:e&&3===e.nodeType?e.parentNode:e}(s.getBody(),g())},getSel:m,setRng:p,getRng:g,getStart:function(e){return Vd(s.getBody(),g(),e)},getEnd:function(e){return qd(s.getBody(),g(),e)},getSelectedBlocks:function(e,t){return function(e,t,n,r){var o=[],i=e.getRoot();if(n=e.getParent(n||Vd(i,t,t.collapsed),e.isBlock),r=e.getParent(r||qd(i,t,t.collapsed),e.isBlock),n&&n!==i&&o.push(n),n&&r&&n!==r)for(var a,u=new Ar(n,i);(a=u.next())&&a!==r;)e.isBlock(a)&&o.push(a);return r&&n!==r&&r!==i&&o.push(r),o}(a,g(),e,t)},normalize:function(){var e=g(),t=m();if(1<tf(t).length||!ff(s))return e;t=If(a,e);return t.each(function(e){p(e,h())}),t.getOr(e)},selectorChanged:function(e,t){return r(e,t),v},selectorChangedWithUnbind:r,getScrollContainer:function(){for(var e,t=a.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){(s.inline?ud:cd)(s,e,t)},placeCaretAt:function(e,t){return p(Af(e,t,s.getDoc()))},getBoundingClientRect:function(){var e=g();return e.collapsed?cs.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){u=c=l=null,y.destroy()}},b=wf(v),y=_f(v,s);return v.bookmarkManager=b,v.controlSelection=y,v},fv=function(e,a,u){e.addNodeFilter("font",function(e){Y(e,function(e){var t,n=a.parse(e.attr("style")),r=e.attr("color"),o=e.attr("face"),i=e.attr("size");r&&(n.color=r),o&&(n["font-family"]=o),i&&(n["font-size"]=u[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",a.serialize(n)),t=e,Y(["color","face","size"],function(e){t.attr(e,null)})})})},dv=function(e,t){var n,r=ti();t.convert_fonts_to_spans&&fv(e,r,pt.explode(t.font_size_legacy_values)),n=r,e.addNodeFilter("strike",function(e){Y(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},mv=function(e){var t,n=decodeURIComponent(e).split(","),e=/data:([^;]+)/.exec(n[0]);return{type:t=e?e[1]:t,data:n[1]}},gv=function(n){return new hr(function(e){var t=mv(n);!function(e,t){var n;try{n=atob(t)}catch(FS){return A.none()}for(var r=new Uint8Array(n.length),o=0;o<r.length;o++)r[o]=n.charCodeAt(o);return A.some(new Blob([r],{type:e}))}(t.type,t.data).fold(function(){return e(new Blob([]))},e)})},pv=function(e){return 0===e.indexOf("blob:")?(i=e,new hr(function(e,t){var n=function(){t("Cannot convert "+i+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="blob",r.onload=function(){200===r.status?e(r.response):n()},r.onerror=n,r.send()}catch(o){n()}})):0===e.indexOf("data:")?gv(e):null;var i},hv=0,vv=function(e){return(e||"blobid")+hv++},bv=function(r,o,i,t){var e,n,a,u;0!==o.src.indexOf("blob:")?(e=(n=mv(o.src)).data,n=n.type,(u=r.getByData(a=e,n))?i({image:o,blobInfo:u}):pv(o.src).then(function(e){u=r.create(vv(),e,a),r.add(u),i({image:o,blobInfo:u})},function(e){t(e)})):(u=r.getByUri(o.src))?i({image:o,blobInfo:u}):pv(o.src).then(function(t){var n;n=t,new hr(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)}).then(function(e){a=mv(e).data,u=r.create(vv(),t,a),r.add(u),i({image:o,blobInfo:u})})},function(e){t(e)})},yv=function(r,o){var i={};return{findAll:function(e,n){n=n||E;e=U((e=e)?re(e.getElementsByTagName("img")):[],function(e){var t=e.src;return lt.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(t&&t!==lt.transparentSrc&&(0===t.indexOf("blob:")?!r.isUploaded(t)&&n(e):0===t.indexOf("data:")&&n(e)))))}),e=I(e,function(n){if(i[n.src]!==undefined)return new hr(function(t){i[n.src].then(function(e){return"string"==typeof e?e:void t({image:n,blobInfo:e.blobInfo})})});var e=new hr(function(e,t){bv(o,n,e,t)}).then(function(e){return delete i[e.image.src],e})["catch"](function(e){return delete i[n.src],e});return i[n.src]=e});return hr.all(e)}}},Cv=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new Gd("br",1)).shortEnded=!0:r.empty().append(new Gd("#text",3)).value=qr},wv=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},xv=function(t,e,n,r){return r.isEmpty(e,n,function(e){return function(e,t){t=e.getElementRule(t.name);return t&&t.paddEmpty}(t,e)})},Sv=function(e,p){var h=e.schema;p.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,o,i,a,u,s,c,l,f=e.length,d=pt.extend({},h.getBlockElements()),m=h.getNonEmptyElements(),g=h.getWhiteSpaceElements();for(d.body=1,r=0;r<f;r++)if(i=(o=e[r]).parent,d[o.parent.name]&&o===i.lastChild){for(u=o.prev;u;){if("span"!==(s=u.name)||"bookmark"!==u.attr("data-mce-type")){"br"===s&&(o=null);break}u=u.prev}o&&(o.remove(),xv(h,m,g,i)&&(c=h.getElementRule(i.name))&&(c.removeEmpty?i.remove():c.paddEmpty&&Cv(p,n,d,i)))}else{for(a=o;i&&i.firstChild===a&&i.lastChild===a&&!d[(a=i).name];)i=i.parent;a===i&&!0!==p.padd_empty_with_br&&((l=new Gd("#text",3)).value=qr,o.replace(l))}}),e.addAttributeFilter("href",function(e){var t=e.length;if(!p.allow_unsafe_link_target)for(;t--;){var n=e[t];"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",function(e){e=e?pt.trim(e):"";return/\b(noopener)\b/g.test(e)?e:e.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")}(n.attr("rel")))}}),p.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);}),p.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)"ul"!==(n=(t=e[r]).parent).name&&"ol"!==n.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((n=new Gd("li",1)).attr("style","list-style-type: none"),t.wrap(n)))}),p.validate&&h.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,u,s=e.length,c=h.getValidClasses();s--;){for(n=(t=e[s]).attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],u=!1,(a=c["*"])&&a[o]&&(u=!0),a=c[t.name],(u=!u&&a&&a[o]?!0:u)&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}}),p.blob_cache},Nv=pt.makeMap,Ev=pt.each,kv=pt.explode,_v=pt.extend,Tv=function(T,A){void 0===A&&(A=Zo());var R={},D=[],O={},B={};(T=T||{}).validate=!("validate"in T)||T.validate,T.root_name=T.root_name||"body";var e,t,P=function(e){var t,n,r=e.name;r in R&&((n=O[r])?n.push(e):O[r]=[e]),t=D.length;for(;t--;)(r=D[t].name)in e.attributes.map&&((n=B[r])?n.push(e):B[r]=[e]);return e},n={schema:A,addAttributeFilter:function(e,n){Ev(kv(e),function(e){for(var t=0;t<D.length;t++)if(D[t].name===e)return void D[t].callbacks.push(n);D.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(D)},addNodeFilter:function(e,n){Ev(kv(e),function(e){var t=R[e];t||(R[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e,t=[];for(e in R)pe(R,e)&&t.push({name:e,callbacks:R[e]});return t},filterNode:P,parse:function(e,i){var t,n,r,o,a,u,s,c,l=[];i=i||{},O={},B={};var f,d=_v(Nv("script,style,head,html,body,title,meta,param"),A.getBlockElements()),m=A.getNonEmptyElements(),g=A.children,p=T.validate,h=("forced_root_block"in i?i:T).forced_root_block,v=!1===(f=h)?"":!0===f?"p":f,b=A.getWhiteSpaceElements(),y=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,w=/[ \t\r\n]+/g,x=/^[ \t\r\n]+$/,S=pe(b,i.context)||pe(b,T.root_name),N=function(e,t){var n=new Gd(e,t);return e in R&&((t=O[e])?t.push(n):O[e]=[n]),n},E=function(e){for(var t,n=A.getBlockElements(),r=e.prev;r&&3===r.type;){if(0<(t=r.value.replace(C,"")).length)return void(r.value=t);if(t=r.next){if(3===t.type&&t.value.length){r=r.prev;continue}if(!n[t.name]&&"script"!==t.name&&"style"!==t.name){r=r.prev;continue}}t=r.prev,r.remove(),r=t}},k=nm({validate:p,allow_html_data_urls:T.allow_html_data_urls,allow_svg_data_urls:T.allow_svg_data_urls,allow_script_urls:T.allow_script_urls,allow_conditional_comments:T.allow_conditional_comments,preserve_cdata:T.preserve_cdata,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(A.getSelfClosingElements()),cdata:function(e){c.append(N("#cdata",4)).value=e},text:function(e,t){var n,r;S||(e=e.replace(w," "),n=c.lastChild,r=d,n&&(r[n.name]||"br"===n.name)&&(e=e.replace(y,""))),0!==e.length&&((n=N("#text",3)).raw=!!t,c.append(n).value=e)},comment:function(e){c.append(N("#comment",8)).value=e},pi:function(e,t){c.append(N(e,7)).value=t,E(c)},doctype:function(e){c.append(N("#doctype",10)).value=e,E(c)},start:function(e,t,n){var r,o,i,a=p?A.getElementRule(e):{};if(a){for((r=N(a.outputName||e,1)).attributes=t,r.shortEnded=n,c.append(r),(a=g[c.name])&&g[r.name]&&!a[r.name]&&l.push(r),o=D.length;o--;)(i=D[o].name)in t.map&&((u=B[i])?u.push(r):B[i]=[r]);d[e]&&E(r),n||(c=r),!S&&b[e]&&(S=!0)}},end:function(e){var t,n,r,o=p?A.getElementRule(e):{};if(o){if(d[e]&&!S){if((t=c.firstChild)&&3===t.type)if(0<(n=t.value.replace(y,"")).length)t.value=n,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.next,0!==n.length&&!x.test(n)||(t.remove(),t=r),t=r;if((t=c.lastChild)&&3===t.type)if(0<(n=t.value.replace(C,"")).length)t.value=n,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.prev,0!==n.length&&!x.test(n)||(t.remove(),t=r),t=r}if(S&&b[e]&&(S=!1),o.removeEmpty&&xv(A,m,b,c))return e=c.parent,d[c.name]?c.empty().remove():c.unwrap(),void(c=e);o.paddEmpty&&(wv(o=c,"#text")&&o.firstChild.value===qr||xv(A,m,b,c))&&Cv(T,i,d,c),c=c.parent}}},A),_=c=new Gd(i.context||T.root_name,11);if(k.parse(e,i.format),p&&l.length&&(i.context?i.invalid=!0:function(e){for(var t,n,r,o,i,a,u,s,c,l,f=Nv("tr,td,th,tbody,thead,tfoot,table"),d=A.getNonEmptyElements(),m=A.getWhiteSpaceElements(),g=A.getTextBlockElements(),p=A.getSpecialElements(),h=0;h<e.length;h++)if((t=e[h]).parent&&!t.fixed)if(g[t.name]&&"li"===t.parent.name){for(c=t.next;c&&g[c.name];)c.name="li",c.fixed=!0,t.parent.insert(c,t.parent),c=c.next;t.unwrap(t)}else{for(r=[t],n=t.parent;n&&!A.isValidChild(n.name,t.name)&&!f[n.name];n=n.parent)r.push(n);if(n&&1<r.length){for(r.reverse(),o=i=P(r[0].clone()),s=0;s<r.length-1;s++){for(A.isValidChild(i.name,r[s].name)?(a=P(r[s].clone()),i.append(a)):a=i,u=r[s].firstChild;u&&u!==r[s+1];)l=u.next,a.append(u),u=l;i=a}xv(A,d,m,o)?n.insert(t,r[0],!0):(n.insert(o,r[0],!0),n.insert(t,o)),n=r[0],(xv(A,d,m,n)||wv(n,"br"))&&n.empty().remove()}else t.parent&&("li"!==t.name?A.isValidChild(t.parent.name,"div")&&A.isValidChild("div",t.name)?t.wrap(P(new Gd("div",1))):p[t.name]?t.empty().remove():t.unwrap():!(c=t.prev)||"ul"!==c.name&&"ol"!==c.name?!(c=t.next)||"ul"!==c.name&&"ol"!==c.name?t.wrap(P(new Gd("ul",1))):c.insert(t,c.firstChild,!0):c.append(t))}}(l)),v&&("body"===_.name||i.isRootContent)&&function(){var e,t,n=_.firstChild,r=function(e){e&&((n=e.firstChild)&&3===n.type&&(n.value=n.value.replace(y,"")),(n=e.lastChild)&&3===n.type&&(n.value=n.value.replace(C,"")))};if(A.isValidChild(_.name,v.toLowerCase())){for(;n;)e=n.next,3===n.type||1===n.type&&"p"!==n.name&&!d[n.name]&&!n.attr("data-mce-type")?(t||((t=N(v,1)).attr(T.forced_root_block_attrs),_.insert(t,n)),t.append(n)):(r(t),t=null),n=e;r(t)}}(),!i.invalid){for(s in O)if(pe(O,s)){for(u=R[s],o=(t=O[s]).length;o--;)t[o].parent||t.splice(o,1);for(n=0,r=u.length;n<r;n++)u[n](t,s,i)}for(n=0,r=D.length;n<r;n++)if((u=D[n]).name in B){for(o=(t=B[u.name]).length;o--;)t[o].parent||t.splice(o,1);for(o=0,a=u.callbacks.length;o<a;o++)u.callbacks[o](t,u.name,i)}}return _}};return Sv(n,T),e=n,(t=T).inline_styles&&dv(e,t),n},Av=function(e,t,n){return o=n,(r=e)&&r.hasEventListeners("PreProcess")&&!o.no_events?function(e,t,n){var r,o,i=e.dom;t=t.cloneNode(!0);var a=document.implementation;return a.createHTMLDocument&&(r=a.createHTMLDocument(""),pt.each("BODY"===t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!==t.nodeName?r.body.firstChild:r.body,o=i.doc,i.doc=r),e=e,n=Ee(Ee({},n),{node:t}),e.fire("PreProcess",n),o&&(i.doc=o),t}(e,t,n):t;var r,o},Rv=function(e,t,n){-1===pt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},Dv=function(e,t,n,r,o){r=r,r=lm(t,n).serialize(r);return e=e,r=r,(o=o).no_events||!e?r:(e=e,r=Ee(Ee({},o),{content:r}),e.fire("PostProcess",r)).content},Ov=function(n,r){var e=["data-mce-selected"],o=r&&r.dom?r.dom:Qa.DOM,i=r&&r.schema?r.schema:Zo(n);n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs;var t,s,c,a=Tv(n,i);s=n,c=o,(t=a).addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}),t.addAttributeFilter("src,href,style",function(e,t){for(var n,r,o=e.length,i="data-mce-"+t,a=s.url_converter,u=s.url_converter_scope;o--;)(r=(n=e[o]).attr(i))!==undefined?(n.attr(t,0<r.length?r:null),n.attr(i,null)):(r=n.attr(t),"style"===t?r=c.serializeStyle(c.parseStyle(r),n.name):a&&(r=a.call(u,r,t,n.name)),n.attr(t,0<r.length?r:null))}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(t=e[r]).attr("class")&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),t.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attr("data-mce-type")||n.cleanup||(A.from(r.firstChild).exists(function(e){return!Wr(e.value)})?r.unwrap():r.remove())}),t.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Vo.decode(t.value))}),t.addNodeFilter("script,style",function(e,t){for(var n,r,o,i=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)r=(n=e[i]).firstChild?n.firstChild.value:"","script"===t?((o=n.attr("type"))&&n.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="\x3c!--\n"+a(r)+"\n--\x3e")}),t.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],s.preserve_cdata&&0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=c.decode(t.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}),t.addAttributeFilter("data-mce-type",function(e){Y(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)});return{schema:i,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:function(e,t){t=Ee({format:"html"},t=void 0===t?{}:t),e=Av(r,e,t),e=function(e,t,n){e=Kr(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Hr(vt.fromDom(t))?e:pt.trim(e)}(o,e,t),e=function(e,t,n){n=n.selection?Ee({forced_root_block:!1},n):n,e=e.parse(t,n);return t=function(e){return e&&"br"===e.name},n=(n=e).lastChild,!t(n)||t(t=n.prev)&&(n.remove(),t.remove()),e}(a,e,t);return"tree"===t.format?e:Dv(r,n,i,e,t)},addRules:function(e){i.addValidElements(e)},setRules:function(e){i.setValidElements(e)},addTempAttr:h(Rv,a,e),getTempAttrs:X(e),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters}},Bv=function(e,t){t=Ov(e,t);return{schema:t.schema,addNodeFilter:t.addNodeFilter,addAttributeFilter:t.addAttributeFilter,serialize:t.serialize,addRules:t.addRules,setRules:t.setRules,addTempAttr:t.addTempAttr,getTempAttrs:t.getTempAttrs,getNodeFilters:t.getNodeFilters,getAttributeFilters:t.getAttributeFilters}},Pv=function(e,t){var n=(t=void 0===t?{}:t).format||"html";return Zh(e).editor.getContent(t,n)},Lv=function(e,t,n){return Zh(e).editor.setContent(t,n=void 0===n?{}:n)},Iv=Qa.DOM,Mv=function(e){return A.from(e).each(function(e){return e.destroy()})},Fv=function(e){var t,n,r,o;e.removed||(t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement(),r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Iv.remove(o.nextSibling),e.fire("remove"),e.editorManager.remove(e),!e.inline&&r&&Iv.setStyle(e.id,"display",e.orgDisplay),e.fire("detach"),Iv.remove(e.getContainer()),Mv(t),Mv(n),e.destroy())},Uv=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Mv(n),Mv(r)),(r=(n=e).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),Iv.unbind(r,"submit reset",n.formEventDelegate)),(n=e).contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),e.destroyed=!0):e.remove())},zv=(av=function(e,t){return C(e)&&C(t)?zv(e,t):t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)pe(i,o)&&(n[o]=av(n[o],i[o]))}return n}),Ve=st().deviceType,jv=Ve.isTouch(),Hv=Ve.isPhone(),Vv=Ve.isTablet(),qv=["lists","autolink","autosave"],$v={table_grid:!1,object_resizing:!1,resize:!1},Wv=function(e){e=y(e)?e.join(" "):e,e=I(W(e)?e.split(" "):[],qe);return U(e,function(e){return 0<e.length})},Kv=function(n,e){var t=fe(e,function(e,t){return P(n,t)});return e=t.t,t=t.f,{sections:X(e),settings:X(t)}},Xv=function(e,t){return pe(e.sections(),t)},Yv=function(e,t){return ge(e,"toolbar_mode").orThunk(function(){return ge(e,"toolbar_drawer").map(function(e){return!1===e?"wrap":e})}).getOr(t)},Gv=function(e,t,n,r){return e&&(a=i="mobile",u=(o=t).sections(),Xv(o,i)&&u[i].theme===a)?U(r,h(P,qv)):e&&Xv(t,"mobile")?r:n;var o,i,a,u},Jv=function(e,t,n,r){var o,i=Wv(n.forced_plugins),a=Wv(r.plugins),n=Xv(o=t,n="mobile")?o.sections()[n]:{},n=n.plugins?Wv(n.plugins):a,n=Gv(e,t,a,n),n=(n=n,[].concat(Wv(i)).concat(Wv(n)));if(lt.browser.isIE()&&P(n,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return pt.extend(r,{plugins:n.join(" ")})},Qv=function(e,t,n,r,o){t=e?{mobile:function(e,t){e={resize:!1,toolbar_mode:Yv(e,"scrolling"),toolbar_sticky:!1};return Ee(Ee(Ee({},$v),e),t?{menubar:!1}:{})}(o.mobile||{},t)}:{},o=Kv(["mobile"],zv(t,o)),n=pt.extend(n,r,o.settings(),(n=o,e&&Xv(n,"mobile")?function(e,t,n){void 0===n&&(n={});e=e.sections(),t=ge(e,t).getOr({});return pt.extend({},n,t)}(o,"mobile"):{}),{validate:!0,external_plugins:function(e,t){t=t.external_plugins||{};return e&&e.external_plugins?pt.extend({},e.external_plugins,t):t}(r,o.settings())});return Jv(e,o,r,n)},Zv=function(e,t,n,r,o){e=function(e,t,n,r,o){o={id:t,theme:"silver",toolbar_mode:Yv(e,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o};return Ee(Ee({},o),r?$v:{})}(o,t,n,jv,e);return Qv(Hv||Vv,Hv,e,r,o)},eb=function(e,t,n){return A.from(t.settings[n]).filter(e)},tb=function(e,t,n,r){var o,i,a,u=t in e.settings?e.settings[t]:n;return"hash"===r?(a={},"string"==typeof(i=u)?Y(0<i.indexOf("=")?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){e=e.split("=");1<e.length?a[pt.trim(e[0])]=pt.trim(e[1]):a[pt.trim(e[0])]=pt.trim(e[0])}):a=i,a):"string"===r?eb(W,e,t).getOr(n):"number"===r?eb(w,e,t).getOr(n):"boolean"===r?eb(f,e,t).getOr(n):"object"===r?eb(C,e,t).getOr(n):"array"===r?eb(y,e,t).getOr(n):"string[]"===r?eb((o=W,function(e){return y(e)&&G(e,o)}),e,t).getOr(n):"function"===r?eb(m,e,t).getOr(n):u},nb=(uv={},{add:function(e,t){uv[e]=t},get:function(e){return uv[e]||{icons:{}}},has:function(e){return pe(uv,e)}}),k=function(e,t){return t.dom[e]},o=function(e,t){return parseInt(Fn(t,e),10)},rb=h(k,"clientWidth"),ob=h(k,"clientHeight"),ib=h(o,"margin-top"),ab=h(o,"margin-left"),ub=function(e,t,n){var r,o=vt.fromDom(e.getBody()),i=e.inline?o:vt.fromDom(Dt(o).dom.documentElement),r=(r=e.inline,o=t,e=n,n=(t=i).dom.getBoundingClientRect(),{x:o-(r?n.left+t.dom.clientLeft+ab(t):0),y:e-(r?n.top+t.dom.clientTop+ib(t):0)});return n=r.x,t=r.y,i=rb(r=i),r=ob(r),0<=n&&0<=t&&n<=i&&t<=r},sb=function(e){e=e.inline?e.getBody():e.getContentAreaContainer();return A.from(e).map(vt.fromDom).map(nn).getOr(!1)},cb=function(t){var n,r=[],o=function(){var e=t.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,reposition:e,getArgs:e}},i=function(){return A.from(r[0])},a=function(){0<r.length&&o().reposition(r)},u=function(t){q(r,function(e){return e===t}).each(function(e){r.splice(e,1)})},s=function(n,e){if(void 0===e&&(e=!0),!t.removed&&sb(t))return e&&t.fire("BeforeOpenNotification",{notification:n}),H(r,function(e){return t=o().getArgs(e),e=n,!(t.type!==e.type||t.text!==e.text||t.progressBar||t.timeout||e.progressBar||e.timeout);var t}).getOrThunk(function(){t.editorManager.setActive(t);var e=o().open(n,function(){u(e),a(),i().fold(function(){return t.focus()},function(e){return vt.fromDom(e.getEl()).dom.focus()})});return r.push(e),a(),t.fire("OpenNotification",{notification:Ee({},e)}),e})},e=X(r);return(n=t).on("SkinLoaded",function(){var e=n.getParam("service_message");e&&s({text:e,type:"warning",timeout:0},!1)}),n.on("ResizeEditor ResizeWindow NodeChange",function(){kr.requestAnimationFrame(a)}),n.on("remove",function(){Y(r.slice(),function(e){o().close(e)})}),{open:s,close:function(){i().each(function(e){o().close(e),u(e),a()})},getNotifications:e}},lb=cu.PluginManager,fb=cu.ThemeManager;var db,mb=function(n){var r=[],o=function(){var e=n.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:e=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}},i=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r?r.apply(n,e):undefined}},t=function(e){r.push(e),n.fire("OpenWindow",{dialog:e})},a=function(t){n.fire("CloseWindow",{dialog:t}),0===(r=U(r,function(e){return e!==t})).length&&n.focus()},u=function(e){n.editorManager.setActive(n),Ed(n);e=e();return t(e),e};return n.on("remove",function(){Y(r,function(e){o().close(e)})}),{open:function(e,t){return u(function(){return o().open(e,t,a)})},openUrl:function(e){return u(function(){return o().openUrl(e,a)})},alert:function(e,t,n){var r=o();r.alert(e,i(n||r,t))},confirm:function(e,t,n){var r=o();r.confirm(e,i(n||r,t))},close:function(){A.from(r[r.length-1]).each(function(e){o().close(e),a(e)})}}},gb=function(e,t){e.notificationManager.open({type:"error",text:t})},pb=function(e,t){e._skinLoaded?gb(e,t):e.on("SkinLoaded",function(){gb(e,t)})},hb=function(e,t,n){Nf(e,t,{message:n}),console.error(n)},vb=function(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t},bb=function(e,t,n){hb(e,"PluginLoadError",vb("plugin",t,n))},yb=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error||r.log).apply(r,ke([e],t))},Cb=function(e){return wb(e,(e=(t=e).getParam("content_css"),W(e)?I(e.split(","),qe):y(e)?e:!1===e||t.inline?[]:["default"]));var t},wb=function(t,e){var n=t.editorManager.baseURL+"/skins/content",r="content"+t.editorManager.suffix+".css",o=!0===t.inline;return I(e,function(e){return/^[a-z0-9\-]+$/i.test(e)&&!o?n+"/"+e+"/"+r:t.documentBaseURI.toAbsolute(e)})},xb=function(e){e.contentCSS=e.contentCSS.concat(Cb(e),wb(e,js(e)))},Sb=function(){var n={},r=function(e,t){return{status:e,resultUri:t}},t=function(e){return e in n};return{hasBlobUri:t,getResultUri:function(e){e=n[e];return e?e.resultUri:null},isPending:function(e){return!!t(e)&&1===n[e].status},isUploaded:function(e){return!!t(e)&&2===n[e].status},markPending:function(e){n[e]=r(1,null)},markUploaded:function(e,t){n[e]=r(2,t)},removeFailed:function(e){delete n[e]},destroy:function(){n={}}}},Nb=0,Eb=function(e){return e+Nb+++(e=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+e()+e()+e())},kb=function(u,a){var r={},n=function(e,n,r,t){var o=new XMLHttpRequest;o.open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(e){t(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,t;o.status<200||300<=o.status?r("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&"string"==typeof t.location?n((e=a.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):r("Invalid JSON: "+o.responseText)};var i=new FormData;i.append("file",e.blob(),e.filename()),o.send(i)},s=function(e,t){return{url:t,blobInfo:e,status:!0}},c=function(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}},l=function(e,t){pt.each(r[e],function(e){e(t)}),delete r[e]},o=function(i,t,a){return u.markPending(i.blobUri()),new hr(function(n){var r;try{var o=function(){r&&(r.close(),0)};t(i,function(e){o(),u.markUploaded(i.blobUri(),e),l(i.blobUri(),s(i,e)),n(s(i,e))},function(e,t){t=t||{};o(),u.removeFailed(i.blobUri()),l(i.blobUri(),c(i,e,t)),n(c(i,e,t))},function(t){t<0||100<t||A.from(r).orThunk(function(){return A.from(a).map(x)}).each(function(e){(r=e).progressBar.value(t)})})}catch(e){n(c(i,e.message,{}))}})},i=function(e,n){return e=pt.grep(e,function(e){return!u.isUploaded(e.blobUri())}),hr.all(pt.map(e,function(e){return u.isPending(e.blobUri())?(t=e.blobUri(),new hr(function(e){r[t]=r[t]||[],r[t].push(e)})):o(e,a.handler,n);var t}))};return!1===m(a.handler)&&(a.handler=n),{upload:function(e,t){return a.url||a.handler!==n?i(e,t):new hr(function(e){e([])})}}},_b=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},Tb=function(e,t){return kb(t,{url:e.getParam("images_upload_url","","string"),basePath:e.getParam("images_upload_base_path","","string"),credentials:e.getParam("images_upload_credentials",!1,"boolean"),handler:e.getParam("images_upload_handler",null,"function")})},Ab=function(a){var n,i,e,t,r,o,u=(n=[],i=function(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t=e.id||Eb("blobid"),n=e.name||t,r=e.blob;return{id:X(t),name:X(n),filename:X(e.filename||n+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.type.toLowerCase()]||"dat")),blob:X(r),base64:X(e.base64),blobUri:X(e.blobUri||URL.createObjectURL(r)),uri:X(e.uri)}},{create:function(e,t,n,r,o){if(W(e))return i({id:e,name:r,filename:o,blob:t,base64:n});if(C(e))return i(e);throw new Error("Unknown input type")},add:function(e){t(e.id())||n.push(e)},get:t=function(t){return e(function(e){return e.id()===t})},getByUri:function(t){return e(function(e){return e.blobUri()===t})},getByData:function(t,n){return e(function(e){return e.base64()===t&&e.blob().type===n})},findFirst:e=function(e){return H(n,e).getOrUndefined()},removeByUri:function(t){n=U(n,function(e){return e.blobUri()!==t||void URL.revokeObjectURL(e.blobUri())})},destroy:function(){Y(n,function(e){URL.revokeObjectURL(e.blobUri())}),n=[]}}),s=Sb(),c=[],l=function(n){var r=ou(null);n.on("change AddUndo",function(e){r.set(Ee({},e.level))});return{fireIfChanged:function(){var t=n.undoManager.data;ne(t).filter(function(e){return!Wh(r.get(),e)}).each(function(e){n.setDirty(!0),n.fire("change",{level:e,lastLevel:Z(t,t.length-2).getOrNull()})})}}}(a),f=function(t){return function(e){return a.selection?t(e):[]}},d=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},m=function(e,t,n){var r='src="'+n+'"'+(n===lt.transparentSrc?' data-mce-placeholder="1"':"");return e=d(e,'src="'+t+'"',r),e=d(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},g=function(t,n){Y(a.undoManager.data,function(e){"fragmented"===e.type?e.fragments=I(e.fragments,function(e){return m(e,t,n)}):e.content=m(e.content,t,n)})},p=function(e,t){var n=a.convertURL(t,"src");g(e.src,t),a.$(e).attr({src:a.getParam("images_reuse_filename",!1,"boolean")?t+(-1===t.indexOf("?")?"?":"&")+(new Date).getTime():t,"data-mce-src":n})},h=function(t){return r=r||Tb(a,s),b().then(f(function(i){var e=I(i,function(e){return e.blobInfo});return r.upload(e,_b(a)).then(f(function(e){var o=[],e=I(e,function(e,t){var n=i[t].blobInfo,r=i[t].image;return e.status&&a.getParam("images_replace_blob_uris",!0,"boolean")?(u.removeByUri(r.src),p(r,e.url)):e.error&&(e.error.options.remove&&(g(r.getAttribute("src"),lt.transparentSrc),o.push(r)),t=e.error.message,pb(a,su.translate(["Failed to upload image: {0}",t]))),{element:r,status:e.status,uploadUri:e.url,blobInfo:n}});return 0<e.length&&l.fireIfChanged(),0<o.length&&(Jh(a)?console.error("Removing images on failed uploads is currently unsupported for RTC"):a.undoManager.transact(function(){Y(o,function(e){a.dom.remove(e),u.removeByUri(e.src)})})),t&&t(e),e}))}))},v=function(t){return!1!==G(c,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||a.getParam("images_dataimg_filter",E,"function")(t))},b=function(){return(o=o||yv(s,u)).findAll(a.getBody(),v).then(f(function(e){return e=U(e,function(e){return"string"!=typeof e||void pb(a,e)}),Y(e,function(e){g(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},y=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=s.getResultUri(n);if(t)return'src="'+t+'"';t=(t=u.getByUri(n))||j(a.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null);return t?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e})};return a.on("RawSaveContent",function(e){e.content=y(e.content)}),a.on("GetContent",function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=y(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(e){Y(e,function(e){var t=e.attr("src");u.getByUri(t)||(t=s.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:u,addFilter:function(e){c.push(e)},uploadImages:h,uploadImagesAuto:function(e){if(a.getParam("automatic_uploads",!0,"boolean"))return h(e)},scanForImages:b,destroy:function(){u.destroy(),s.destroy(),o=r=null}}},Rb=function(e){var r,t,n={},o=function(e,t){e&&("string"!=typeof e?pt.each(e,function(e,t){o(t,e)}):(y(t)||(t=[t]),pt.each(t,function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))};return o((r=e.dom,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return gn(e)&&e.hasAttribute("href")},onformat:function(n,e,t){pt.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},pt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t)),o(e.getParam("formats")),{get:function(e){return e?n[e]:n},has:function(e){return pe(n,e)},register:o,unregister:function(e){return e&&n[e]&&delete n[e],n}}},Db=pt.each,Ob=Qa.DOM,Bb=function(e,t){var n,r,s=t&&t.schema||Zo({}),c=function(e){r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t,n=Ob.create(r.name);return t=n,(e=r).classes.length&&Ob.addClass(t,e.classes.join(" ")),Ob.setAttribs(t,e.attrs),n},l=function(t,e,n){var r,o,i=0<e.length&&e[0],a=i&&i.name,u=function(e,t){e="string"!=typeof e?e.nodeName.toLowerCase():e,e=s.getElementRule(e),e=e&&e.parentsRequired;return!(!e||!e.length)&&(t&&-1!==pt.inArray(e,t)?t:e[0])}(t,a);if(u)a===u?(o=e[0],e=e.slice(1)):o=u;else if(i)o=e[0],e=e.slice(1);else if(!n)return t;return o&&(r=c(o)).appendChild(t),n&&(r||(r=Ob.create("div")).appendChild(t),pt.each(n,function(e){e=c(e);r.insertBefore(e,t)})),l(r,e,o&&o.siblings)};return e&&e.length?(r=e[0],n=c(r),(t=Ob.create("div")).appendChild(l(n,e.slice(1),r.siblings)),t):""},Pb=function(e){var t,i={classes:[],attrs:{}};return"*"!==(e=i.selector=pt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,o){switch(t){case"#":i.attrs.id=n;break;case".":i.classes.push(n);break;case":":-1!==pt.inArray("checked disabled enabled read-only required".split(" "),n)&&(i.attrs[n]=n)}return"["!==r||(o=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(i.attrs[o[1]]=o[2]),""})),i.name=t||"div",i},Lb=function(n,e){var r,o="",t=function(e){e=e.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");return W(e)?e:""}(n);if(""===t)return"";var i=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}if("preview"in e){var a=ge(e,"preview");if(Tn(a,!1))return"";t=a.getOr(t)}var u=e.block||e.inline||"span",a=(a=e.selector)&&"string"==typeof a?(a=(a=a.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),pt.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=pt.map(e.split(/(?:~\+|~|\+)/),Pb),e=t.pop();return t.length&&(e.siblings=t),e}).reverse()):[],a=a.length?(a[0].name||(a[0].name=u),u=e.selector,Bb(a,n)):Bb([u],n),s=Ob.select(u,a)[0]||a.firstChild;return Db(e.styles,function(e,t){e=i(e);e&&Ob.setStyle(s,t,e)}),Db(e.attributes,function(e,t){e=i(e);e&&Ob.setAttrib(s,t,e)}),Db(e.classes,function(e){e=i(e);Ob.hasClass(s,e)||Ob.addClass(s,e)}),n.fire("PreviewFormats"),Ob.setStyles(a,{position:"absolute",left:-65535}),n.getBody().appendChild(a),r=Ob.getStyle(n.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Db(t.split(" "),function(e){var t=Ob.getStyle(s,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=Ob.getStyle(n.getBody(),e,!0),"#ffffff"===Ob.toHex(t).toLowerCase())||"color"===e&&"#000000"===Ob.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===r)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*r+"px"}"border"===e&&t&&(o+="padding:0 2px;"),o+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),Ob.remove(a),o},Ib=function(o){var e=Rb(o),i=ou(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(o),Mp(o),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:function(e,t,n){e=e,t=t,n=n,ev(o).formatter.apply(e,t,n)},remove:function(e,t,n,r){e=e,t=t,n=n,r=r,ev(o).formatter.remove(e,t,n,r)},toggle:function(e,t,n){e=e,t=t,n=n,ev(o).formatter.toggle(e,t,n)},match:function(e,t,n){return e=e,t=t,n=n,ev(o).formatter.match(e,t,n)},closest:function(e){return e=e,ev(o).formatter.closest(e)},matchAll:function(e,t){return e=e,t=t,ev(o).formatter.matchAll(e,t)},matchNode:function(e,t,n,r){return e=e,t=t,n=n,r=r,ev(o).formatter.matchNode(e,t,n,r)},canApply:function(e){return e=e,ev(o).formatter.canApply(e)},formatChanged:function(e,t,n){return r=i,e=e,t=t,void 0===(n=n)&&(n=!1),ev(o).formatter.formatChanged(r,e,t,n);var r},getCssText:h(Lb,o)}},Mb=function(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},Fb=function(n,r,o){var i=ou(!1),a=function(e){Xh(r,!1,o),r.add({},e)};n.on("init",function(){r.add()}),n.on("BeforeExecCommand",function(e){e=e.command;Mb(e)||(Yh(r,o),r.beforeChange())}),n.on("ExecCommand",function(e){var t=e.command;Mb(t)||a(e)}),n.on("ObjectResizeStart cut",function(){r.beforeChange()}),n.on("SaveContent ObjectResized blur",a),n.on("dragend",a),n.on("keyup",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(a(),n.nodeChanged()),46!==t&&8!==t||n.nodeChanged(),i.get()&&r.typing&&!1===Wh(Hh(n),r.data[0])&&(!1===n.isDirty()&&(n.setDirty(!0),n.fire("change",{level:r.data[0],lastLevel:null})),n.fire("TypingUndo"),i.set(!1),n.nodeChanged()))}),n.on("keydown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?r.typing&&a(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224===n||91===n||r.typing||t||(r.beforeChange(),Xh(r,!0,o),r.add({},e),i.set(!0))))}),n.on("mousedown",function(e){r.typing&&a(e)});n.on("input",function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||("insertFromPaste"===(t=e).inputType||"insertFromDrop"===t.inputType))&&a(e)}),n.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||n.nodeChanged()})},Ub=function(a){var e,u=ou(A.none()),s=ou(0),c=ou(0),l={data:[],typing:!1,beforeChange:function(){var e,t;e=s,t=u,ev(a).undoManager.beforeChange(e,t)},add:function(e,t){return n=l,r=c,o=s,i=u,e=e,t=t,ev(a).undoManager.add(n,r,o,i,e,t);var n,r,o,i},undo:function(){return e=l,t=s,n=c,ev(a).undoManager.undo(e,t,n);var e,t,n},redo:function(){return e=c,t=l.data,ev(a).undoManager.redo(e,t);var e,t},clear:function(){var e,t;e=l,t=c,ev(a).undoManager.clear(e,t)},reset:function(){var e;e=l,ev(a).undoManager.reset(e)},hasUndo:function(){return e=l,t=c,ev(a).undoManager.hasUndo(e,t);var e,t},hasRedo:function(){return e=l,t=c,ev(a).undoManager.hasRedo(e,t);var e,t},transact:function(e){return t=l,n=s,e=e,ev(a).undoManager.transact(t,n,e);var t,n},ignore:function(e){var t;t=s,e=e,ev(a).undoManager.ignore(t,e)},extra:function(e,t){var n,r;n=l,r=c,e=e,t=t,ev(a).undoManager.extra(n,r,e,t)}};return Jh(a)||Fb(a,l,s),(e=a).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),l},zb=[9,27,Ef.HOME,Ef.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ef.DOWN,Ef.UP,Ef.LEFT,Ef.RIGHT].concat(lt.browser.isFirefox()?[224]:[]),jb="data-mce-placeholder",Hb=function(e){return"keydown"===e.type||"keyup"===e.type},Vb=function(e){e=e.keyCode;return e===Ef.BACKSPACE||e===Ef.DELETE},qb=function(r){var o=r.dom,i=Ls(r),a=r.getParam("placeholder",Os.getAttrib(r.getElement(),"placeholder"),"string"),u=function(e,t){var n;!function(e){if(Hb(e)){var t=e.keyCode;return!Vb(e)&&(Ef.metaKeyPressed(e)||e.altKey||112<=t&&t<=123||P(zb,t))}return!1}(e)&&(n=r.getBody(),e=!(Hb(e=e)&&!(Vb(e)||"keyup"===e.type&&229===e.keyCode))&&function(e,t,n){if(Eo(vt.fromDom(t),!1)){var r=""===n,o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&(r?!e.isBlock(o):n===o.nodeName.toLowerCase())}return!1}(o,n,i),""!==o.getAttrib(n,jb)===e&&!t||(o.setAttrib(n,jb,e?a:null),o.setAttrib(n,"aria-placeholder",e?a:null),r.fire("PlaceholderToggle",{state:e}),r.on(e?"keydown":"keyup",u),r.off(e?"keyup":"keydown",u)))};a&&r.on("init",function(e){u(e,!0),r.on("change SetContent ExecCommand",u),r.on("paste",function(e){return kr.setEditorTimeout(r,function(){return u(e)})})})},$b=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Wb=function(e,t){return yt(vt.fromDom(t),e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))},Kb=function(e){return"rtl"===Qa.DOM.getStyle(e,"direction",!0)||(e=e.textContent,$b.test(e))},Xb=function(e,t,n){e=e,t=t,e=U(Qa.DOM.getParents(n.container(),"*",t),e);return A.from(e[e.length-1])},Yb=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?Jr(n)?yn(n.nextSibling)?cs(n.nextSibling,0):cs.after(n):eo(t)?cs(n,r+1):t:Jr(n)?yn(n.previousSibling)?cs(n.previousSibling,n.previousSibling.data.length):cs.before(n):to(t)?cs(n,r-1):t},Gb=h(Yb,!0),Jb=h(Yb,!1),Qb=function(e,t){return St(e,t)?fr(t,function(e){return Mr(e)||Ur(e)},(n=e,function(e){return wt(n,vt.fromDom(e.dom.parentNode))})):A.none();var n},Zb=function(e){var t;e.dom.isEmpty(e.getBody())&&(e.setContent(""),e=(e=(t=e).getBody()).firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e,t.selection.setCursorLocation(e,0))},ey=function(e,t){return{from:e,to:t}},ty=function(e,t){var n=vt.fromDom(e),e=vt.fromDom(t.container());return Qb(n,e).map(function(e){return{block:e,position:t}})},ny=function(o,i,e){var t=ty(o,cs.fromRangeStart(e)),e=t.bind(function(e){return Qc(i,o,e.position).bind(function(e){return ty(o,e).map(function(e){return t=o,n=i,Sn((r=e).position.getNode())&&!1===Eo(r.block)?tl(!1,r.block.dom).bind(function(e){return e.isEqual(r.position)?Qc(n,t,e).bind(function(e){return ty(t,e)}):A.some(r)}).getOr(r):r;var t,n,r})})});return An(t,e,ey).filter(function(e){return!1===wt(e.from.block,e.to.block)&&Bt((n=e).from.block).bind(function(t){return Bt(n.to.block).filter(function(e){return wt(t,e)})}).isSome()&&(!1===kn((e=e).from.block.dom)&&!1===kn(e.to.block.dom));var n})},ry=function(e){var t,e=(t=Ft(e),q(t,Pr).fold(X(t),function(e){return t.slice(0,e)}));return Y(e,en),e},oy=function(e,t){e=Pm(t,e);return H(e.reverse(),function(e){return Eo(e)}).each(en)},iy=function(e,t,n,r){if(Eo(n))return Rm(n),ol(n.dom);0===U(It(r),function(e){return!Eo(e)}).length&&Eo(t)&&Xt(r,vt.fromTag("br"));n=rl(n.dom,cs.before(r.dom));return Y(ry(t),function(e){Xt(r,e)}),oy(e,t),n},ay=function(e,t,n){if(Eo(n))return en(n),Eo(t)&&Rm(t),ol(t.dom);var r=il(n.dom);return Y(ry(t),function(e){Jt(n,e)}),oy(e,t),r},uy=function(e,t){return St(t,e)?function(e,t){e=Pm(t,e);return A.from(e[e.length-1])}(t,e):A.none()},sy=function(e,t){tl(e,t.dom).map(function(e){return e.getNode()}).map(vt.fromDom).filter(Ir).each(en)},cy=function(e,t,n){return sy(!0,t),sy(!1,n),uy(t,n).fold(h(ay,e,t,n),h(iy,e,t,n))},ly=function(e,t,n,r){return t?cy(e,r,n):cy(e,n,r)},fy=function(t,n){var e,r,o,i=vt.fromDom(t.getBody()),o=(e=i.dom,r=n,((o=t.selection.getRng()).collapsed?ny(e,r,o):A.none()).bind(function(e){return ly(i,n,e.from.block,e.to.block)}));return o.each(function(e){t.selection.setRng(e.toRange())}),o.isSome()},dy=function(e,t){t=vt.fromDom(t),e=h(wt,e);return lr(t,jr,e).isSome()},my=function(e,t){var n=rl(e.dom,cs.fromRangeStart(t)).isNone(),r=nl(e.dom,cs.fromRangeEnd(t)).isNone();return!(dy(e=e,(t=t).startContainer)||dy(e,t.endContainer))&&n&&r},gy=function(e){var n,r,o,t=vt.fromDom(e.getBody()),i=e.selection.getRng();return my(t,i)?((i=e).setContent(""),i.selection.setCursorLocation(),!0):(n=t,r=e.selection,o=r.getRng(),An(Qb(n,vt.fromDom(o.startContainer)),Qb(n,vt.fromDom(o.endContainer)),function(e,t){return!1===wt(e,t)&&(o.deleteContents(),ly(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1))},py=function(e,t){return!e.selection.isCollapsed()&&gy(e)},hy=En,vy=kn,by=function(e,t,n,r,o){return A.from(t._selectionOverrides.showCaret(e,n,r,o))},yy=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?A.none():A.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t))},Cy=function(e,t,n){var r=_c(1,e.getBody(),t),t=cs.fromRangeStart(r),r=t.getNode();if(lc(r))return by(1,e,r,!t.isAtEnd(),!1);r=t.getNode(!0);if(lc(r))return by(1,e,r,!1,!1);t=e.dom.getParent(t.getNode(),function(e){return vy(e)||hy(e)});return lc(t)?by(1,e,t,!1,n):A.none()},wy=function(e,t,n){return t.collapsed?Cy(e,t,n).getOr(t):t},xy=function(e){return _m(e)||Sm(e)},Sy=function(e){return Tm(e)||Nm(e)},Ny=function(n,r,e,t,o,i){return by(t,n,i.getNode(!o),o,!0).each(function(e){var t;r.collapsed?(t=r.cloneRange(),o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t.deleteContents()):r.deleteContents(),n.selection.setRng(e)}),i=n.dom,yn(e=e)&&0===e.data.length&&i.remove(e),!0},Ey=function(e,t){var n=e.selection.getRng();if(!yn(n.commonAncestorContainer))return!1;var r=t?ls.Forwards:ls.Backwards,o=Kc(e.getBody()),i=h(Dc,t?o.next:o.prev),a=t?xy:Sy,u=Ac(r,e.getBody(),n),o=Yb(t,i(u));if(!o||!Oc(u,o))return!1;if(a(o))return Ny(e,n,u.getNode(),r,t,o);i=i(o);return!!(i&&a(i)&&Oc(o,i))&&Ny(e,n,u.getNode(),r,t,i)},ky=n([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),_y=function(e,t,n,r){var o=r.getNode(!1===t);return Qb(vt.fromDom(e),vt.fromDom(n.getNode())).map(function(e){return Eo(e)?ky.remove(e.dom):ky.moveToElement(o)}).orThunk(function(){return A.some(ky.moveToElement(o))})},Ty=function(u,s,c){return Qc(s,u,c).bind(function(e){return a=e.getNode(),jr(vt.fromDom(a))||Ur(vt.fromDom(a))?A.none():(t=u,o=e,i=function(e){return Lr(vt.fromDom(e))&&!xc(r,o,t)},Tc(!(n=s),r=c).fold(function(){return Tc(n,o).fold(N,i)},i)?A.none():s&&kn(e.getNode())||!1===s&&kn(e.getNode(!0))?_y(u,s,c,e):s&&Tm(c)||!1===s&&_m(c)?A.some(ky.moveToPosition(e)):A.none());var t,n,r,o,i,a})},Ay=function(r,e,o){return function(e,t){t=t.getNode(!1===e),e=e?"after":"before";return gn(t)&&t.getAttribute("data-mce-caret")===e}(e,o)?(t=e,n=o.getNode(!1===e),(t&&kn(n.nextSibling)?A.some(ky.moveToElement(n.nextSibling)):!1===t&&kn(n.previousSibling)?A.some(ky.moveToElement(n.previousSibling)):A.none()).fold(function(){return Ty(r,e,o)},A.some)):Ty(r,e,o).bind(function(e){return t=r,n=o,e.fold(function(e){return A.some(ky.remove(e))},function(e){return A.some(ky.moveToElement(e))},function(e){return xc(n,e,t)?A.none():A.some(ky.moveToPosition(e))});var t,n});var t,n},Ry=function(e,t){return A.from(xf(e.getBody(),t))},Dy=function(a,u){var e=a.selection.getNode();return Ry(a,e).filter(kn).fold(function(){return e=a.getBody(),t=u,n=a.selection.getRng(),r=_c(t?1:-1,e,n),n=cs.fromRangeStart(r),r=vt.fromDom(e),(!1===t&&Tm(n)?A.some(ky.remove(n.getNode(!0))):t&&_m(n)?A.some(ky.remove(n.getNode())):!1===t&&_m(n)&&qm(r,n)?$m(r,n).map(function(e){return ky.remove(e.getNode())}):t&&Tm(n)&&Vm(r,n)?Wm(r,n).map(function(e){return ky.remove(e.getNode())}):Ay(e,t,n)).exists(function(e){return e.fold(function(e){return o._selectionOverrides.hideFakeCaret(),wg(o,i,vt.fromDom(e)),!0},(r=i=u,function(e){e=r?cs.before(e):cs.after(e);return n.selection.setRng(e.toRange()),!0}),(t=n=o=a,function(e){return t.selection.setRng(e.toRange()),!0}));var t,n,r,o,i});var e,t,n,r},E)},Oy=function(t,n){var e=t.selection.getNode();return!!kn(e)&&Ry(t,e.parentNode).filter(kn).fold(function(){var e;return e=vt.fromDom(t.getBody()),Y(Cu(e,".mce-offscreen-selection"),en),wg(t,n,vt.fromDom(t.selection.getNode())),Zb(t),!0},E)},By=function(e){var t=e.dom,n=e.selection,r=xf(e.getBody(),n.getNode());return En(r)&&t.isBlock(r)&&t.isEmpty(r)&&(e=t.create("br",{"data-mce-bogus":"1"}),t.setHTML(r,""),r.appendChild(e),n.setRng(cs.before(e).toRange())),!0},Py=function(e,t){return(e.selection.isCollapsed()?Dy:Oy)(e,t)},Ly=function(e,t){return!!e.selection.isCollapsed()&&(n=e,r=t,t=cs.fromRangeStart(n.selection.getRng()),Qc(r,n.getBody(),t).filter(function(e){return(r?wm:xm)(e)}).bind(function(e){return A.from(Sc(r?0:-1,e))}).exists(function(e){return n.selection.select(e),!0}));var n,r},Iy=yn,My=function(e){return Iy(e)&&e.data[0]===$r},Fy=function(e){return Iy(e)&&e.data[e.data.length-1]===$r},Uy=function(e){return e.ownerDocument.createTextNode($r)},zy=function(e,t){return(e?function(e){if(Iy(e.previousSibling))return Fy(e.previousSibling)||e.previousSibling.appendData($r),e.previousSibling;if(Iy(e))return My(e)||e.insertData(0,$r),e;var t=Uy(e);return e.parentNode.insertBefore(t,e),t}:function(e){if(Iy(e.nextSibling))return My(e.nextSibling)||e.nextSibling.insertData(0,$r),e.nextSibling;if(Iy(e))return Fy(e)||e.appendData($r),e;var t=Uy(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t})(t)},jy=h(zy,!0),Hy=h(zy,!1),Vy=function(e,t){return yn(e.container())?zy(t,e.container()):zy(t,e.getNode())},qy=function(e,t){t=t.get();return t&&e.container()===t&&Jr(t)},$y=function(t,e){return e.fold(function(e){nc(t.get());e=jy(e);return t.set(e),A.some(cs(e,e.length-1))},function(e){return ol(e).map(function(e){if(qy(e,t))return cs(t.get(),1);nc(t.get());e=Vy(e,!0);return t.set(e),cs(e,1)})},function(e){return il(e).map(function(e){if(qy(e,t))return cs(t.get(),t.get().length-1);nc(t.get());e=Vy(e,!1);return t.set(e),cs(e,e.length-1)})},function(e){nc(t.get());e=Hy(e);return t.set(e),A.some(cs(e,1))})},Wy=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return A.none()},Ky=n([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Xy=function(e,t){t=wc(t,e);return t||e},Yy=function(e,t,n){var r=Gb(n),o=Xy(t,r.container());return Xb(e,o,r).fold(function(){return nl(o,r).bind(h(Xb,e,o)).map(function(e){return Ky.before(e)})},A.none)},Gy=function(e,t){return null===sl(e,t)},Jy=function(e,t,n){return Xb(e,t,n).filter(h(Gy,t))},Qy=function(e,t,n){var r=Jb(n);return Jy(e,t,r).bind(function(e){return rl(e,r).isNone()?A.some(Ky.start(e)):A.none()})},Zy=function(e,t,n){var r=Gb(n);return Jy(e,t,r).bind(function(e){return nl(e,r).isNone()?A.some(Ky.end(e)):A.none()})},e0=function(e,t,n){var r=Jb(n),o=Xy(t,r.container());return Xb(e,o,r).fold(function(){return rl(o,r).bind(h(Xb,e,o)).map(function(e){return Ky.after(e)})},A.none)},t0=function(e){return!1===Kb(r0(e))},n0=function(e,t,n){return Wy([Yy,Qy,Zy,e0],[e,t,n]).filter(t0)},r0=function(e){return e.fold(g,g,g,g)},o0=function(e){return e.fold(X("before"),X("start"),X("end"),X("after"))},i0=function(e){return e.fold(Ky.before,Ky.before,Ky.after,Ky.after)},a0=function(e){return e.fold(Ky.start,Ky.start,Ky.end,Ky.end)},u0=function(n,e,r,t,o,i){return An(Xb(e,r,t),Xb(e,r,o),function(e,t){return e!==t&&function(e,t,n){t=wc(t,e),e=wc(n,e);return t&&t===e}(r,e,t)?Ky.after(n?e:t):i}).getOr(i)},s0=function(e,n){return e.fold(E,function(e){return t=n,!(o0(e=e)===o0(t)&&r0(e)===r0(t));var t})},c0=function(e,t){return e?t.fold(v(A.some,Ky.start),A.none,v(A.some,Ky.after),A.none):t.fold(A.none,v(A.some,Ky.before),A.none,v(A.some,Ky.end))},l0=function(e,a,u,s){var t=Yb(e,s),c=n0(a,u,t);return n0(a,u,t).bind(h(c0,e)).orThunk(function(){return n=a,r=u,o=c,i=Yb(t=e,s),Qc(t,r,i).map(h(Yb,t)).fold(function(){return o.map(i0)},function(e){return n0(n,r,e).map(h(u0,t,n,r,i,e)).filter(h(s0,o))}).filter(t0);var t,n,r,o,i})},f0=(h(l0,!1),h(l0,!0),function(e,t,n){var r=e?1:-1;return t.setRng(cs(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0}),d0=function(e,t){var n=t.selection.getRng(),n=e?cs.fromRangeEnd(n):cs.fromRangeStart(n);return!!m(t.selection.getSel().modify)&&(e&&eo(n)?f0(!0,t.selection,n):!(e||!to(n))&&f0(!1,t.selection,n))};(Xe=db=db||{})[Xe.Br=0]="Br",Xe[Xe.Block=1]="Block",Xe[Xe.Wrap=2]="Wrap",Xe[Xe.Eol=3]="Eol";var m0,g0=function(e,t){return e===ls.Backwards?J(t):t},e=function(e,t,n,r){for(var o,i=Kc(n),a=r,u=[];a;){var s=(o=i,c=a,t===ls.Forwards?o.next(c):o.prev(c));if(!s)break;if(Sn(s.getNode(!1)))return t===ls.Forwards?{positions:g0(t,u).concat([s]),breakType:db.Br,breakAt:A.some(s)}:{positions:g0(t,u),breakType:db.Br,breakAt:A.some(s)};if(s.isVisible()){if(e(a,s)){var c=(o=a,Sn((c=s).getNode(t===ls.Forwards))?db.Br:!1===xc(o,c)?db.Block:db.Wrap);return{positions:g0(t,u),breakType:c,breakAt:A.some(s)}}u.push(s),a=s}else a=s}return{positions:g0(t,u),breakType:db.Eol,breakAt:A.none()}},Ve=function(n,r,o,e){return r(o,e).breakAt.map(function(e){var t=r(o,e).positions;return n===ls.Backwards?t.concat(e):[e].concat(t)}).getOr([])},p0=function(e,o){return j(e,function(e,r){return e.fold(function(){return A.some(r)},function(n){return An(te(n.getClientRects()),te(r.getClientRects()),function(e,t){e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?r:n}).or(e)})},A.none())},h0=function(t,e){return te(e.getClientRects()).bind(function(e){return p0(t,e.left)})},v0=h(e,cs.isAbove,-1),b0=h(e,cs.isBelow,1),y0=h(Ve,-1,v0),C0=h(Ve,1,b0),w0=function(t){var e=function(e){return I(e,function(e){e=Mu(e);return e.node=t,e})};if(gn(t))return e(t.getClientRects());if(yn(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},x0=function(e){return $(e,w0)};(k=m0=m0||{})[k.Up=-1]="Up",k[k.Down=1]="Down";var o=function(o,i,a,e,u,t){var s=0,c=[],n=function(e){var t=x0([e]);-1===o&&(t=t.reverse());for(var n=0;n<t.length;n++){var r=t[n];if(!a(r,l)){if(0<c.length&&i(r,Ne(c))&&s++,r.line=s,u(r))return!0;c.push(r)}}},l=Ne(t.getClientRects());if(!l)return c;t=t.getNode();return n(t),function(e,t,n,r){for(;r=Cc(r,e,vo,t);)if(n(r))return}(o,e,n,t),c},S0=h(o,m0.Up,zu,ju),N0=h(o,m0.Down,ju,zu),E0=function(t){return function(e){return e.line>t}},k0=function(t){return function(e){return e.line===t}},_0=kn,T0=Cc,A0=function(e,t){return Math.abs(e.left-t)},R0=function(e,t){return Math.abs(e.right-t)},D0=function(e,t){return e>=t.left&&e<=t.right},O0=function(e,t){return e>=t.top&&e<=t.bottom},B0=function(e,o){return xe(e,function(e,t){var n=Math.min(A0(e,o),R0(e,o)),r=Math.min(A0(t,o),R0(t,o));return D0(o,t)||!D0(o,e)&&(r===n&&_0(t.node)||r<n)?t:e})},P0=function(e,t,n,r,o){var i=T0(r,e,vo,t,!o);do{if(!i||n(i))return}while(i=T0(i,e,vo,t))},L0=function(e,t,n){var r=x0(U(re(e.getElementsByTagName("*")),fc)),r=U(r,h(O0,n));if(n=B0(r,t)){r=!vn(n.node)&&!_n(n.node);if((n=B0(function(e,n,t){void 0===t&&(t=!0);var r=[],o=function(t,e){e=U(x0([e]),function(e){return!t(e,n)});return r=r.concat(e),0===e.length};return r.push(n),P0(m0.Up,e,h(o,zu),n.node,t),P0(m0.Down,e,h(o,ju),n.node,t),r}(e,n,r),t))&&fc(n.node))return t=t,{node:(n=n).node,before:A0(n,t)<R0(n,t)}}return null},I0=function(e,t){e.selection.setRng(t),ld(e,e.selection.getRng())},M0=function(e,t,n){return A.some(wy(e,t,n))},F0=function(e,t,n,r,o,i){var a=t===ls.Forwards,u=Kc(e.getBody()),u=h(Dc,a?u.next:u.prev),o=a?r:o;if(!n.collapsed){var s=Vu(n);if(i(s))return by(t,e,s,t===ls.Backwards,!1)}i=Ac(t,e.getBody(),n);if(o(i))return yy(e,i.getNode(!a));s=Yb(a,u(i)),i=Gr(n.startContainer);if(!s)return i?A.some(n):A.none();if(o(s))return by(t,e,s.getNode(!a),a,!1);u=u(s);return u&&o(u)&&Oc(s,u)?by(t,e,u.getNode(!a),a,!1):i?M0(e,s.toRange(),!1):A.none()},U0=function(t,e,n,r,o,i){var a=Ac(e,t.getBody(),n),u=Ne(a.getClientRects()),s=e===m0.Down;if(!u)return A.none();var c=(s?N0:S0)(t.getBody(),E0(1),a),l=U(c,k0(1)),f=u.left,c=B0(l,f);if(c&&i(c.node)){u=Math.abs(f-c.left),i=Math.abs(f-c.right);return by(e,t,c.node,u<i,!1)}if(n=r(a)?a.getNode():o(a)?a.getNode(!0):Vu(n)){n=function(e,t,n,r){var o,i,a,t=Kc(t),u=[],s=0,c=function(e){return Ne(e.getClientRects())},l=1===e?(o=t.next,i=ju,a=zu,cs.after(r)):(o=t.prev,i=zu,a=ju,cs.before(r)),f=c(l);do{if(l.isVisible()){var d=c(l);if(!a(d,f)){0<u.length&&i(d,Ne(u))&&s++;d=Mu(d);if(d.position=l,d.line=s,n(d))return u;u.push(d)}}}while(l=o(l));return u}(e,t.getBody(),E0(1),n),f=B0(U(n,k0(1)),f);if(f)return M0(t,f.position.toRange(),!1);if(f=Ne(U(n,k0(0))))return M0(t,f.position.toRange(),!1)}return 0===l.length?z0(t,s).filter(s?o:r).map(function(e){return wy(t,e.toRange(),!1)}):A.none()},z0=function(e,t){var n=e.selection.getRng(),e=e.getBody();if(t){var r=cs.fromRangeEnd(n),o=b0(e,r);return ne(o.positions)}r=cs.fromRangeStart(n),o=v0(e,r);return te(o.positions)},j0=function(t,e,n){return z0(t,e).filter(n).exists(function(e){return t.selection.setRng(e.toRange()),!0})},H0=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},V0=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},q0=function(t,e,n){return $y(e,n).map(function(e){return H0(t,e),n})},$0=function(e,t){var n,r;e.selection.isCollapsed()&&!0!==e.composing&&t.get()&&(n=cs.fromRangeStart(e.selection.getRng()),cs.isTextPosition(n)&&!1===(eo(r=n)||to(r))&&(H0(e,tc(t.get(),n)),t.set(null)))},W0=function(e,t,n){return!!$s(e)&&(o=t,i=n,t=(r=e).getBody(),n=cs.fromRangeStart(r.selection.getRng()),e=h(Wb,r),l0(i,e,t,n).bind(function(e){return q0(r,o,e)}).isSome());var r,o,i},Xe=function(e,t,n){return!!$s(t)&&d0(e,t)},K0=function(t){var i=ou(null),a=h(Wb,t);return t.on("NodeChange",function(e){var n,r,o;!$s(t)||lt.browser.isIE()&&e.initial||(function(e,t,n){t=I(Cu(vt.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(e){return e.dom}),t=U(t,e),e=U(n,e);Y(Q(t,e),h(V0,!1)),Y(Q(e,t),h(V0,!0))}(a,t.dom,e.parents),$0(t,i),n=a,r=t,o=i,e=e.parents,r.selection.isCollapsed()&&(e=U(e,n),Y(e,function(e){var t=cs.fromRangeStart(r.selection.getRng());n0(n,r.getBody(),t).bind(function(e){return q0(r,o,e)})})))}),i},X0=h(Xe,!0),Y0=h(Xe,!1),G0=function(t,n,r){if($s(t)){var e=z0(t,n).getOrThunk(function(){var e=t.selection.getRng();return n?cs.fromRangeEnd(e):cs.fromRangeStart(e)});return n0(h(Wb,t),t.getBody(),e).exists(function(e){e=i0(e);return $y(r,e).exists(function(e){return H0(t,e),!0})})}return!1},J0=function(t,n){return function(e){return $y(n,e).exists(function(e){return H0(t,e),!0})}},Q0=function(r,o,i,a){var u=r.getBody(),s=h(Wb,r);r.undoManager.ignore(function(){var e,t,n;r.selection.setRng((e=i,t=a,(n=document.createRange()).setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n)),r.execCommand("Delete"),n0(s,u,cs.fromRangeStart(r.selection.getRng())).map(a0).map(J0(r,o))}),r.nodeChanged()},Z0=function(n,r,o,i){var a=function(e,t){t=wc(t,e);return t||e}(n.getBody(),i.container()),u=h(Wb,n),s=n0(u,a,i);return s.bind(function(e){return o?e.fold(X(A.some(a0(e))),A.none,X(A.some(i0(e))),A.none):e.fold(A.none,X(A.some(i0(e))),A.none,X(A.some(a0(e))))}).map(J0(n,r)).getOrThunk(function(){var t=Zc(o,a,i),e=t.bind(function(e){return n0(u,a,e)});return An(s,e,function(){return Xb(u,a,i).exists(function(e){return!!An(ol(r=e),il(r),function(e,t){var e=Yb(!0,e),n=Yb(!1,t);return nl(r,e).forall(function(e){return e.isEqual(n)})}).getOr(!0)&&(wg(n,o,vt.fromDom(e)),!0);var r})}).orThunk(function(){return e.bind(function(e){return t.map(function(e){return o?Q0(n,r,i,e):Q0(n,r,e,i),!0})})}).getOr(!1)})},eC=function(e,t,n){if(e.selection.isCollapsed()&&$s(e)){var r=cs.fromRangeStart(e.selection.getRng());return Z0(e,t,n,r)}return!1},tC=function(e){return 1===Ft(e).length},nC=function(e,t,n,r){var o=h(Fp,t),o=I(U(r,o),function(e){return e.dom});0===o.length?wg(t,e,n):(e=n.dom,n=o,o=Dp(!1),n=Lp(n,o.dom),Xt(vt.fromDom(e),o),en(vt.fromDom(e)),n=cs(n,0),t.selection.setRng(n.toRange()))},rC=function(n,r){var t,e=vt.fromDom(n.getBody()),o=vt.fromDom(n.selection.getStart()),u=U((t=Pm(o,e),q(t,Pr).fold(X(t),function(e){return t.slice(0,e)})),tC);return ne(u).exists(function(e){var o,i,a,t=cs.fromRangeStart(n.selection.getRng());return o=r,i=t,a=e.dom,!(!An(ol(a),il(a),function(e,t){var n=Yb(!0,e),r=Yb(!1,t),t=Yb(!1,i);return o?nl(a,t).exists(function(e){return e.isEqual(r)&&i.isEqual(n)}):rl(a,t).exists(function(e){return e.isEqual(n)&&i.isEqual(r)})}).getOr(!0)||ul((t=e).dom)&&Ap(t.dom))&&(nC(r,n,e,u),!0)})},oC=function(e,t){return!!e.selection.isCollapsed()&&rC(e,t)},iC=function(e,t,n){return e._selectionOverrides.hideFakeCaret(),wg(e,t,vt.fromDom(n)),!0},aC=function(e,t){return e.selection.isCollapsed()?(n=e,o=(r=t)?Sm:Nm,i=r?ls.Forwards:ls.Backwards,a=Ac(i,n.getBody(),n.selection.getRng()),o(a)?iC(n,r,a.getNode(!r)):A.from(Yb(r,a)).filter(function(e){return o(e)&&Oc(a,e)}).exists(function(e){return iC(n,r,e.getNode(!r))})):(i=t,e=(t=e).selection.getNode(),!!_n(e)&&iC(t,i,e));var n,r,o,i,a},uC=function(e){e=parseInt(e,10);return isNaN(e)?0:e},sC=function(e,t){return(e||"table"===Nt(t)?"margin":"padding")+("rtl"===Fn(t,"direction")?"-right":"-left")},cC=function(e){var n,t=fC(e);return!e.mode.isReadOnly()&&(1<t.length||(n=e,G(t,function(e){var t=sC(zs(n),e),t=zn(e,t).map(uC).getOr(0);return"false"!==n.dom.getContentEditable(e.dom)&&0<t})))},lC=function(e){return Fr(e)||Ur(e)},fC=function(e){return U((e=e.selection.getSelectedBlocks(),I(e,vt.fromDom)),function(e){return!lC(e)&&!Bt(e).exists(lC)&&fr(e,function(e){return En(e.dom)||kn(e.dom)}).exists(function(e){return En(e.dom)})})},dC=function(e,u){var s=e.dom,t=e.selection,n=e.formatter,r=e.getParam("indentation","40px","string"),c=/[a-z%]+$/i.exec(r)[0],l=parseInt(r,10),f=zs(e),r=Ls(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==r||s.getParent(t.getNode(),s.isBlock)||n.apply("div"),Y(fC(e),function(e){var t,n,r,o,i,a;t=s,n=u,r=f,o=l,i=c,e=e.dom,r=sC(r,vt.fromDom(e)),"outdent"===n?(a=Math.max(0,uC(e.style[r])-o),t.setStyle(e,r,a?a+i:"")):(a=uC(e.style[r])+o+i,t.setStyle(e,r,a))})},mC=function(e,t){if(e.selection.isCollapsed()&&cC(e)){var n=e.dom,r=e.selection.getRng(),o=cs.fromRangeStart(r),n=n.getParent(r.startContainer,n.isBlock);if(null!==n&&Mm(vt.fromDom(n),o))return dC(e,"outdent"),!0}return!1},gC=function(e,t){e.getDoc().execCommand(t,!1,null)},pC=function(n,r){n.addCommand("delete",function(){var e,t;t=r,mC(e=n)||Py(e,!1)||Ey(e,!1)||eC(e,t,!1)||fy(e,!1)||Yg(e)||Ly(e,!1)||aC(e,!1)||py(e)||oC(e,!1)||(gC(e,"Delete"),Zb(e))}),n.addCommand("forwardDelete",function(){var e,t;t=r,Py(e=n,!0)||Ey(e,!0)||eC(e,t,!0)||fy(e,!0)||Yg(e)||Ly(e,!0)||aC(e,!0)||py(e)||oC(e,!0)||gC(e,"ForwardDelete")})},hC=function(e){return e.touches===undefined||1!==e.touches.length?A.none():A.some(e.touches[0])},vC=function(o){var i=ou(A.none()),a=ou(!1),n=fu(function(e){o.fire("longpress",Ee(Ee({},e),{type:"longpress"})),a.set(!0)},400);o.on("touchstart",function(t){hC(t).each(function(e){n.cancel();e={x:e.clientX,y:e.clientY,target:t.target};n.throttle(t),a.set(!1),i.set(A.some(e))})},!0),o.on("touchmove",function(e){n.cancel(),hC(e).each(function(r){i.get().each(function(e){var t,n;t=r,n=e,e=Math.abs(t.clientX-n.x),n=Math.abs(t.clientY-n.y),(5<e||5<n)&&(i.set(A.none()),a.set(!1),o.fire("longpresscancel"))})})},!0),o.on("touchend touchcancel",function(t){n.cancel(),"touchcancel"!==t.type&&i.get().filter(function(e){return e.target.isEqualNode(t.target)}).each(function(){a.get()?t.preventDefault():o.fire("tap",Ee(Ee({},t),{type:"tap"}))})},!0)},bC=function(e,t){return pe(e,t.nodeName)},yC=function(e){var t,n,r,o=e.dom,i=e.selection,a=e.schema,u=a.getBlockElements(),s=i.getStart(),c=e.getBody(),l=Ls(e);if(s&&gn(s)&&l){var f=c.nodeName.toLowerCase();if(a.isValidChild(f,l.toLowerCase())&&(d=u,b=c,!L(Bm(vt.fromDom(s),vt.fromDom(b)),function(e){return bC(d,e.dom)}))){for(var d,m,g,p=i.getRng(),h=p.startContainer,v=p.startOffset,a=p.endContainer,f=p.endOffset,b=Ud(e),s=c.firstChild;s;)m=u,yn(g=s)||gn(g)&&!bC(m,g)&&!vl(g)?!function(e,t){if(yn(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||bC(e,t.nextSibling)))return!0}return!1}(u,s)?(t||(t=o.create(l,Is(e)),s.parentNode.insertBefore(t,s),r=!0),s=(n=s).nextSibling,t.appendChild(n)):(s=(n=s).nextSibling,o.remove(n)):(t=null,s=s.nextSibling);r&&b&&(p.setStart(h,v),p.setEnd(a,f),i.setRng(p),e.nodeChanged())}}},CC=function(e,t){t.hasAttribute("data-mce-caret")&&(io(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},wC=function(e,t){var n=gr(vt.fromDom(e.getBody()),"*[data-mce-caret]").map(function(e){return e.dom}).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void CC(e,n)):void(Zr(n)&&(CC(e,n),e.undoManager.add()))},xC=kn,SC=function(e,t,n){var r=Kc(e.getBody()),o=h(Dc,1===t?r.next:r.prev);!n.collapsed||""===Ls(e)||(r=e.dom.getParent(n.startContainer,"PRE"))&&(o(cs.fromRangeStart(n))||(n=function(e){e=e.dom.create(Ls(e));return(!lt.ie||11<=lt.ie)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(e),1===t?e.$(r).after(n):e.$(r).before(n),e.selection.select(n,!0),e.selection.collapse()))},NC=function(e,t){var n=t?ls.Forwards:ls.Backwards,r=e.selection.getRng();return F0(e,n,r,_m,Tm,xC).orThunk(function(){return SC(e,n,r),A.none()})},EC=function(e,t){var n=t?1:-1,r=e.selection.getRng();return U0(e,n,r,function(e){return _m(e)||Em(e)},function(e){return Tm(e)||km(e)},xC).orThunk(function(){return SC(e,n,r),A.none()})},kC=function(t,e){return NC(t,e).exists(function(e){return I0(t,e),!0})},_C=function(t,e){return EC(t,e).exists(function(e){return I0(t,e),!0})},TC=function(e,t){return j0(e,t,t?Tm:_m)},AC=function(e){return P(["figcaption"],Nt(e))},RC=function(e){var t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},DC=function(e,t,n){(n?Jt:Gt)(e,t)},OC=function(e,t,n,r){return""===t?(o=e,i=r,a=vt.fromTag("br"),DC(o,a,i),RC(a)):(a=e,e=r,r=t,t=n,n=vt.fromTag(r),r=vt.fromTag("br"),Bn(n,t),Jt(n,r),DC(a,n,e),RC(r));var o,i,a},BC=function(e,t,n){return t?(t=e.dom,b0(t,n).breakAt.isNone()):(e=e.dom,v0(e,n).breakAt.isNone())},PC=function(t,n){var r=vt.fromDom(t.getBody()),o=cs.fromRangeStart(t.selection.getRng()),i=Ls(t),a=Is(t);return function(e,t){t=h(wt,t);return fr(vt.fromDom(e.container()),Pr,t).filter(AC)}(o,r).exists(function(){if(BC(r,n,o)){var e=OC(r,i,a,n);return t.selection.setRng(e),!0}return!1})},LC=function(e,t){return!!e.selection.isCollapsed()&&PC(e,t)},IC=function(e,r){return $(I(e,function(e){return Ee({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:ee},e)}),function(e){return t=e,(n=r).keyCode===t.keyCode&&n.shiftKey===t.shiftKey&&n.altKey===t.altKey&&n.ctrlKey===t.ctrlKey&&n.metaKey===t.metaKey?[e]:[];var t,n})},MC=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}},FC=function(e,t){return H(IC(e,t),function(e){return e.action()})},UC=function(t,e){var n=e?ls.Forwards:ls.Backwards,e=t.selection.getRng();return F0(t,n,e,Sm,Nm,_n).exists(function(e){return I0(t,e),!0})},zC=function(t,e){var n=e?1:-1,e=t.selection.getRng();return U0(t,n,e,Sm,Nm,_n).exists(function(e){return I0(t,e),!0})},jC=function(e,t){return j0(e,t,t?Nm:Sm)},HC=function(r,e){return $(e,function(e){var t,n,n=(t=Mu(e.getBoundingClientRect()),n=-1,{left:t.left-n,top:t.top-n,right:t.right+2*n,bottom:t.bottom+2*n,width:t.width+n,height:t.height+n});return[{x:n.left,y:r(n),cell:e},{x:n.right,y:r(n),cell:e}]})},e=function(e,t,n,r,o){var i,a,n=Cu(vt.fromDom(n),"td,th,caption").map(function(e){return e.dom}),n=U(HC(e,n),function(e){return t(e,o)});return i=r,a=o,j(n,function(e,r){return e.fold(function(){return A.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-a)),n=Math.sqrt(Math.abs(r.x-i)+Math.abs(r.y-a));return A.some(n<t?r:e)})},A.none()).map(function(e){return e.cell})},VC=h(e,function(e){return e.bottom},function(e,t){return e.y<t}),qC=h(e,function(e){return e.top},function(e,t){return e.y>t}),$C=function(t,n){return te(n.getClientRects()).bind(function(e){return VC(t,e.left,e.top)}).bind(function(e){return h0(il(t=e).map(function(e){return v0(t,e).positions.concat(e)}).getOr([]),n);var t})},WC=function(t,n){return ne(n.getClientRects()).bind(function(e){return qC(t,e.left,e.top)}).bind(function(e){return h0(ol(t=e).map(function(e){return[e].concat(b0(t,e).positions)}).getOr([]),n);var t})},Ve=function(e,t,n){var r,o,i,a=e(t,n);return(i=a).breakType===db.Wrap&&0===i.positions.length||!Sn(n.getNode())&&((n=a).breakType===db.Br&&1===n.positions.length)?(r=e,o=t,!a.breakAt.exists(function(e){return r(o,e).breakAt.isSome()})):a.breakAt.isNone()},KC=h(Ve,v0),XC=h(Ve,b0),YC=function(t,e,n,r){var o,i,a,u=t.selection.getRng(),s=e?1:-1;return!(!cc()||(o=e,i=n,a=cs.fromRangeStart(u),!tl(!o,i).exists(function(e){return e.isEqual(a)})))&&(by(s,t,n,!e,!1).each(function(e){I0(t,e)}),!0)},GC=function(e,t){e=t.getNode(e);return gn(e)&&"TABLE"===e.nodeName?A.some(e):A.none()},JC=function(u,s,c){var e=GC(!!s,c),t=!1===s;e.fold(function(){return I0(u,c.toRange())},function(a){return tl(t,u.getBody()).filter(function(e){return e.isEqual(c)}).fold(function(){return I0(u,c.toRange())},function(e){var n,r,o,t,i;n=s,o=a,t=c,(i=Ls(r=u))?r.undoManager.transact(function(){var e=vt.fromTag(i);Bn(e,Is(r)),Jt(e,vt.fromTag("br")),(n?Yt:Xt)(vt.fromDom(o),e);var t=r.dom.createRng();t.setStart(e.dom,0),t.setEnd(e.dom,0),I0(r,t)}):I0(r,t.toRange())})})},QC=function(e,t,n,r){var o,i,a,u,s,c,l=e.selection.getRng(),f=cs.fromRangeStart(l),l=e.getBody();if(!t&&KC(r,f)){var d=(u=l,$C(s=n,c=f).orThunk(function(){return te(c.getClientRects()).bind(function(e){return p0(y0(u,cs.before(s)),e.left)})}).getOr(cs.before(s)));return JC(e,t,d),!0}if(t&&XC(r,f)){d=(o=l,WC(i=n,a=f).orThunk(function(){return te(a.getClientRects()).bind(function(e){return p0(C0(o,cs.after(i)),e.left)})}).getOr(cs.after(i)));return JC(e,t,d),!0}return!1},ZC=function(n,r,o){return A.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return A.from(n.dom.getParent(t,"table")).map(function(e){return o(n,r,e,t)})}).getOr(!1)},e1=function(e,t){return ZC(e,t,YC)},t1=function(e,t){return ZC(e,t,QC)},n1=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,e=st().os,FC([{keyCode:Ef.RIGHT,action:MC(kC,t,!0)},{keyCode:Ef.LEFT,action:MC(kC,t,!1)},{keyCode:Ef.UP,action:MC(_C,t,!1)},{keyCode:Ef.DOWN,action:MC(_C,t,!0)},{keyCode:Ef.RIGHT,action:MC(e1,t,!0)},{keyCode:Ef.LEFT,action:MC(e1,t,!1)},{keyCode:Ef.UP,action:MC(t1,t,!1)},{keyCode:Ef.DOWN,action:MC(t1,t,!0)},{keyCode:Ef.RIGHT,action:MC(UC,t,!0)},{keyCode:Ef.LEFT,action:MC(UC,t,!1)},{keyCode:Ef.UP,action:MC(zC,t,!1)},{keyCode:Ef.DOWN,action:MC(zC,t,!0)},{keyCode:Ef.RIGHT,action:MC(W0,t,n,!0)},{keyCode:Ef.LEFT,action:MC(W0,t,n,!1)},{keyCode:Ef.RIGHT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:MC(X0,t,n)},{keyCode:Ef.LEFT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:MC(Y0,t,n)},{keyCode:Ef.UP,action:MC(LC,t,!1)},{keyCode:Ef.DOWN,action:MC(LC,t,!0)}],r).each(function(e){r.preventDefault()}))})},r1=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,FC([{keyCode:Ef.BACKSPACE,action:MC(mC,t,!1)},{keyCode:Ef.BACKSPACE,action:MC(Py,t,!1)},{keyCode:Ef.DELETE,action:MC(Py,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(Ey,t,!1)},{keyCode:Ef.DELETE,action:MC(Ey,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(eC,t,n,!1)},{keyCode:Ef.DELETE,action:MC(eC,t,n,!0)},{keyCode:Ef.BACKSPACE,action:MC(Yg,t,!1)},{keyCode:Ef.DELETE,action:MC(Yg,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(Ly,t,!1)},{keyCode:Ef.DELETE,action:MC(Ly,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(aC,t,!1)},{keyCode:Ef.DELETE,action:MC(aC,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(py,t,!1)},{keyCode:Ef.DELETE,action:MC(py,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(fy,t,!1)},{keyCode:Ef.DELETE,action:MC(fy,t,!0)},{keyCode:Ef.BACKSPACE,action:MC(oC,t,!1)},{keyCode:Ef.DELETE,action:MC(oC,t,!0)}],r).each(function(e){r.preventDefault()}))}),o.on("keyup",function(e){var t;!1===e.isDefaultPrevented()&&(t=o,e=e,FC([{keyCode:Ef.BACKSPACE,action:MC(By,t)},{keyCode:Ef.DELETE,action:MC(By,t)}],e))})},o1=function(e,t){var n,r,o=t,i=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(t){!/^(LI|DT|DD)$/.test(t.nodeName)||(r=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild))&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(i.doc.createTextNode(qr),t.firstChild);var u=i.createRng();if(t.normalize(),t.hasChildNodes()){for(var s=new Ar(t,t);n=s.current();){if(yn(n)){u.setStart(n,0),u.setEnd(n,0);break}if(a[n.nodeName.toLowerCase()]){u.setStartBefore(n),u.setEndBefore(n);break}o=n,n=s.next()}n||(u.setStart(o,0),u.setEnd(o,0))}else Sn(t)?t.nextSibling&&i.isBlock(t.nextSibling)?(u.setStartBefore(t),u.setEndBefore(t)):(u.setStartAfter(t),u.setEndAfter(t)):(u.setStart(t,0),u.setEnd(t,0));e.selection.setRng(u),ld(e,u)}},i1=function(e){return A.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},a1=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},u1=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},s1=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},c1=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!gn(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},l1=function(e,t,n,r,o){var i,a,u=e.dom,s=e.selection.getRng();n!==e.getBody()&&(i=(o=u1(i=n)&&u1(i.parentNode)?"LI":o)?t(o):u.create("BR"),c1(n,r,!0)&&c1(n,r,!1)?a1(n,"LI")?(a=s1(n),u.insertAfter(i,a),(null===(t=n.parentNode)||void 0===t?void 0:t.firstChild)===n?u.remove(a):u.remove(n)):u.replace(i,n):(c1(n,r,!0)?a1(n,"LI")?(u.insertAfter(i,s1(n)),i.appendChild(u.doc.createTextNode(" ")),i.appendChild(n)):n.parentNode.insertBefore(i,n):c1(n,r,!1)?u.insertAfter(i,s1(n)):(n=s1(n),(a=s.cloneRange()).setStartAfter(r),a.setEndAfter(n),s=a.extractContents(),"LI"===o&&(a="LI",(o=s).firstChild&&o.firstChild.nodeName===a)?(i=s.firstChild,u.insertAfter(s,n)):(u.insertAfter(s,n),u.insertAfter(i,n))),u.remove(r)),o1(e,i))},f1=function(e){e.innerHTML='<br data-mce-bogus="1">'},d1=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},m1=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},g1=function(e,t,n){return!1===yn(t)?n:e?1===n&&t.data.charAt(n-1)===$r?0:n:n===t.data.length-1&&t.data.charAt(n)===$r?t.data.length:n},p1=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},h1=function(e,t){var n=Ls(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&function(e,n,t){var r=e.dom;A.from(t.style).map(r.parseStyle).each(function(e){var t=jn(vt.fromDom(n)),e=Ee(Ee({},t),e);r.setStyles(n,e)});var o=A.from(t["class"]).map(function(e){return e.split(/\s+/)}),e=A.from(n.className).map(function(e){return U(e.split(/\s+/),function(e){return""!==e})});An(o,e,function(t,e){e=U(e,function(e){return!P(t,e)}),e=ke(ke([],t),e);r.setAttrib(n,"class",e.join(" "))});var i=["style","class"],t=de(t,function(e,t){return!P(i,t)});r.setAttribs(n,t)}(e,t,Is(e))},v1=function(a,e){var u,i,t,s,c=a.dom,l=a.schema,f=l.getNonEmptyElements(),n=a.selection.getRng(),r=function(e){var t,n=u,r=l.getTextInlineElements(),o=e||"TABLE"===h||"HR"===h?c.create(e||b):g.cloneNode(!1),i=o;if(!1===a.getParam("keep_styles",!0))c.setAttrib(o,"style",null),c.setAttrib(o,"class",null);else for(;r[n.nodeName]&&(ul(n)||vl(n)||(t=n.cloneNode(!1),c.setAttrib(t,"id",""),o.hasChildNodes()?(t.appendChild(o.firstChild),o.appendChild(t)):o.appendChild(i=t))),(n=n.parentNode)&&n!==y;);return h1(a,o),f1(i),o},o=function(e){var t,n,r=g1(e,u,i);if(yn(u)&&(e?0<r:r<u.nodeValue.length))return!1;if(u.parentNode===g&&s&&!e)return!0;if(e&&gn(u)&&u===g.firstChild)return!0;if(d1(u,"TABLE")||d1(u,"HR"))return s&&!e||!s&&e;var o=new Ar(u,g);for(yn(u)&&(e&&0===r?o.prev():e||r!==u.nodeValue.length||o.next());t=o.current();){if(gn(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),f[n]&&"br"!==n))return!1}else if(yn(t)&&!yo(t.nodeValue))return!1;e?o.prev():o.next()}return!0},d=function(){t=/^(H[1-6]|PRE|FIGURE)$/.test(h)&&"HGROUP"!==v?r(b):r(),a.getParam("end_container_on_empty_block",!1)&&m1(c,p)&&c.isEmpty(g)?t=c.split(p,g):c.insertAfter(t,g),o1(a,t)};If(c,n).each(function(e){n.setStart(e.startContainer,e.startOffset),n.setEnd(e.endContainer,e.endOffset)}),u=n.startContainer,i=n.startOffset,b=Ls(a);var m=!(!e||!e.shiftKey),e=!(!e||!e.ctrlKey);gn(u)&&u.hasChildNodes()&&(s=i>u.childNodes.length-1,u=u.childNodes[Math.min(i,u.childNodes.length-1)]||u,i=s&&yn(u)?u.nodeValue.length:0);var g,p,h,v,b,y=p1(c,u);y&&((b&&!m||!b&&m)&&(u=function(e,t,n,r,o){var i,a,u,s,c,l=t||"P",f=e.dom,t=p1(f,r),d=f.getParent(r,f.isBlock);if(!d||!m1(f,d)){if(c=((d=d||t)===e.getBody()||(c=d)&&/^(TD|TH|CAPTION)$/.test(c.nodeName)?d:d.parentNode).nodeName.toLowerCase(),!d.hasChildNodes())return i=f.create(l),h1(e,i),d.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(u=r;u.parentNode!==d;)u=u.parentNode;for(;u&&!f.isBlock(u);)u=(a=u).previousSibling;if(a&&e.schema.isValidChild(c,l.toLowerCase())){for(i=f.create(l),h1(e,i),a.parentNode.insertBefore(i,a),u=a;u&&!f.isBlock(u);)s=u.nextSibling,i.appendChild(u),u=s;n.setStart(r,o),n.setEnd(r,o)}}return r}(a,b,n,u,i)),p=(g=c.getParent(u,c.isBlock))?c.getParent(g.parentNode,c.isBlock):null,h=g?g.nodeName.toUpperCase():"","LI"!==(v=p?p.nodeName.toUpperCase():"")||e||(p=(g=p).parentNode,h=v),/^(LI|DT|DD)$/.test(h)&&c.isEmpty(g)?l1(a,r,p,g,b):b&&g===a.getBody()||(b=b||"P",Gr(g)?(t=io(g),c.isEmpty(g)&&f1(g),h1(a,t),o1(a,t)):o()?d():o(!0)?(t=g.parentNode.insertBefore(r(),g),o1(a,d1(g,"HR")?t:g)):((o=(e=n).cloneRange()).setStart(e.startContainer,g1(!0,e.startContainer,e.startOffset)),o.setEnd(e.endContainer,g1(!1,e.endContainer,e.endOffset)),(o=o.cloneRange()).setEndAfter(g),o=o.extractContents(),Y(yu(vt.fromDom(o),_t),function(e){e=e.dom;e.nodeValue=Kr(e.nodeValue)}),function(e){for(;yn(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(o),t=o.firstChild,c.insertAfter(o,g),function(e,t,n){var r,o,i,a=n,u=[];if(a){for(;a=a.firstChild;){if(e.isBlock(a))return;gn(a)&&!t[a.nodeName.toLowerCase()]&&u.push(a)}for(r=u.length;r--;)!(a=u[r]).hasChildNodes()||a.firstChild===a.lastChild&&""===a.firstChild.nodeValue?e.remove(a):(o=e,(i=a)&&"A"===i.nodeName&&o.isEmpty(i)&&e.remove(a))}}(c,f,t),function(e,t){t.normalize();var n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(c,g),c.isEmpty(g)&&f1(g),t.normalize(),c.isEmpty(t)?(c.remove(t),d()):(h1(a,t),o1(a,t))),c.setAttrib(t,"id",""),a.fire("NewBlock",{newBlock:t})))},b1=function(e,t,n){var r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),ld(e,r)},y1=function(e,t){var n,r,o=e.selection,i=e.dom,a=o.getRng();If(i,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var u=a.startOffset,s=a.startContainer;1===s.nodeType&&s.hasChildNodes()&&(l=u>s.childNodes.length-1,s=s.childNodes[Math.min(u,s.childNodes.length-1)]||s,u=l&&3===s.nodeType?s.nodeValue.length:0);var c=i.getParent(s,i.isBlock),o=c?i.getParent(c.parentNode,i.isBlock):null,l=o?o.nodeName.toUpperCase():"",t=!(!t||!t.ctrlKey);"LI"!==l||t||(c=o),s&&3===s.nodeType&&u>=s.nodeValue.length&&!function(e,t,n){for(var r,o=new Ar(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||0<r.length)return!0}(e.schema,s,c)&&(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0),n=i.create("br"),ds(i,a,n),b1(e,n,r),e.undoManager.add()},C1=function(e,t){var n=vt.fromTag("br");Xt(vt.fromDom(t),n),e.undoManager.add()},w1=function(e,t){x1(e.getBody(),t)||Yt(vt.fromDom(t),vt.fromTag("br"));var n=vt.fromTag("br");Yt(vt.fromDom(t),n),b1(e,n.dom,!1),e.undoManager.add()},x1=function(e,t){return n=cs.after(t),!!Sn(n.getNode())||nl(e,cs.after(t)).map(function(e){return Sn(e.getNode())}).getOr(!1);var n},S1=function(e){return e&&"A"===e.nodeName&&"href"in e},N1=function(e){return e.fold(N,S1,S1,N)},E1=function(e,t){t.fold(ee,h(C1,e),h(w1,e),ee)},k1=function(e,t){var n,r,o,o=(r=h(Wb,n=e),o=cs.fromRangeStart(n.selection.getRng()),n0(r,n.getBody(),o).filter(N1));o.isSome()?o.each(h(E1,e)):y1(e,t)},_1=function(e,t){return i1(e).filter(function(e){return 0<t.length&&yt(vt.fromDom(e),t)}).isSome()},T1=n([{br:[]},{block:[]},{none:[]}]),A1=function(e,t){return _1(e,e.getParam("no_newline_selector",""))},R1=function(n){return function(e,t){return""===Ls(e)===n}},D1=function(n){return function(e,t){return i1(e).filter(function(e){return Ur(vt.fromDom(e))}).isSome()===n}},O1=function(n,r){return function(e,t){return i1(e).fold(X(""),function(e){return e.nodeName.toUpperCase()})===n.toUpperCase()===r}},B1=function(e){return O1("pre",e)},P1=function(n){return function(e,t){return e.getParam("br_in_pre",!0)===n}},L1=function(e,t){return _1(e,e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))},I1=function(e,t){return t},M1=function(e){var t=Ls(e),n=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},F1=function(e,t){return function(n,r){return j(e,function(e,t){return e&&t(n,r)},!0)?A.some(t):A.none()}},U1=function(e,t){return Wy([F1([A1],T1.none()),F1([O1("summary",!0)],T1.br()),F1([B1(!0),P1(!1),I1],T1.br()),F1([B1(!0),P1(!1)],T1.block()),F1([B1(!0),P1(!0),I1],T1.block()),F1([B1(!0),P1(!0)],T1.br()),F1([D1(!0),I1],T1.br()),F1([D1(!0)],T1.block()),F1([R1(!0),I1,M1],T1.block()),F1([R1(!0)],T1.br()),F1([L1],T1.br()),F1([R1(!1),I1],T1.br()),F1([M1],T1.block())],[e,!(!t||!t.shiftKey)]).getOr(T1.none())},z1=function(e,t){U1(e,t).fold(function(){k1(e,t)},function(){v1(e,t)},ee)},j1=function(r){r.on("keydown",function(e){var t,n;e.keyCode===Ef.ENTER&&(t=r,(n=e).isDefaultPrevented()||(n.preventDefault(),(e=t.undoManager).typing&&(e.typing=!1,e.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),z1(t,n)})))})},H1=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,FC([{keyCode:Ef.END,action:MC(TC,t,!0)},{keyCode:Ef.HOME,action:MC(TC,t,!1)},{keyCode:Ef.END,action:MC(jC,t,!0)},{keyCode:Ef.HOME,action:MC(jC,t,!1)},{keyCode:Ef.END,action:MC(G0,t,!0,n)},{keyCode:Ef.HOME,action:MC(G0,t,!1,n)}],r).each(function(e){r.preventDefault()}))})},V1=st().browser,q1=function(t){var e,n;e=t,n=lu(function(){e.composing||ag(e)},0),V1.isIE()&&(e.on("keypress",function(e){n.throttle()}),e.on("remove",function(e){n.cancel()})),t.on("input",function(e){!1===e.isComposing&&ag(t)})},$1=st(),W1=function(e){return e.stopImmediatePropagation()},K1=function(e){return e.keyCode===Ef.PAGE_UP||e.keyCode===Ef.PAGE_DOWN},X1=function(e,t,n){n&&!e.get()?t.on("NodeChange",W1,!0):!n&&e.get()&&t.off("NodeChange",W1),e.set(n)},Y1=function(o,i){var a;$1.os.isOSX()||(a=ou(!1),o.on("keydown",function(e){K1(e)&&X1(a,o,!0)}),o.on("keyup",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,FC([{keyCode:Ef.PAGE_UP,action:MC(G0,t,!1,n)},{keyCode:Ef.PAGE_DOWN,action:MC(G0,t,!0,n)}],r)),K1(e)&&a.get()&&(X1(a,o,!1),o.nodeChanged())}))},k=function(n,r){var e=r.container(),t=r.offset();return yn(e)?(e.insertData(t,n),A.some(cs(e,t+n.length))):Rc(r).map(function(e){var t=vt.fromText(n);return(r.isAtEnd()?Yt:Xt)(e,t),cs(t.dom,n.length)})},G1=h(k,qr),J1=h(k," "),Q1=function(n,r){return function(e){return t=n,(!Jm(e=e)&&(Qm(t,e)||Ym(t,e)||Gm(t,e))?G1:J1)(r);var t}},Z1=function(e){var t,n,r=cs.fromRangeStart(e.selection.getRng()),o=vt.fromDom(e.getBody());if(e.selection.isCollapsed()){var i=h(Wb,e),a=cs.fromRangeStart(e.selection.getRng());return n0(i,e.getBody(),a).bind((n=o,function(e){return e.fold(function(e){return rl(n.dom,cs.before(e))},function(e){return ol(e)},function(e){return il(e)},function(e){return nl(n.dom,cs.after(e))})})).bind(Q1(o,r)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},ew=function(n){n.on("keydown",function(e){var t;!1===e.isDefaultPrevented()&&(t=e,FC([{keyCode:Ef.SPACEBAR,action:MC(Z1,n)}],t).each(function(e){t.preventDefault()}))})},tw=function(e){var t=K0(e);return e.on("keyup compositionstart",h(wC,e)),n1(e,t),r1(e,t),j1(e),ew(e),q1(e),H1(e,t),Y1(e,t),t},nw=(rw.prototype.nodeChanged=function(e){var t,n,r=this.editor.selection;this.editor.initialized&&r&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(n=this.editor.getBody(),(r=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,n)||(r=n),t=[],this.editor.dom.getParent(r,function(e){return e===n||void t.push(e)}),(e=e||{}).element=r,e.parents=t,this.editor.fire("NodeChange",e))},rw.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1},rw);function rw(n){var r;this.lastPath=[],this.editor=n;var t=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(e){var t=n.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&Rf(t,r)||n.fire("SelectionChange"),r=t}),n.on("contextmenu",function(){n.fire("SelectionChange")}),n.on("SelectionChange",function(){var e=n.selection.getStart(!0);!e||!lt.range&&n.selection.isCollapsed()||ff(n)&&!t.isSameElementPath(e)&&n.dom.isChildOf(e,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",function(e){!e.isDefaultPrevented()&&ff(n)&&("IMG"===n.selection.getNode().nodeName?kr.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}var ow=function(e){var t;(t=e).on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}),(e=e).parser.addNodeFilter("details",function(e){Y(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){Y(e,function(e){var t=e.attr("data-mce-open");e.attr("open",W(t)?t:null),e.attr("data-mce-open",null)})})},iw=function(e){return gn(e)&&Mr(vt.fromDom(e))},aw=function(i){i.on("click",function(e){var t,n,r,o;3<=e.detail&&(r=(t=i).selection.getRng(),o=cs.fromRangeStart(r),e=cs.fromRangeEnd(r),cs.isElementPosition(o)&&(n=o.container(),iw(n)&&ol(n).each(function(e){return r.setStart(e.container(),e.offset())})),cs.isElementPosition(e)&&(n=o.container(),iw(n)&&il(n).each(function(e){return r.setEnd(e.container(),e.offset())})),t.selection.setRng(Jg(r)))})},uw=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,e=n.documentElement,n=n.defaultView;return{top:t.top+n.pageYOffset-e.clientTop,left:t.left+n.pageXOffset-e.clientLeft}},sw=function(e,t){return n=(o=e).inline?uw(o.getBody()):{left:0,top:0},o=(r=e).getBody(),o=r.inline?{left:o.scrollLeft,top:o.scrollTop}:{left:0,top:0},{pageX:(t=function(e,t){if(t.target.ownerDocument===e.getDoc())return{left:t.pageX,top:t.pageY};var n,r,o=uw(e.getContentAreaContainer()),i=(r=(n=e).getBody(),i=n.getDoc().documentElement,e={left:r.scrollLeft,top:r.scrollTop},i={left:r.scrollLeft||i.scrollLeft,top:r.scrollTop||i.scrollTop},n.inline?e:i);return{left:t.pageX-o.left+i.left,top:t.pageY-o.top+i.top}}(e,t)).left-n.left+o.left,pageY:t.top-n.top+o.top};var n,r,o},cw=kn,lw=En,fw=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},dw=function(i,a){return function(e){var t,n,r,o;0===e.button&&(t=H(a.dom.getParents(e.target),function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(cw,lw)).getOr(null),r=a.getBody(),cw(o=t)&&o!==r&&(n=a.dom.getPos(t),o=a.getBody(),r=a.getDoc().documentElement,i.set({element:t,dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(a.inline?o.scrollWidth:r.offsetWidth)-2,maxY:(a.inline?o.scrollHeight:r.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:function(e,t,n,r){var o=e.dom,e=t.cloneNode(!0);o.setStyles(e,{width:n,height:r}),o.setAttrib(e,"data-mce-selected",null);t=o.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(t,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(e,{margin:0,boxSizing:"border-box"}),t.appendChild(e),t}(a,t,t.offsetWidth,t.offsetHeight)})))}},mw=function(e,c){var l=kr.throttle(function(e,t){c._selectionOverrides.hideFakeCaret(),c.selection.placeCaretAt(e,t)},0);return c.on("remove",l.stop),function(s){return e.on(function(e){var t,n,r,o,i,a,u=Math.max(Math.abs(s.screenX-e.screenX),Math.abs(s.screenY-e.screenY));if(!e.dragging&&10<u){if(c.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,c.focus()}e.dragging&&(i=e,n={pageX:(a=sw(c,s)).pageX-i.relX,pageY:a.pageY+5},r=e.ghost,o=c.getBody(),r.parentNode!==o&&o.appendChild(r),t=e.ghost,u=n,i=e.width,a=e.height,o=e.maxX,r=e.maxY,e=n=0,t.style.left=u.pageX+"px",t.style.top=u.pageY+"px",u.pageX+i>o&&(n=u.pageX+i-o),u.pageY+a>r&&(e=u.pageY+a-r),t.style.width=i-n+"px",t.style.height=a-e+"px",l(s.clientX,s.clientY))})}},gw=function(e,a){return function(i){e.on(function(e){var t,n,r,o;e.dragging&&(r=function(e){e=e.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e}((n=a).selection),o=e.element,r===o||n.dom.isChildOf(r,o)||cw(r)||(t=function(e){e=e.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e}(e.element),a.fire("drop",{clientX:i.clientX,clientY:i.clientY}).isDefaultPrevented()||a.undoManager.transact(function(){fw(e.element),a.insertContent(a.dom.getOuterHTML(t)),a._selectionOverrides.hideFakeCaret()})))}),pw(e)}},pw=function(e){e.on(function(e){fw(e.ghost)}),e.clear()},hw=function(e){var t,n,r,o=(t=ou(A.none()),{clear:function(){return t.set(A.none())},set:function(e){return t.set(A.some(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}}),i=Qa.DOM,a=document,u=dw(o,e),s=mw(o,e),c=gw(o,e),l=(n=o,function(){n.on(function(e){e.dragging&&r.fire("dragend")}),pw(n)});(r=e).on("mousedown",u),e.on("mousemove",s),e.on("mouseup",c),i.bind(a,"mousemove",s),i.bind(a,"mouseup",l),e.on("remove",function(){i.unbind(a,"mousemove",s),i.unbind(a,"mouseup",l)})},vw=function(e){var n,i,a,u,t;hw(e),(n=e).on("drop",function(e){var t="undefined"!=typeof e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;!cw(t)&&"false"!==n.dom.getContentEditableParent(t)||e.preventDefault()}),e.getParam("block_unsupported_drop",!0,"boolean")&&(a=function(e){var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(P(t.types,"Files")||0<t.files.length)&&e.preventDefault()},u=function(e){Dd(i,e.target)&&a(e)},t=function(){var t=Qa.DOM,n=i.dom,r=document,o=i.inline?i.getBody():i.getDoc(),e=["drop","dragover"];Y(e,function(e){t.bind(r,e,u),n.bind(o,e,a)}),i.on("remove",function(){Y(e,function(e){t.unbind(r,e,u),n.unbind(o,e,a)})})},(i=e).on("init",function(){kr.setEditorTimeout(i,t,0)}))},bw=En,yw=kn,Cw=function(e,t){return xf(e.getBody(),t)},ww=function(a){var i,u=a.selection,s=a.dom,c=s.isBlock,l=a.getBody(),f=sc(a,l,c,function(){return Ud(a)}),d="sel-"+s.uniqueId(),o="data-mce-selected",m=function(e){return e!==l&&(yw(e)||_n(e))&&s.isChildOf(e,l)},g=function(e){e&&u.setRng(e)},p=u.getRng,h=function(e,t,n,r){return void 0===r&&(r=!0),a.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&u.scrollIntoView(t,-1===e),f.show(n,t))},e=function(){a.on("mouseup",function(e){var t=p();t.collapsed&&ub(a,e.clientX,e.clientY)&&Cy(a,t,!1).each(g)}),a.on("click",function(e){var t=Cw(a,e.target);t&&(yw(t)&&(e.preventDefault(),a.focus()),bw(t)&&s.isChildOf(t,u.getNode())&&w())}),a.on("blur NewBlock",w),a.on("ResizeWindow FullscreenStateChanged",f.reposition);var r=function(e){var t=Kc(e);if(!e.firstChild)return!1;e=cs.before(e.firstChild),e=t.next(e);return e&&!(_m(e=e)||Tm(e)||Sm(e)||Nm(e))},o=function(e,t){var n=s.getParent(e,c),t=s.getParent(t,c);return!(!n||e===t||!s.isChildOf(n,t)||!1!==yw(Cw(a,n)))||n&&(t=t,!(s.getParent(n,c)===s.getParent(t,c)))&&r(n)};a.on("tap",function(e){var t=e.target,n=Cw(a,t);yw(n)?(e.preventDefault(),yy(a,n).each(C)):m(t)&&yy(a,t).each(C)},!0),a.on("mousedown",function(e){var t,n=e.target;n!==l&&"HTML"!==n.nodeName&&!s.isChildOf(n,l)||!1===ub(a,e.clientX,e.clientY)||((t=Cw(a,n))?yw(t)?(e.preventDefault(),yy(a,t).each(C)):(w(),bw(t)&&e.shiftKey||Sf(e.clientX,e.clientY,u.getRng())||(x(),u.placeCaretAt(e.clientX,e.clientY))):m(n)?yy(a,n).each(C):!1===fc(n)&&(w(),x(),(t=L0(l,e.clientX,e.clientY))&&(o(n,t.node)||(e.preventDefault(),t=h(1,t.node,t.before,!1),a.getBody().focus(),g(t)))))}),a.on("keypress",function(e){Ef.modifierPressed(e)||yw(u.getNode())&&e.preventDefault()}),a.on("GetSelectionRange",function(e){var t=e.range;i&&(i.parentNode?((t=t.cloneRange()).selectNode(i),e.range=t):i=null)}),a.on("SetSelectionRange",function(e){e.range=b(e.range);var t=C(e.range,e.forward);t&&(e.range=t)});var t,e,n;a.on("AfterSetSelectionRange",function(e){var t=e.range,e=t.startContainer.parentNode;v(t)||"mcepastebin"===e.id||x(),s.hasClass(e,"mce-offscreen-selection")||w()}),a.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||lt.ie||(t=(t=s.get(d))&&t.getElementsByTagName("*")[0])&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText||t.innerText))}),vw(a),e=lu(function(){var e;t.removed||!t.getBody().contains(document.activeElement)||(e=t.selection.getRng()).collapsed&&(e=wy(t,e,!1),t.selection.setRng(e))},0),(t=a).on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()}),(n=a).on("init",function(){n.on("focusin",function(e){var t=e.target;_n(t)&&(e=xf(n.getBody(),t),t=kn(e)?e:t,n.selection.getNode()!==t&&yy(n,t).each(function(e){return n.selection.setRng(e)}))})})},t=function(e){return Qr(e)||ro(e)||oo(e)},v=function(e){return t(e.startContainer)||t(e.endContainer)},b=function(e){var t=a.schema.getShortEndedElements(),n=s.createRng(),r=e.startContainer,o=e.startOffset,i=e.endContainer,e=e.endOffset;return pe(t,r.nodeName.toLowerCase())?0===o?n.setStartBefore(r):n.setStartAfter(r):n.setStart(r,o),pe(t,i.nodeName.toLowerCase())?0===e?n.setEndBefore(i):n.setEndAfter(i):n.setEnd(i,e),n},y=function(e){var t=e.cloneNode(!0),n=a.fire("ObjectSelected",{target:e,targetClone:t});if(n.isDefaultPrevented())return null;var t=function(e,t,n){var r=a.$,o=gr(vt.fromDom(a.getBody()),"#"+d).fold(function(){return r([])},function(e){return r([e.dom])});0===o.length&&(o=r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",d)).appendTo(a.getBody());var i=s.createRng();t===n&&lt.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(t),i.setStartAfter(o[0].firstChild.firstChild),i.setEndAfter(t)):(o.empty().append(qr).append(t).append(qr),i.setStart(o[0].firstChild,1),i.setEnd(o[0].lastChild,0)),o.css({top:s.getPos(e,a.getBody()).y}),o[0].focus();o=u.getSel();return o.removeAllRanges(),o.addRange(i),i}(e,n.targetClone,t),r=vt.fromDom(e);return Y(Cu(vt.fromDom(a.getBody()),"*[data-mce-selected]"),function(e){wt(r,e)||In(e,o)}),s.getAttrib(e,o)||e.setAttribute(o,"1"),i=e,x(),t},C=function(e,t){if(!e)return null;if(e.collapsed){if(!v(e)){var n=t?1:-1,r=Ac(n,l,e),o=r.getNode(!t);if(fc(o))return h(n,o,!!t&&!r.isAtEnd(),!1);o=r.getNode(t);if(fc(o))return h(n,o,!t&&!r.isAtEnd(),!1)}return null}o=e.startContainer,t=e.startOffset,r=e.endOffset;if(3===o.nodeType&&0===t&&yw(o.parentNode)&&(o=o.parentNode,t=s.nodeIndex(o),o=o.parentNode),1!==o.nodeType)return null;if(r===t+1&&o===e.endContainer){t=o.childNodes[t];if(m(t))return y(t)}return null},w=function(){i&&i.removeAttribute(o),gr(vt.fromDom(a.getBody()),"#"+d).each(en),i=null},x=function(){f.hide()};return lt.ceFalse&&!Jh(a)&&e(),{showCaret:h,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(io(e),g(p()),u.scrollIntoView(e))},hideFakeCaret:x,destroy:function(){f.destroy(),i=null}}},xw=function(i){var o=pt.each,a=Ef.BACKSPACE,u=Ef.DELETE,s=i.dom,c=i.selection,e=i.parser,t=lt.gecko,n=lt.ie,l=lt.webkit,r="data:text/mce-internal,",f=n?"Text":"URL",d=function(e,t){try{i.getDoc().execCommand(e,!1,t)}catch(n){}},m=function(e){return e.isDefaultPrevented()},g=function(){var o=function(e){var t=s.create("body"),e=e.cloneContents();return t.appendChild(e),c.serializer.serialize(t,{format:"html"})};i.on("keydown",function(e){var t,n,r=e.keyCode;m(e)||r!==u&&r!==a||(n=i.selection.isCollapsed(),t=i.getBody(),n&&!s.isEmpty(t)||!n&&(r=i.selection.getRng(),n=o(r),(r=s.createRng()).selectNode(i.getBody()),n!==o(r))||(e.preventDefault(),i.setContent(""),t.firstChild&&s.isBlock(t.firstChild)?i.selection.setCursorLocation(t.firstChild,0):i.selection.setCursorLocation(t,0),i.nodeChanged()))})},p=function(){i.shortcuts.add("meta+a",null,"SelectAll")},h=function(){i.inline||s.bind(i.getDoc(),"mousedown mouseup",function(e){var t;e.target===i.getDoc().documentElement&&(t=c.getRng(),i.getBody().focus(),"mousedown"===e.type?Qr(t.startContainer)||c.placeCaretAt(e.clientX,e.clientY):c.setRng(t))})},v=function(){Range.prototype.getClientRects||i.on("mousedown",function(e){var t;m(e)||"HTML"!==e.target.nodeName||((t=i.getBody()).blur(),kr.setEditorTimeout(i,function(){t.focus()}))})},b=function(){i.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==s.getContentEditableParent(t)&&(e.preventDefault(),i.selection.select(t),i.nodeChanged()),"A"===t.nodeName&&s.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),c.select(t))})},y=function(){i.on("keydown",function(e){if(!m(e)&&e.keyCode===a&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},C=function(){i.getParam("readonly")||i.on("BeforeExecCommand mousedown",function(){d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),Hs(i)||d("enableObjectResizing",!1)})},w=function(){i.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||o(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})})},x=function(){i.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},S=function(){i.inline||i.on("keydown",function(){document.activeElement===document.body&&i.getWin().focus()})},N=function(){i.inline||(i.contentStyles.push("body {min-height: 150px}"),i.on("click",function(e){"HTML"===e.target.nodeName&&(11<lt.ie?i.getBody().focus():(e=i.selection.getRng(),i.getBody().focus(),i.selection.setRng(e),i.selection.normalize(),i.nodeChanged()))}))},E=function(){lt.mac&&i.on("keydown",function(e){!Ef.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),i.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},k=function(){i.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},_=function(){i.on("init",function(){i.dom.bind(i.getBody(),"submit",function(e){e.preventDefault()})})},T=function(){i.on("dragstart",function(e){var t;(t=e).dataTransfer&&(i.selection.isCollapsed()&&"IMG"===t.target.tagName&&c.select(t.target),0<(e=i.selection.getContent()).length&&(e=r+escape(i.id)+","+escape(e),t.dataTransfer.setData(f,e)))}),i.on("drop",function(e){var t,n;m(e)||(t=(t=e).dataTransfer&&(n=t.dataTransfer.getData(f))&&0<=n.indexOf(r)?(n=n.substr(r.length).split(","),{id:unescape(n[0]),html:unescape(n[1])}):null)&&t.id!==i.id&&(e.preventDefault(),e=Af(e.x,e.y,i.getDoc()),c.setRng(e),e=t.html,t=!0,i.queryCommandSupported("mceInsertClipboardContent")?i.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):i.execCommand("mceInsertContent",!1,e))})},A=ee,n=function(){var n,r;i.on("keydown",function(e){if(!m(e)&&e.keyCode===Ef.BACKSPACE){var t,n=(t=c.getRng()).startContainer,e=t.startOffset,r=s.getRoot(),o=n;if(t.collapsed&&0===e){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==r;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(i.formatter.toggle("blockquote",null,o),(t=s.createRng()).setStart(n,0),t.setEnd(n,0),c.setRng(t))}}}),g(),lt.windowsPhone||i.on("keyup focusin mouseup",function(e){Ef.modifierPressed(e)||c.normalize()},!0),l&&(h(),b(),Ls(i)&&i.on("init",function(){d("DefaultParagraphSeparator",Ls(i))}),_(),y(),e.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),lt.iOS?(S(),N(),k()):p()),11<=lt.ie&&(N(),y()),lt.ie&&(p(),d("AutoUrlDetect",!1),T()),t&&(i.on("keydown",function(e){if(!m(e)&&e.keyCode===a&&i.getBody().getElementsByTagName("hr").length&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return s.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),e.preventDefault())}}),v(),n=function(){var e=s.getAttribs(c.getStart().cloneNode(!1));return function(){var t=c.getStart();t!==i.getBody()&&(s.setAttrib(t,"style",null),o(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!==s.getParent(c.getEnd(),s.isBlock)},i.on("keypress",function(e){var t;if(!m(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),i.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),s.bind(i.getDoc(),"cut",function(e){var t;!m(e)&&r()&&(t=n(),kr.setEditorTimeout(i,function(){t()}))}),C(),w(),x(),E(),y())};return Jh(i)?(l&&(h(),b(),_(),p(),lt.iOS&&(S(),N(),k())),t&&(v(),C(),x(),E())):n(),{refreshContentEditable:A,isHidden:function(){if(!t||i.removed)return!1;var e=i.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount}}},Sw=Qa.DOM,Nw=function(e){return de(e,function(e){return!1===d(e)})},Ew=function(e){var t=e.settings,n=e.editorUpload.blobCache;return Nw({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:(e=e).inline?e.getElement().nodeName.toLowerCase():undefined,validate:!0,blob_cache:n,images_dataimg_filter:t.images_dataimg_filter})},kw=function(o){var e=o.dom.getRoot();o.inline||ff(o)&&o.selection.getStart(!0)!==e||ol(e).each(function(e){var t,n=e.getNode(),r=vn(n)?ol(n).getOr(e):e;lt.browser.isIE()?(t=o,n=r.toRange(),e=vt.fromDom(t.getBody()),e=(wd(t)?A.from(n):A.none()).map(xd).filter(Cd(e)),t.bookmark=e.isSome()?e:t.bookmark):o.selection.setRng(r.toRange())})},_w=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("Init"),e.focus(!0),kw(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&kr.setEditorTimeout(t,function(){var e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus);e.destroyed||e.focus()},100)},Tw=function(e){return(e.inline?e.ui:e.dom).styleSheetLoader},Aw=function(e){var t,n=Tw(e),r=js(e),o=e.contentCSS,i=function(){n.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=function(){e.removed?i():e.on("remove",i)};0<e.contentStyles.length&&(t="",pt.each(e.contentStyles,function(e){t+=e+"\r\n"}),e.dom.addStyle(t));var u,s,c,l,f,d,m=hr.all((u=e,s=o,c=r,f=[new hr(function(e,t){return Tw(u).loadAll(s,e,t)})],u.inline?f:f.concat([new hr(function(e,t){return u.ui.styleSheetLoader.loadAll(c,e,t)})]))).then(a)["catch"](a);return e.settings.content_style&&(f=(l=e).settings.content_style,a=vt.fromDom(l.getBody()),a=$t(qt(a)),d=vt.fromTag("style"),On(d,"type","text/css"),Jt(d,vt.fromText(f)),Jt(a,d),l.on("remove",function(){en(d)})),m},Rw=function(t){var e=t.settings,n=t.getDoc(),r=t.getBody();t.fire("PreInit"),e.browser_spellcheck||e.gecko_spellcheck||(n.body.spellcheck=!1,Sw.setAttrib(r,"spellcheck","false")),t.quirks=xw(t),t.fire("PostRender");n=t.getParam("directionality",su.isRtl()?"rtl":undefined);n!==undefined&&(r.dir=n),e.protect&&t.on("BeforeSetContent",function(t){pt.each(e.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type})},Dw=function(e){var t;!0!==e.removed&&(Jh(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),_w(e))},Ow=function(t,e){var n=t.settings,r=t.getElement(),o=t.getDoc();n.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(o.open(),o.write(t.iframeHTML),o.close()),t.inline&&(Sw.addClass(r,"mce-content-body"),t.contentDocument=o=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);var u,r=t.getBody();r.disabled=!0,t.readonly=!!n.readonly,t.readonly||(t.inline&&"static"===Sw.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable=t.getParam("content_editable_state",!0)),r.disabled=!1,t.editorUpload=Ab(t),t.schema=Zo(n),t.dom=Qa(o,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:t.getParam("content_css_cors",!1,"boolean"),referrerPolicy:Fs(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((n=Tv(Ew(u=t),u.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o=e.length,i=u.dom,a="data-mce-"+t;o--;)(r=(n=e[o]).attr(t))&&!n.attr(a)&&0!==r.indexOf("data:")&&0!==r.indexOf("blob:")&&("style"===t?((r=i.serializeStyle(i.parseStyle(r),n.name)).length||(r=null),n.attr(a,r),n.attr(t,r)):"tabindex"===t?(n.attr(a,r),n.attr(t,null)):n.attr(a,u.convertURL(r,t,n.name)))}),n.addNodeFilter("script",function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}),u.settings.preserve_cdata&&n.addNodeFilter("#cdata",function(e){for(var t=e.length;t--;){var n=e[t];n.type=8,n.name="#comment",n.value="[CDATA["+u.dom.encode(n.value)+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t=e.length,n=u.schema.getNonEmptyElements();t--;){var r=e[t];r.isEmpty(n)&&0===r.getAll("br").length&&(r.append(new Gd("br",1)).shortEnded=!0)}}),n),t.serializer=Bv((n=t.settings,Ee(Ee({},Ew(t)),Nw({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,element_format:n.element_format,entities:n.entities,entity_encoding:n.entity_encoding,indent:n.indent,indent_after:n.indent_after,indent_before:n.indent_before,block_elements:n.block_elements,boolean_attributes:n.boolean_attributes,custom_elements:n.custom_elements,extended_valid_elements:n.extended_valid_elements,invalid_elements:n.invalid_elements,invalid_styles:n.invalid_styles,move_caret_before_on_enter_elements:n.move_caret_before_on_enter_elements,non_empty_elements:n.non_empty_elements,schema:n.schema,self_closing_elements:n.self_closing_elements,short_ended_elements:n.short_ended_elements,special:n.special,text_block_elements:n.text_block_elements,text_inline_elements:n.text_inline_elements,valid_children:n.valid_children,valid_classes:n.valid_classes,valid_elements:n.valid_elements,valid_styles:n.valid_styles,verify_html:n.verify_html,whitespace_elements:n.whitespace_elements}))),t),t.selection=lv(t.dom,t.getWin(),t.serializer,t),t.annotator=Cf(t),t.formatter=Ib(t),t.undoManager=Ub(t),t._nodeChangeDispatcher=new nw(t),t._selectionOverrides=ww(t),vC(t),ow(t),Jh(t)||aw(t);n=Jh(n=t)?ou(null):tw(n);pC(t,n),Ls(n=t)&&n.on("NodeChange",h(yC,n)),qb(t);n=Qh(t);Rw(t),n.fold(function(){Aw(t).then(function(){return Dw(t)})},function(e){t.setProgressState(!0),Aw(t).then(function(){e().then(function(e){t.setProgressState(!1),Dw(t)},function(e){t.notificationManager.open({type:"error",text:String(e)}),Dw(t)})})})},Bw=Qa.DOM,Pw=function(e){var t=e.getParam("doctype","<!DOCTYPE html>")+"<html><head>";e.getParam("document_base_url","")!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=Bs(e,"body_id","tinymce"),r=Bs(e,"body_class","");return Ps(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Ps(e)+'" />'),t+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>'},Lw=function(e,t){var n,r,o,i=e.editorManager.translate("Rich Text Area. Press ALT-0 for help."),a=(n=e.id,r=i,t.height,o=e.getParam("iframe_attrs",{}),i=vt.fromTag("iframe"),Bn(i,o),Bn(i,{id:n+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),hu(i,"tox-edit-area__iframe"),i.dom);a.onload=function(){a.onload=null,e.fire("load")};i=function(e,t){if(document.domain!==window.location.hostname&&lt.browser.isIE()){var n=Eb("mce");e[n]=function(){Ow(e)};n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Bw.setAttrib(t,"src",n),!0}return!1}(e,a);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=a,e.iframeHTML=Pw(e),Bw.add(t.iframeContainer,a),i},Iw=Qa.DOM,Mw=function(t,n,e){var r=lb.get(e),o=lb.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=pt.trim(e),r&&-1===pt.inArray(n,e)&&(pt.each(lb.dependencies(e),function(e){Mw(t,n,e)}),!t.plugins[e]))try{var i=new r(t,o,t.$);(t.plugins[e]=i).init&&(i.init(t,o),n.push(e))}catch(FS){!function(e,t,n){t=su.translate(["Failed to initialize plugin: {0}",t]);Nf(e,"PluginLoadError",{message:t}),yb(t,n),pb(e,t)}(t,e,FS)}},Fw=function(e){return e.replace(/^\-/,"")},Uw=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},zw=function(e){var t=e.getElement();return e.inline?Uw(null):(e=t,t=Iw.create("div"),Iw.insertAfter(t,e),Uw(t))},jw=function(e){var t,n,r=e.getElement();return e.orgDisplay=r.style.display,W(qs(e))?e.theme.renderUI():m(qs(e))?(n=(t=e).getElement(),(r=qs(t)(t,n)).editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||t.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||t.id+"_iframecontainer"),r.height=r.iframeHeight||n.offsetHeight,r):zw(e)},Hw=function(e){var n,r,t,o,i;e.fire("ScriptsLoaded"),n=e,t=pt.trim(Ms(n)),r=n.ui.registry.getAll().icons,t=Ee(Ee({},nb.get("default").icons),nb.get(t).icons),ae(t,function(e,t){pe(r,t)||n.ui.registry.addIcon(t,e)}),s=qs(c=e),W(s)?(c.settings.theme=Fw(s),t=fb.get(s),c.theme=new t(c,fb.urls[s]),c.theme.init&&c.theme.init(c,fb.urls[s]||c.documentBaseUrl.replace(/\/$/,""),c.$)):c.theme={},o=e,i=[],pt.each(Ws(o).split(/[ ,]/),function(e){Mw(o,i,Fw(e))});var a,u,s=jw(e);a=e,u=A.from(s.api).getOr({}),c={show:A.from(u.show).getOr(ee),hide:A.from(u.hide).getOr(ee),disable:A.from(u.disable).getOr(ee),isDisabled:A.from(u.isDisabled).getOr(N),enable:function(){a.mode.isReadOnly()||A.from(u.enable).map(S)}},a.ui=Ee(Ee({},a.ui),c);var c={editorContainer:s.editorContainer,iframeContainer:s.iframeContainer};return e.editorContainer=c.editorContainer||null,xb(e),e.inline?Ow(e):(c=Lw(s=e,e=c),e.editorContainer&&(Bw.get(e.editorContainer).style.display=s.orgDisplay,s.hidden=Bw.isHidden(e.editorContainer)),s.getElement().style.display="none",Bw.setAttrib(s.id,"aria-hidden","true"),void(c||Ow(s)))},Vw=Qa.DOM,qw=function(e){return"-"===e.charAt(0)},$w=function(e,t){var n,r=Us(t),o=t.getParam("language_url","","string");!1===su.hasCode(r)&&"en"!==r&&(n=""!==o?o:t.editorManager.baseURL+"/langs/"+r+".js",e.add(n,ee,undefined,function(){hb(t,"LanguageLoadError",vb("language",n,r))}))},Ww=function(t,e,n){return A.from(e).filter(function(e){return 0<e.length&&!nb.has(e)}).map(function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons"+n+".js",name:A.some(e)}})},Kw=function(e,o,t){var n=Ww(o,"default",t),t=A.from(o.getParam("icons_url","","string")).filter(function(e){return 0<e.length}).map(function(e){return{url:e,name:A.none()}}).orThunk(function(){return Ww(o,Ms(o),"")});Y(function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([n,t]),function(r){e.add(r.url,ee,undefined,function(){var e,t,n;e=o,t=r.url,n=r.name.getOrUndefined(),hb(e,"IconsLoadError",vb("icons",t,n))})})},Xw=function(e,t){var n,r,o,i,a,u,s=nu.ScriptLoader;n=s,o=t,i=function(){var r,o;$w(s,e),Kw(s,e,t),r=e,o=t,pt.each(r.getParam("external_plugins"),function(e,t){lb.load(t,e,ee,undefined,function(){bb(r,e,t)}),r.settings.plugins+=" "+t}),pt.each(Ws(r).split(/[ ,]/),function(e){var t,n;(e=pt.trim(e))&&!lb.urls[e]&&(qw(e)?(e=e.substr(1,e.length),t=lb.dependencies(e),pt.each(t,function(e){var t=lb.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},e);lb.load(t.resource,t,ee,undefined,function(){bb(r,t.prefix+t.resource+t.suffix,t.resource)})})):lb.load(e,n={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},ee,undefined,function(){bb(r,n.prefix+n.resource+n.suffix,e)}))}),s.loadQueue(function(){e.removed||Hw(e)},e,function(){e.removed||Hw(e)})},u=qs(r=e),W(u)?(qw(u)||pe(fb.urls,u)||((a=r.getParam("theme_url"))?fb.load(u,r.documentBaseURI.toAbsolute(a)):fb.load(u,"themes/"+u+"/theme"+o+".js")),n.loadQueue(function(){fb.waitFor(u,i)})):i()},Yw=function(t){var e=t.id;su.setCode(Us(t));var n,r,o,i,a=function(){Vw.unbind(window,"ready",a),t.render()};li.Event.domLoaded?t.getElement()&&lt.contentEditable&&(n=vt.fromDom(t.getElement()),r=j(n.dom.attributes,function(e,t){return e[t.name]=t.value,e},{}),t.on("remove",function(){M(n.dom.attributes,function(e){return In(n,e.name),0}),Bn(n,r)}),t.ui.styleSheetLoader=(o=t,Tr.forElement(n,{contentCssCors:o.getParam("content_css_cors"),referrerPolicy:Fs(o)})),t.getParam("inline")?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),(i=t.getElement().form||Vw.getParent(e,"form"))&&(t.formElement=i,t.getParam("hidden_input")&&!bn(t.getElement())&&(Vw.insertAfter(Vw.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},Vw.bind(i,"submit reset",t.formEventDelegate),t.on("reset",function(){t.resetContent()}),!t.getParam("submit_patch")||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)})),t.windowManager=mb(t),t.notificationManager=cb(t),"xml"===t.getParam("encoding")&&t.on("GetContent",function(e){e.save&&(e.content=Vw.encode(e.content))}),t.getParam("add_form_submit_trigger")&&t.on("submit",function(){t.initialized&&t.save()}),t.getParam("add_unload_trigger")&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),Xw(t,t.suffix)):Vw.bind(window,"ready",a)},Gw=function(e,t){return t=t,ev(e).editor.addVisual(t)},Jw={"font-size":"size","font-family":"face"},Qw=function(n,t,e){return vp(vt.fromDom(e),function(e){return zn(t=e,n).orThunk(function(){return"font"===Nt(t)?ge(Jw,n).bind(function(e){return Ln(t,e)}):A.none()});var t},function(e){return wt(vt.fromDom(t),e)})},o=function(n){return function(t,e){return A.from(e).map(vt.fromDom).filter(kt).bind(function(e){return Qw(n,t,e.dom).or((e=e.dom,A.from(Qa.DOM.getStyle(e,n,!0))))}).getOr("")}},Zw=o("font-size"),ex=v(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},o("font-family")),tx=function(e){return ol(e.getBody()).map(function(e){e=e.container();return yn(e)?e.parentNode:e})},nx=function(e,t){return n=e,A.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return e.startContainer===t&&0===e.startOffset?A.none():A.from(n.selection.getStart(!0))}).orThunk(h(tx,e)).map(vt.fromDom).filter(kt).map(t);var n},rx=function(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var r=pt.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),e=pt.explode(e.getParam("font_size_classes",""));return e?e[n-1]||t:r[n-1]||t}return t}return t},ox=function(e,t){t=rx(e,t);e.formatter.toggle("fontname",{value:function(e){e=e.split(/\s*,\s*/);return I(e,function(e){return-1===e.indexOf(" ")||He(e,'"')||He(e,"'")?e:"'"+e+"'"}).join(",")}(t)}),e.nodeChanged()},ix=function(e,t){var n=function(e){if("string"==typeof e)return{content:e,details:{}};var t=pt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}(t);t=n.content,n=n.details,Zh(e).editor.insertContent(t,n)},ax=pt.each,ux=pt.map,sx=pt.inArray,cx=(lx.prototype.execCommand=function(t,n,r,e){var o,i=!1,a=this;if(!a.editor.removed){if("mcefocus"!==t.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?(o=a.editor,kd(o).each(function(e){return o.selection.setRng(e)})):a.editor.focus()),(e=a.editor.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;var u=t.toLowerCase();if(e=a.commands.exec[u])return e(u,n,r),a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(ax(this.editor.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!(i=!0)}),i)return i;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(t,n,r))return a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{i=a.editor.getDoc().execCommand(t,n,r)}catch(s){}return!!i&&(a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},lx.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(n){}return!1}},lx.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(n){}}},lx.prototype.addCommands=function(e,n){void 0===n&&(n="exec");var r=this;ax(e,function(t,e){ax(e.toLowerCase().split(","),function(e){r.commands[n][e]=t})})},lx.prototype.addCommand=function(e,o,i){var a=this;e=e.toLowerCase(),this.commands.exec[e]=function(e,t,n,r){return o.call(i||a.editor,t,n,r)}},lx.prototype.queryCommandSupported=function(e){if(e=e.toLowerCase(),this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(t){}return!1},lx.prototype.addQueryStateHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.state[e]=function(){return t.call(n||r.editor)}},lx.prototype.addQueryValueHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.value[e]=function(){return t.call(n||r.editor)}},lx.prototype.hasCustomCommand=function(e){return e=e.toLowerCase(),!!this.commands.exec[e]},lx.prototype.execNativeCommand=function(e,t,n){return t===undefined&&(t=!1),n===undefined&&(n=null),this.editor.getDoc().execCommand(e,t,n)},lx.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)},lx.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t?{value:t}:undefined),this.editor.nodeChanged()},lx.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)},lx.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},lx.prototype.setupCommands=function(o){var i=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":ee,"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},mceFocus:function(e,t,n){jd(o,n)},"Cut,Copy,Paste":function(e){var t,n=o.getDoc();try{i.execNativeCommand(e)}catch(r){t=!0}!(t="paste"===e&&!n.queryCommandEnabled(e)?!0:t)&&n.queryCommandSupported(e)||(e=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),lt.mac&&(e=e.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:e,type:"error"}))},unlink:function(){var e;o.selection.isCollapsed()?(e=o.dom.getParent(o.selection.getStart(),"a"))&&o.dom.remove(e,!0):o.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),ax("left,center,right,justify".split(","),function(e){t!==e&&o.formatter.remove("align"+e)}),"none"!==t&&i.toggleFormat("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){i.execNativeCommand(e);var t=o.dom.getParent(o.selection.getNode(),"ol,ul");t&&(e=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(i.storeSelection(),o.dom.split(e,t),i.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){i.toggleFormat(e)},"ForeColor,HiliteColor":function(e,t,n){i.toggleFormat(e,n)},FontName:function(e,t,n){ox(o,n)},FontSize:function(e,t,n){var r;(r=o).formatter.toggle("fontsize",{value:rx(r,n)}),r.nodeChanged()},LineHeight:function(e,t,n){var r;(r=o).formatter.toggle("lineheight",{value:String(n)}),r.nodeChanged()},RemoveFormat:function(e){o.formatter.remove(e)},mceBlockQuote:function(){i.toggleFormat("blockquote")},FormatBlock:function(e,t,n){return i.toggleFormat(n||"p")},mceCleanup:function(){var e=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(e)},mceRemoveNode:function(e,t,n){n=n||o.selection.getNode();n!==o.getBody()&&(i.storeSelection(),o.dom.remove(n,!0),i.restoreSelection())},mceSelectNodeDepth:function(e,t,n){var r=0;o.dom.getParent(o.selection.getNode(),function(e){if(1===e.nodeType&&r++===n)return o.selection.select(e),!1},o.getBody())},mceSelectNode:function(e,t,n){o.selection.select(n)},mceInsertContent:function(e,t,n){ix(o,n)},mceInsertRawHTML:function(e,t,n){o.selection.setContent("tiny_mce_marker");var r=o.getContent();o.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceInsertNewLine:function(e,t,n){z1(o,n)},mceToggleFormat:function(e,t,n){i.toggleFormat(n)},mceSetContent:function(e,t,n){o.setContent(n)},"Indent,Outdent":function(e){dC(o,e)},mceRepaint:ee,InsertHorizontalRule:function(){o.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual,o.addVisual()},mceReplaceContent:function(e,t,n){o.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceInsertLink:function(e,t,n){"string"==typeof n&&(n={href:n});var r=o.dom.getParent(o.selection.getNode(),"a");n.href=n.href.replace(/ /g,"%20"),r&&n.href||o.formatter.remove("link"),n.href&&o.formatter.apply("link",n,r)},selectAll:function(){var e,t=o.dom.getParent(o.selection.getStart(),En);t&&((e=o.dom.createRng()).selectNodeContents(t),o.selection.setRng(e))},mceNewDocument:function(){o.setContent("")},InsertLineBreak:function(e,t,n){return k1(o,n),!0}});var e=function(t){return function(){var e=o.selection,e=e.isCollapsed()?[o.dom.getParent(e.getNode(),o.dom.isBlock)]:e.getSelectedBlocks(),e=ux(e,function(e){return!!o.formatter.matchNode(e,t)});return-1!==sx(e,!0)}};i.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return i.isFormatMatch(e)},mceBlockQuote:function(){return i.isFormatMatch("blockquote")},Outdent:function(){return cC(o)},"InsertUnorderedList,InsertOrderedList":function(e){var t=o.dom.getParent(o.selection.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),i.addCommands({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}}),i.addQueryValueHandler("FontName",function(){return nx(t=o,function(e){return ex(t.getBody(),e.dom)}).getOr("");var t},this),i.addQueryValueHandler("FontSize",function(){return nx(t=o,function(e){return Zw(t.getBody(),e.dom)}).getOr("");var t},this),i.addQueryValueHandler("LineHeight",function(){return nx(t=o,function(n){var e=vt.fromDom(t.getBody());return vp(n,function(e){return zn(e,"line-height")},h(wt,e)).getOrThunk(function(){var e=parseFloat(Fn(n,"line-height")),t=parseFloat(Fn(n,"font-size"));return String(e/t)})}).getOr("");var t},this)},lx);function lx(e){this.commands={state:{},exec:{},value:{}},this.editor=e,this.setupCommands(e)}var fx="data-mce-contenteditable",dx=function(e,t,n){var r,o;bu(e,t)&&!1===n?(o=t,mu(r=e)?r.dom.classList.remove(o):pu(r,o),vu(r)):n&&hu(e,t)},mx=function(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(r){}},gx=function(e,t){e.dom.contentEditable=t?"true":"false"},px=function(e,t){var n=vt.fromDom(e.getBody());dx(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),A.from(e.selection.getNode()).each(function(e){e.removeAttribute("data-mce-selected")}),e.readonly=!0,gx(n,!1),Y(Cu(n,'*[contenteditable="true"]'),function(e){On(e,fx,"true"),gx(e,!1)})):(e.readonly=!1,gx(n,!0),Y(Cu(n,"*["+fx+'="true"]'),function(e){In(e,fx),gx(e,!0)}),mx(e,"StyleWithCSS",!1),mx(e,"enableInlineTableEditing",!1),mx(e,"enableObjectResizing",!1),(Ud(n=e)||Fd(n))&&e.focus(),e.selection.setRng(e.selection.getRng()),e.nodeChanged())},hx=function(e){return e.readonly},vx=function(t){t.parser.addAttributeFilter("contenteditable",function(e){hx(t)&&Y(e,function(e){e.attr(fx,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(fx,function(e){hx(t)&&Y(e,function(e){e.attr("contenteditable",e.attr(fx))})}),t.serializer.addTempAttr(fx)},bx=function(r,o){var e,t;"click"!==o.type||Ef.metaKeyPressed(o)||(e=vt.fromDom(o.target),t=r,pr(e,"a",function(e){return wt(e,vt.fromDom(t.getBody()))}).bind(function(e){return Ln(e,"href")}).each(function(e){var t,n;o.preventDefault(),/^#/.test(e)?(t=r.dom.select(e+',[name="'+(He(t=e,n="#")?(n=n.length,t.substring(n)):t)+'"]')).length&&r.selection.scrollIntoView(t[0],!0):window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))},yx=pt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),Cx=(wx.isNative=function(e){return!!yx[e.toLowerCase()]},wx.prototype.fire=function(e,t){var n=e.toLowerCase(),r=oi(n,t||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);var o=this.bindings[n];if(o)for(var i=0,a=o.length;i<a;i++){var u=o[i];if(!u.removed){if(u.once&&this.off(n,u.func),r.isImmediatePropagationStopped())return r;if(!1===u.func.call(this.scope,r))return r.preventDefault(),r}}return r},wx.prototype.on=function(e,t,n,r){if(t=!1===t?N:t){var o={func:t,removed:!1};r&&pt.extend(o,r);for(var i=e.toLowerCase().split(" "),a=i.length;a--;){var u=i[a],s=this.bindings[u];s||(s=[],this.toggleEvent(u,!0)),s=n?ke([o],s):ke(ke([],s),[o]),this.bindings[u]=s}}return this},wx.prototype.off=function(e,t){var n=this;if(e)for(var r=e.toLowerCase().split(" "),o=r.length;o--;){var i,a=r[o],u=this.bindings[a];if(!a)return ae(this.bindings,function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]}),this;u&&(t?(u=(i=F(u,function(e){return e.func===t})).fail,this.bindings[a]=u,Y(i.pass,function(e){e.removed=!0})):u.length=0,u.length||(this.toggleEvent(e,!1),delete this.bindings[a]))}else ae(this.bindings,function(e,t){n.toggleEvent(t,!1)}),this.bindings={};return this},wx.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})},wx.prototype.has=function(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)},wx);function wx(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||N}var xx,Sx=function(n){return n._eventDispatcher||(n._eventDispatcher=new Cx({scope:n,toggleEvent:function(e,t){Cx.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher},Xe={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;var r=Sx(this).fire(e,t);if(!1!==n&&this.parent)for(var o=this.parent();o&&!r.isPropagationStopped();)o.fire(e,r,!1),o=o.parent();return r},on:function(e,t,n){return Sx(this).on(e,t,n)},off:function(e,t){return Sx(this).off(e,t)},once:function(e,t){return Sx(this).once(e,t)},hasEventListeners:function(e){return Sx(this).has(e)}},Nx=Qa.DOM,Ex=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;t=Vs(e);return t?(e.eventRoot||(e.eventRoot=Nx.select(t)[0]),e.eventRoot):e.getBody()},kx=function(e,t,n){var r;(r=e).hidden||hx(r)?hx(e)&&bx(e,n):e.fire(t,n)},_x=function(i,a){var e,t;i.delegates||(i.delegates={}),i.delegates[a]||i.removed||(t=Ex(i,a),Vs(i)?(xx||(xx={},i.editorManager.on("removeEditor",function(){i.editorManager.activeEditor||xx&&(ae(xx,function(e,t){i.dom.unbind(Ex(i,t))}),xx=null)})),xx[a]||(xx[a]=e=function(e){for(var t=e.target,n=i.editorManager.get(),r=n.length;r--;){var o=n[r].getBody();o!==t&&!Nx.isChildOf(t,o)||kx(n[r],a,e)}},Nx.bind(t,a,e))):(Nx.bind(t,a,e=function(e){kx(i,a,e)}),i.delegates[a]=e))},Tx=Ee(Ee({},Xe),{bindPendingEventDelegates:function(){var t=this;pt.each(t._pendingNativeEvents,function(e){_x(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?_x(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Ex(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var n=this,e=n.getBody(),t=n.dom;n.delegates&&(ae(n.delegates,function(e,t){n.dom.unbind(Ex(n,t),t,e)}),delete n.delegates),!n.inline&&e&&t&&(e.onload=null,t.unbind(n.getWin()),t.unbind(n.getDoc())),t&&(t.unbind(e),t.unbind(n.getContainer()))}}),Ax=["design","readonly"],Rx=function(e,t,n,r){var o=n[t.get()],n=n[r];try{n.activate()}catch(FS){return void console.error("problem while activating editor mode "+r+":",FS)}o.deactivate(),o.editorReadOnly!==n.editorReadOnly&&px(e,n.editorReadOnly),t.set(r),e.fire("SwitchMode",{mode:r})},Dx=function(e,t,n){if(P(Ax,t))throw new Error("Cannot override default mode "+t);return Ee(Ee({},e),((e={})[t]=Ee(Ee({},n),{deactivate:function(){try{n.deactivate()}catch(FS){console.error("problem while deactivating editor mode "+t+":",FS)}}}),e))},Ox=function(t){var e,n,r=ou("design"),o=ou({design:{activate:ee,deactivate:ee,editorReadOnly:!1},readonly:{activate:ee,deactivate:ee,editorReadOnly:!0}});return(e=t).serializer?vx(e):e.on("PreInit",function(){vx(e)}),(n=t).on("ShowCaret",function(e){hx(n)&&e.preventDefault()}),n.on("ObjectSelected",function(e){hx(n)&&e.preventDefault()}),{isReadOnly:function(){return hx(t)},set:function(e){return function(e,t,n,r){if(r!==n.get()){if(!pe(t,r))throw new Error("Editor mode '"+r+"' is invalid");e.initialized?Rx(e,n,t,r):e.on("init",function(){return Rx(e,n,t,r)})}}(t,o.get(),r,e)},get:function(){return r.get()},register:function(e,t){o.set(Dx(o.get(),e,t))}}},Bx=pt.each,Px=pt.explode,Lx={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Ix=pt.makeMap("alt,ctrl,shift,meta,access"),Mx=function(e){var t,n={};Bx(Px(e.toLowerCase(),"+"),function(e){e in Ix?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=Lx[e]||e.toUpperCase().charCodeAt(0))});var r=[n.keyCode];for(t in Ix)n[t]?r.push(t):n[t]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,lt.mac?n.ctrl=!0:n.shift=!0),n.meta&&(lt.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},Fx=(Ux.prototype.add=function(e,t,n,r){var o=this,i=o.normalizeCommandFunc(n);return Bx(Px(pt.trim(e)),function(e){e=o.createShortcut(e,t,i,r);o.shortcuts[e.id]=e}),!0},Ux.prototype.remove=function(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},Ux.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:pt.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n},Ux.prototype.createShortcut=function(e,t,n,r){e=pt.map(Px(e,">"),Mx);return e[e.length-1]=pt.extend(e[e.length-1],{func:n,scope:r||this.editor}),pt.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})},Ux.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},Ux.prototype.isFunctionKey=function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123},Ux.prototype.matchShortcut=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},Ux.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null},Ux);function Ux(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var n=this;e.on("keyup keypress keydown",function(t){!n.hasModifier(t)&&!n.isFunctionKey(t)||t.isDefaultPrevented()||(Bx(n.shortcuts,function(e){if(n.matchShortcut(t,e))return n.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type&&n.executeShortcutAction(e),!0}),n.matchShortcut(t,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===t.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}var zx=function(){var e,t,n,r,o,i,a,u,u=(t={},n={},r={},o={},i={},a={},{addButton:(u=function(n,r){return function(e,t){return n[e.toLowerCase()]=Ee(Ee({},t),{type:r})}})(e={},"button"),addGroupToolbarButton:u(e,"grouptoolbarbutton"),addToggleButton:u(e,"togglebutton"),addMenuButton:u(e,"menubutton"),addSplitButton:u(e,"splitbutton"),addMenuItem:u(t,"menuitem"),addNestedMenuItem:u(t,"nestedmenuitem"),addToggleMenuItem:u(t,"togglemenuitem"),addAutocompleter:u(n,"autocompleter"),addContextMenu:u(o,"contextmenu"),addContextToolbar:u(i,"contexttoolbar"),addContextForm:u(i,"contextform"),addSidebar:u(a,"sidebar"),addIcon:function(e,t){return r[e.toLowerCase()]=t},getAll:function(){return{buttons:e,menuItems:t,icons:r,popups:n,contextMenus:o,contextToolbars:i,sidebars:a}}});return{addAutocompleter:u.addAutocompleter,addButton:u.addButton,addContextForm:u.addContextForm,addContextMenu:u.addContextMenu,addContextToolbar:u.addContextToolbar,addIcon:u.addIcon,addMenuButton:u.addMenuButton,addMenuItem:u.addMenuItem,addNestedMenuItem:u.addNestedMenuItem,addSidebar:u.addSidebar,addSplitButton:u.addSplitButton,addToggleButton:u.addToggleButton,addGroupToolbarButton:u.addGroupToolbarButton,addToggleMenuItem:u.addToggleMenuItem,getAll:u.getAll}},jx=pt.each,Hx=pt.trim,Vx="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),qx={ftp:21,http:80,https:443,mailto:25},$x=(Wx.parseDataUri=function(e){var t,n=decodeURIComponent(e).split(","),e=/data:([^;]+)/.exec(n[0]);return{type:t=e?e[1]:t,data:n[1]}},Wx.getDocumentBaseUrl=function(e){e=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},Wx.prototype.setPath=function(e){e=/^(.*?)\/?(\w+)?$/.exec(e);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},Wx.prototype.toRelative=function(e){if("./"===e)return e;var t=new Wx(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();var n=this.getURI(),e=t.getURI();return n===e||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===e||(n=this.toRelPath(this.path,t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor)),n},Wx.prototype.toAbsolute=function(e,t){e=new Wx(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))},Wx.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=qx[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},Wx.prototype.toRelPath=function(e,t){var n,r,o=0,i="",a=e.substring(0,e.lastIndexOf("/")).split("/"),u=t.split("/");if(a.length>=u.length)for(n=0,r=a.length;n<r;n++)if(n>=u.length||a[n]!==u[n]){o=n+1;break}if(a.length<u.length)for(n=0,r=u.length;n<r;n++)if(n>=a.length||a[n]!==u[n]){o=n+1;break}if(1===o)return t;for(n=0,r=a.length-(o-1);n<r;n++)i+="../";for(n=o-1,r=u.length;n<r;n++)i+=n!==o-1?"/"+u[n]:u[n];return i},Wx.prototype.toAbsPath=function(e,t){var n,r=0,o=[],i=/\/$/.test(t)?"/":"",e=e.split("/"),a=t.split("/");for(jx(e,function(e){e&&o.push(e)}),e=o,n=a.length-1,o=[];0<=n;n--)0!==a[n].length&&"."!==a[n]&&(".."!==a[n]?0<r?r--:o.push(a[n]):r++);return 0!==(e=(n=e.length-r)<=0?J(o).join("/"):e.slice(0,n).join("/")+"/"+J(o).join("/")).indexOf("/")&&(e="/"+e),i&&e.lastIndexOf("/")!==e.length-1&&(e+=i),e},Wx.prototype.getURI=function(e){var t;return void 0===e&&(e=!1),this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},Wx);function Wx(e,t){e=Hx(e),this.settings=t||{};var n,r,o,i=this.settings.base_uri,a=this;/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?a.source=e:(n=0===e.indexOf("//"),0!==e.indexOf("/")||n||(e=(i&&i.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=this.settings.base_uri?this.settings.base_uri.path:new Wx(document.location.href).directory,e=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+a.toAbsPath(r,e):(t=/([^#?]*)([#?]?.*)/.exec(e),(i&&i.protocol||"http")+"://mce_host"+a.toAbsPath(r,t[1])+t[2])),e=e.replace(/@@/g,"(mce_at)"),o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),jx(Vx,function(e,t){t=(t=o[t])&&t.replace(/\(mce_at\)/g,"@@");a[e]=t}),i&&(a.protocol||(a.protocol=i.protocol),a.userInfo||(a.userInfo=i.userInfo),a.port||"mce_host"!==a.host||(a.port=i.port),a.host&&"mce_host"!==a.host||(a.host=i.host),a.source=""),n&&(a.protocol=""))}var Kx=Qa.DOM,Xx=pt.extend,Yx=pt.each,Gx=pt.resolve,Jx=lt.ie,Qx=(Zx.prototype.render=function(){Yw(this)},Zx.prototype.focus=function(e){this.execCommand("mceFocus",!1,e)},Zx.prototype.hasFocus=function(){return Ud(this)},Zx.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this.settings[e];if(o)return this.callbackLookup&&(r=this.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?Gx(r):0,o=Gx(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:r}),o.apply(r||this,t)},Zx.prototype.translate=function(e){return su.translate(e)},Zx.prototype.getParam=function(e,t,n){return tb(this,e,t,n)},Zx.prototype.hasPlugin=function(e,t){return!!P(Ws(this).split(/[ ,]/),e)&&(!t||lb.get(e)!==undefined)},Zx.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)},Zx.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)},Zx.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},Zx.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},Zx.prototype.addShortcut=function(e,t,n,r){this.shortcuts.add(e,t,n,r)},Zx.prototype.execCommand=function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},Zx.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)},Zx.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)},Zx.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)},Zx.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Kx.show(this.getContainer()),Kx.hide(this.id)),this.load(),this.fire("show"))},Zx.prototype.hide=function(){var e=this,t=e.getDoc();e.hidden||(Jx&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Kx.hide(e.getContainer()),Kx.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},Zx.prototype.isHidden=function(){return!!this.hidden},Zx.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})},Zx.prototype.load=function(e){var t=this.getElement();if(this.removed)return"";if(t){(e=e||{}).load=!0;var n=bn(t)?t.value:t.innerHTML,n=this.setContent(n,e);return e.element=t,e.no_events||this.fire("LoadContent",e),e.element=t=null,n}},Zx.prototype.save=function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,bn(o)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=Kx.getParent(r.id,"form"))&&Yx(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},Zx.prototype.setContent=function(e,t){return Lv(this,e,t)},Zx.prototype.getContent=function(e){return Pv(this,e)},Zx.prototype.insertContent=function(e,t){t&&(e=Xx({content:e},t)),this.execCommand("mceInsertContent",!1,e)},Zx.prototype.resetContent=function(e){e===undefined?Lv(this,this.startContent,{format:"raw"}):Lv(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},Zx.prototype.isDirty=function(){return!this.isNotDirty},Zx.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},Zx.prototype.getContainer=function(){return this.container||(this.container=Kx.get(this.editorContainer||this.id+"_parent")),this.container},Zx.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},Zx.prototype.getElement=function(){return this.targetElm||(this.targetElm=Kx.get(this.id)),this.targetElm},Zx.prototype.getWin=function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},Zx.prototype.getDoc=function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},Zx.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},Zx.prototype.convertURL=function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},Zx.prototype.addVisual=function(e){Gw(this,e)},Zx.prototype.remove=function(){Fv(this)},Zx.prototype.destroy=function(e){Uv(this,e)},Zx.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)},Zx.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},Zx.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},Zx.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},Zx.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},Zx.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},Zx);function Zx(e,t,n){var r=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,Xx(this,Tx),this.settings=Zv(this,e,this.documentBaseUrl,n.defaultSettings,t),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(nu.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Qa.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),cu.languageLoad=this.settings.language_load,cu.baseURL=n.baseURL,this.id=e,this.setDirty(!1),this.documentBaseURI=new $x(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new Fx(this),this.editorCommands=new cx(this),this.settings.cache_suffix&&(lt.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:zx(),styleSheetLoader:undefined,show:ee,hide:ee,enable:ee,disable:ee,isDisabled:N};e=Ox(this);this.mode=e,this.setMode=e.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=$a.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}var eS,tS=Qa.DOM,nS=pt.explode,rS=pt.each,oS=pt.extend,iS=0,aS=!1,uS=[],sS=[],cS=function(t){var n=t.type;rS(mS.get(),function(e){switch(n){case"scroll":e.fire("ScrollWindow",t);break;case"resize":e.fire("ResizeWindow",t)}})},lS=function(e){e!==aS&&(e?$a(window).on("resize scroll",cS):$a(window).off("resize scroll",cS),aS=e)},fS=function(t){var e=sS;delete uS[t.id];for(var n=0;n<uS.length;n++)if(uS[n]===t){uS.splice(n,1);break}return sS=U(sS,function(e){return t!==e}),mS.activeEditor===t&&(mS.activeEditor=0<sS.length?sS[0]:null),mS.focusedEditor===t&&(mS.focusedEditor=null),e.length!==sS.length},dS="CSS1Compat"!==document.compatMode,mS=Ee(Ee({},Xe),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:$a,majorVersion:"5",minorVersion:"9.0",releaseDate:"TBD",editors:uS,i18n:su,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t="",n=$x.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,t=r.suffix;else{for(var o,i=document.getElementsByTagName("script"),a=0;a<i.length;a++)if(""!==(o=i[a].src||"")){var u=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==u.indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(o=document.currentScript.src).indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new $x(n).toAbsolute(e),this.documentBaseURL=n,this.baseURI=new $x(this.baseURL),this.suffix=t,(n=this).on("AddEditor",h(Od,n)),n.on("RemoveEditor",h(Bd,n))},overrideDefaults:function(e){var t=e.base_url;t&&this._setBaseUrl(t);t=e.suffix;e.suffix&&(this.suffix=t);e=(this.defaultSettings=e).plugin_base_urls;e!==undefined&&ae(e,function(e,t){cu.PluginManager.urls[t]=e})},init:function(a){var n,u=this,s=pt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=function(e){var t=e.id;return t||(t=ge(e,"name").filter(function(e){return!tS.get(e)}).getOrThunk(tS.uniqueId),e.setAttribute("id",t)),t},l=function(e,t){return t.constructor===RegExp?t.test(e.className):tS.hasClass(e,t)},f=function(e){n=e},e=function(){var r,o=0,i=[],n=function(e,t,n){t=new Qx(e,t,u);i.push(t),t.on("init",function(){++o===r.length&&f(i)}),t.targetElm=t.targetElm||n,t.render()};tS.unbind(window,"ready",e),function(e){e=a[e];if(e)e.apply(u,[])}("onpageload"),r=$a.unique(function(t){var n=[];if(lt.browser.isIE()&&lt.browser.version.major<11)return yb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(dS)return yb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)return rS(t.types,function(e){n=n.concat(tS.select(e.selector))}),n;if(t.selector)return tS.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":var e=t.elements||"";0<e.length&&rS(nS(e),function(t){var e=tS.get(t);e?n.push(e):rS(document.forms,function(e){rS(e.elements,function(e){e.name===t&&(t="mce_editor_"+iS++,tS.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":rS(tS.select("textarea"),function(e){t.editor_deselector&&l(e,t.editor_deselector)||t.editor_selector&&!l(e,t.editor_selector)||n.push(e)})}return n}(a)),a.types?rS(a.types,function(t){pt.each(r,function(e){return!tS.is(e,t.selector)||(n(c(e),oS({},a,t),e),!1)})}):(pt.each(r,function(e){(e=u.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(fS(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)}),0===(r=pt.grep(r,function(e){return!u.get(e.id)})).length?f([]):rS(r,function(e){var t;t=e,a.inline&&t.tagName.toLowerCase()in s?yb("Could not initialize inline editor on invalid inline target element",e):n(c(e),a,e)}))};return u.settings=a,tS.bind(window,"ready",e),new hr(function(t){n?t(n):f=function(e){t(e)}})},get:function(t){return 0===arguments.length?sS.slice(0):W(t)?H(sS,function(e){return e.id===t}).getOr(null):w(t)&&sS[t]||null},add:function(e){var n=this;return uS[e.id]===e||(null===n.get(e.id)&&("length"!==e.id&&(uS[e.id]=e),uS.push(e),sS.push(e)),lS(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),eS||(eS=function(e){var t=n.fire("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",eS))),e},createEditor:function(e,t){return this.add(new Qx(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!W(e))return l(r.get((n=e).id))?null:(fS(n)&&r.fire("RemoveEditor",{editor:n}),0===sS.length&&window.removeEventListener("beforeunload",eS),n.remove(),lS(0<sS.length),n);rS(tS.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=sS.length-1;0<=t;t--)r.remove(sS[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new Qx(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",!1,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){rS(sS,function(e){e.save()})},addI18n:function(e,t){su.add(e,t)},translate:function(e){return su.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new $x(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new $x(this.baseURL)}});mS.setup();var gS,pS,hS,vS,bS=Math.min,yS=Math.max,CS=Math.round,wS=function(e,t,n){var r=t.x,o=t.y,i=e.w,a=e.h,e=t.w,t=t.h,n=(n||"").split("");return"b"===n[0]&&(o+=t),"r"===n[1]&&(r+=e),"c"===n[0]&&(o+=CS(t/2)),"c"===n[1]&&(r+=CS(e/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=CS(a/2)),"c"===n[4]&&(r-=CS(i/2)),xS(r,o,i,a)},xS=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},e={inflate:function(e,t,n){return xS(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:wS,findBestRelativePosition:function(e,t,n,r){for(var o,i=0;i<r.length;i++)if((o=wS(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n=yS(e.x,t.x),r=yS(e.y,t.y),o=bS(e.x+e.w,t.x+t.w),t=bS(e.y+e.h,t.y+t.h);return o-n<0||t-r<0?null:xS(n,r,o-n,t-r)},clamp:function(e,t,n){var r=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h,u=t.x+t.w,s=t.y+t.h,e=yS(0,t.x-r),t=yS(0,t.y-o),u=yS(0,i-u),s=yS(0,a-s);return r+=e,o+=t,n&&(i+=e,a+=t,r-=u,o-=s),xS(r,o,(i-=u)-r,(a-=s)-o)},create:xS,fromClientRect:function(e){return xS(e.left,e.top,e.width,e.height)}},Ve=(gS={},pS={},{load:function(r,o){var i='Script at URL "'+o+'" failed to load',a='Script at URL "'+o+"\" did not call `tinymce.Resource.add('"+r+"', data)` within 1 second";if(gS[r]!==undefined)return gS[r];var e=new hr(function(e,t){var n=function(e,t,n){void 0===n&&(n=1e3);var r=!1,o=null,i=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||(r=!0,null!==o&&(clearTimeout(o),o=null),n.apply(null,e))}},e=i(e),a=i(t);return{start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||null!==o||(o=setTimeout(function(){return a.apply(null,e)},n))},resolve:e,reject:a}}(e,t);pS[r]=n.resolve,nu.ScriptLoader.loadScript(o,function(){return n.start(a)},function(){return n.reject(i)})});return gS[r]=e},add:function(e,t){pS[e]!==undefined&&(pS[e](t),delete pS[e]),gS[e]=hr.resolve(t)}}),SS=pt.each,NS=pt.extend,n=function(){};n.extend=hS=function(n){var o=this.prototype,r=function(){var e,t,n;if(!vS&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},t=function(){return this};vS=!0;var i=new this;return vS=!1,n.Mixins&&(SS(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),o.Mixins&&(n.Mixins=o.Mixins.concat(n.Mixins))),n.Methods&&SS(n.Methods.split(","),function(e){n[e]=t}),n.Properties&&SS(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return e!==undefined?(this[t]=e,this):this[t]}}),n.Statics&&SS(n.Statics,function(e,t){r[t]=e}),n.Defaults&&o.Defaults&&(n.Defaults=NS({},o.Defaults,n.Defaults)),ae(n,function(e,t){var n,r;"function"==typeof e&&o[t]?i[t]=(n=t,r=e,function(){var e=this._super;this._super=o[n];var t=r.apply(this,arguments);return this._super=e,t}):i[t]=e}),r.prototype=i,(r.constructor=r).extend=hS,r};var ES=Math.min,kS=Math.max,_S=Math.round,TS={serialize:function(e){e=JSON.stringify(e);return W(e)?e.replace(/[\u0080-\uFFFF]/g,function(e){e=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e}):e},parse:function(e){try{return JSON.parse(e)}catch(t){}}},k={callbacks:{},count:0,send:function(t){var n=this,r=Qa.DOM,o=(t.count!==undefined?t:n).count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}},AS=Ee(Ee({},Xe),{send:function(e){var t,n=0,r=function(){!e["async"]||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):kr.setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e["async"]=!1!==e["async"],e.data=e.data||"",AS.fire("beforeInitialize",{settings:e}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e["async"]),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&pt.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=AS.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e["async"])return r();kr.setTimeout(r,10)}}),RS=pt.extend,o=(DS.sendRPC=function(e){return(new DS).send(e)},DS.prototype.send=function(e){var n=e.error,r=e.success,o=RS(this.settings,e);o.success=function(e,t){(e=void 0===(e=TS.parse(e))?{error:"JSON Parse error."}:e).error?n.call(o.error_scope||o.scope,e.error,t):r.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){n&&n.call(o.error_scope||o.scope,e,t)},o.data=TS.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),o.content_type="application/json",AS.send(o)},DS);function DS(e){this.settings=RS({},e),this.count=0}var OS,BS,PS;try{var LS,IS="__storage_test__";(LS=window.localStorage).setItem(IS,IS),LS.removeItem(IS)}catch(FS){OS={},BS=[],PS={getItem:function(e){e=OS[e];return e||null},setItem:function(e,t){BS.push(e),OS[e]=String(t)},key:function(e){return BS[e]},removeItem:function(t){BS=BS.filter(function(e){return e===t}),delete OS[t]},clear:function(){BS=[],OS={}},length:0},Object.defineProperty(PS,"length",{get:function(){return BS.length},configurable:!1,enumerable:!1}),LS=PS}var MS,Ve={geom:{Rect:e},util:{Promise:hr,Delay:kr,Tools:pt,VK:Ef,URI:$x,Class:n,EventDispatcher:Cx,Observable:Xe,I18n:su,XHR:AS,JSON:TS,JSONRequest:o,JSONP:k,LocalStorage:LS,Color:function(e){var n={},u=0,s=0,c=0,t=function(e){var t;return"object"==typeof e?"r"in e?(u=e.r,s=e.g,c=e.b):"v"in e&&function(e,t,n){if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=kS(0,ES(t,1)),n=kS(0,ES(n,1)),0!==t){var e=e/60,r=n*t,o=r*(1-Math.abs(e%2-1)),t=n-r;switch(Math.floor(e)){case 0:u=r,s=o,c=0;break;case 1:u=o,s=r,c=0;break;case 2:u=0,s=r,c=o;break;case 3:u=0,s=o,c=r;break;case 4:u=o,s=0,c=r;break;case 5:u=r,s=0,c=o;break;default:u=s=c=0}u=_S(255*(u+t)),s=_S(255*(s+t)),c=_S(255*(c+t))}else u=s=c=_S(255*n)}(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(u=parseInt(t[1],10),s=parseInt(t[2],10),c=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(u=parseInt(t[1],16),s=parseInt(t[2],16),c=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(u=parseInt(t[1]+t[1],16),s=parseInt(t[2]+t[2],16),c=parseInt(t[3]+t[3],16)),u=u<0?0:255<u?255:u,s=s<0?0:255<s?255:s,c=c<0?0:255<c?255:c,n};return e&&t(e),n.toRgb=function(){return{r:u,g:s,b:c}},n.toHsv=function(){return e=u,t=s,n=c,o=0,i=ES(e/=255,ES(t/=255,n/=255)),a=kS(e,kS(t,n)),i===a?{h:0,s:0,v:100*(o=i)}:(r=(a-i)/a,{h:_S(60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/((o=a)-i))),s:_S(100*r),v:_S(100*o)});var e,t,n,r,o,i,a},n.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(u)+e(s)+e(c)},n.parse=t,n},ImageUploader:function(n){var e=Sb(),r=Tb(n,e);return{upload:function(e,t){return r.upload(e,(t=void 0===t?!0:t)?_b(n):undefined)}}}},dom:{EventUtils:li,Sizzle:aa,DomQuery:$a,TreeWalker:Ar,TextSeeker:Lu,DOMUtils:Qa,ScriptLoader:nu,RangeUtils:ct,Serializer:Bv,StyleSheetLoader:_r,ControlSelection:_f,BookmarkManager:wf,Selection:lv,Event:li.Event},html:{Styles:ti,Entities:Vo,Node:Gd,Schema:Zo,SaxParser:nm,DomParser:Tv,Writer:cm,Serializer:lm},Env:lt,AddOnManager:cu,Annotator:Cf,Formatter:Ib,UndoManager:Ub,EditorCommands:cx,WindowManager:mb,NotificationManager:cb,EditorObservable:Tx,Shortcuts:Fx,Editor:Qx,FocusManager:_d,EditorManager:mS,DOM:Qa.DOM,ScriptLoader:nu.ScriptLoader,PluginManager:lb,ThemeManager:fb,IconManager:nb,Resource:Ve,trim:pt.trim,isArray:pt.isArray,is:pt.is,toArray:pt.toArray,makeMap:pt.makeMap,each:pt.each,map:pt.map,grep:pt.grep,inArray:pt.inArray,extend:pt.extend,create:pt.create,walk:pt.walk,createNS:pt.createNS,resolve:pt.resolve,explode:pt.explode,_addCacheSuffix:pt._addCacheSuffix,isOpera:lt.opera,isWebKit:lt.webkit,isIE:lt.ie,isGecko:lt.gecko,isMac:lt.mac},Ve=pt.extend(mS,Ve);MS=Ve,window.tinymce=MS,window.tinyMCE=MS,function(e){if("object"==typeof module)try{module.exports=e}catch(t){}}(Ve)}();